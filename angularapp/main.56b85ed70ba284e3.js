"use strict";var u1=Object.defineProperty,l1=Object.defineProperties,c1=Object.getOwnPropertyDescriptors,bx=Object.getOwnPropertySymbols,d1=Object.prototype.hasOwnProperty,h1=Object.prototype.propertyIsEnumerable,Dx=(nt,Ee,x)=>Ee in nt?u1(nt,Ee,{enumerable:!0,configurable:!0,writable:!0,value:x}):nt[Ee]=x,Cx=(nt,Ee)=>{for(var x in Ee||(Ee={}))d1.call(Ee,x)&&Dx(nt,x,Ee[x]);if(bx)for(var x of bx(Ee))h1.call(Ee,x)&&Dx(nt,x,Ee[x]);return nt},Tx=(nt,Ee)=>l1(nt,c1(Ee));(self.webpackChunkParciales=self.webpackChunkParciales||[]).push([[179],{2011:(nt,Ee,x)=>{x.d(Ee,{Dh:()=>ce,GT:()=>ve,Ot:()=>oe,cc:()=>we,hO:()=>Ue,on:()=>$,pX:()=>le,xv:()=>de});var h=x(5e3),Y=x(127),P=x(880);nt=x.hmd(nt);const se=["ngOnDestroy"],le=(Ie,et,Ye,Se={})=>new Proxy(Ie,{get:(be,De)=>Ye.runOutsideAngular(()=>{var We;if(Ie[De])return(null===(We=null==Se?void 0:Se.spy)||void 0===We?void 0:We.get)&&Se.spy.get(De,Ie[De]),Ie[De];if(se.indexOf(De)>-1)return()=>{};const Fe=et.toPromise().then(B=>{const Ce=B&&B[De];return"function"==typeof Ce?Ce.bind(B):Ce&&Ce.then?Ce.then(K=>Ye.run(()=>K)):Ye.run(()=>Ce)});return new Proxy(()=>{},{get:(B,Ce)=>Fe[Ce],apply:(B,Ce,K)=>Fe.then(re=>{var ne;const pe=re&&re(...K);return(null===(ne=null==Se?void 0:Se.spy)||void 0===ne?void 0:ne.apply)&&Se.spy.apply(De,K,pe),pe})})})}),ve=(Ie,et)=>{et.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Se=>{Object.defineProperty(Ie.prototype,Se,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Se))})})};class oe{constructor(et){return et}}const ce=new h.OlP("angularfire2.app.options"),de=new h.OlP("angularfire2.app.name");function $(Ie,et,Ye){const be="object"==typeof Ye&&Ye||{};be.name=be.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const We=Y.Z.apps.filter(Fe=>Fe&&Fe.name===be.name)[0]||et.runOutsideAngular(()=>Y.Z.initializeApp(Ie,be));try{JSON.stringify(Ie)!==JSON.stringify(We.options)&&j("error",`${We.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Fe){}return new oe(We)}const j=(Ie,...et)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[Ie](...et)},te={provide:oe,useFactory:$,deps:[ce,h.R0b,[new h.FiY,de]]};let Ue=(()=>{class Ie{constructor(Ye){Y.Z.registerVersion("angularfire",P.q4.full,"core"),Y.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Y.Z.registerVersion("angular",h.q4F.full,Ye.toString())}static initializeApp(Ye,Se){return{ngModule:Ie,providers:[{provide:ce,useValue:Ye},{provide:de,useValue:Se}]}}}return Ie.\u0275fac=function(Ye){return new(Ye||Ie)(h.LFG(h.Lbi))},Ie.\u0275mod=h.oAB({type:Ie}),Ie.\u0275inj=h.cJS({providers:[te]}),Ie})();function we(Ie,et,Ye,Se,be){const[,De,We]=globalThis.\u0275AngularfireInstanceCache.find(Fe=>Fe[0]===Ie)||[];if(De)return function ke(Ie,et){try{return Ie.toString()===et.toString()}catch(Ye){return Ie===et}}(be,We)||(he("error",`${et} was already initialized on the ${Ye} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:be,was:We})),De;{const Fe=Se();return globalThis.\u0275AngularfireInstanceCache.push([Ie,Fe,be]),Fe}}const Be=!!nt.hot,he=(Ie,...et)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[Ie](...et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},880:(nt,Ee,x)=>{x.d(Ee,{q4:()=>Pd,iC:()=>Cs,HU:()=>gn,vb:()=>Ks,JM:()=>mu,nk:()=>Hf});var h=x(5e3),Y=x(5867),P=x(5861),se=x(9681),le=x(2090),ve=x(4859),oe=x(1877);x(2833);const de="@firebase/remote-config",$="0.3.8",we=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class dt{constructor(R,W,ue,je){this.client=R,this.storage=W,this.storageCache=ue,this.logger=je}isCachedDataFresh(R,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ue=Date.now()-W,je=ue<=R;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ue}. Cache max age millis (minimumFetchIntervalMillis setting): ${R}. Is cache hit: ${je}.`),je}fetch(R){var W=this;return(0,P.Z)(function*(){const[ue,je]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if(je&&W.isCachedDataFresh(R.cacheMaxAgeMillis,ue))return je;R.eTag=je&&je.eTag;const ze=yield W.client.fetch(R),_t=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ze.status&&_t.push(W.storage.setLastSuccessfulFetchResponse(ze)),yield Promise.all(_t),ze})()}}function Ut(N=navigator){return N.languages&&N.languages[0]||N.language}class At{constructor(R,W,ue,je,ze,_t){this.firebaseInstallations=R,this.sdkVersion=W,this.namespace=ue,this.projectId=je,this.apiKey=ze,this.appId=_t}fetch(R){var W=this;return(0,P.Z)(function*(){const[ue,je]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),_t=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,_n={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":R.eTag||"*"},it={sdk_version:W.sdkVersion,app_instance_id:ue,app_instance_id_token:je,app_id:W.appId,language_code:Ut()},an={method:"POST",headers:_n,body:JSON.stringify(it)},mn=fetch(_t,an),xt=new Promise((Me,kt)=>{R.signal.addEventListener(()=>{const As=new Error("The operation was aborted.");As.name="AbortError",kt(As)})});let Ts;try{yield Promise.race([mn,xt]),Ts=yield mn}catch(Me){let kt="fetch-client-network";throw"AbortError"===Me.name&&(kt="fetch-timeout"),we.create(kt,{originalErrorMessage:Me.message})}let xi=Ts.status;const Do=Ts.headers.get("ETag")||void 0;let Co,fs;if(200===Ts.status){let Me;try{Me=yield Ts.json()}catch(kt){throw we.create("fetch-client-parse",{originalErrorMessage:kt.message})}Co=Me.entries,fs=Me.state}if("INSTANCE_STATE_UNSPECIFIED"===fs?xi=500:"NO_CHANGE"===fs?xi=304:("NO_TEMPLATE"===fs||"EMPTY_CONFIG"===fs)&&(Co={}),304!==xi&&200!==xi)throw we.create("fetch-status",{httpStatus:xi});return{status:xi,eTag:Do,config:Co}})()}}class Fn{constructor(R,W){this.client=R,this.storage=W}fetch(R){var W=this;return(0,P.Z)(function*(){const ue=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(R,ue)})()}attemptFetch(R,{throttleEndTimeMillis:W,backoffCount:ue}){var je=this;return(0,P.Z)(function*(){yield function Ke(N,R){return new Promise((W,ue)=>{const je=Math.max(R-Date.now(),0),ze=setTimeout(W,je);N.addEventListener(()=>{clearTimeout(ze),ue(we.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}(R.signal,W);try{const ze=yield je.client.fetch(R);return yield je.storage.deleteThrottleMetadata(),ze}catch(ze){if(!function Wt(N){if(!(N instanceof le.ZR&&N.customData))return!1;const R=Number(N.customData.httpStatus);return 429===R||500===R||503===R||504===R}(ze))throw ze;const _t={throttleEndTimeMillis:Date.now()+(0,le.$s)(ue),backoffCount:ue+1};return yield je.storage.setThrottleMetadata(_t),je.attemptFetch(R,_t)}})()}}class jn{constructor(R,W,ue,je,ze){this.app=R,this._client=W,this._storageCache=ue,this._storage=je,this._logger=ze,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ct(N,R){const W=N.target.error||void 0;return we.create(R,{originalErrorMessage:W&&W.message})}const Tt="app_namespace_store";class ln{constructor(R,W,ue,je=function Ln(){return new Promise((N,R)=>{try{const W=indexedDB.open("firebase_remote_config",1);W.onerror=ue=>{R(Ct(ue,"storage-open"))},W.onsuccess=ue=>{N(ue.target.result)},W.onupgradeneeded=ue=>{0===ue.oldVersion&&ue.target.result.createObjectStore(Tt,{keyPath:"compositeKey"})}}catch(W){R(we.create("storage-open",{originalErrorMessage:W}))}})}()){this.appId=R,this.appName=W,this.namespace=ue,this.openDbPromise=je}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(R){return this.set("last_fetch_status",R)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(R){return this.set("last_successful_fetch_timestamp_millis",R)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(R){return this.set("last_successful_fetch_response",R)}getActiveConfig(){return this.get("active_config")}setActiveConfig(R){return this.set("active_config",R)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(R){return this.set("active_config_etag",R)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(R){return this.set("throttle_metadata",R)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(R){var W=this;return(0,P.Z)(function*(){const ue=yield W.openDbPromise;return new Promise((je,ze)=>{const _n=ue.transaction([Tt],"readonly").objectStore(Tt),it=W.createCompositeKey(R);try{const an=_n.get(it);an.onerror=mn=>{ze(Ct(mn,"storage-get"))},an.onsuccess=mn=>{const xt=mn.target.result;je(xt?xt.value:void 0)}}catch(an){ze(we.create("storage-get",{originalErrorMessage:an&&an.message}))}})})()}set(R,W){var ue=this;return(0,P.Z)(function*(){const je=yield ue.openDbPromise;return new Promise((ze,_t)=>{const it=je.transaction([Tt],"readwrite").objectStore(Tt),an=ue.createCompositeKey(R);try{const mn=it.put({compositeKey:an,value:W});mn.onerror=xt=>{_t(Ct(xt,"storage-set"))},mn.onsuccess=()=>{ze()}}catch(mn){_t(we.create("storage-set",{originalErrorMessage:mn&&mn.message}))}})})()}delete(R){var W=this;return(0,P.Z)(function*(){const ue=yield W.openDbPromise;return new Promise((je,ze)=>{const _n=ue.transaction([Tt],"readwrite").objectStore(Tt),it=W.createCompositeKey(R);try{const an=_n.delete(it);an.onerror=mn=>{ze(Ct(mn,"storage-delete"))},an.onsuccess=()=>{je()}}catch(an){ze(we.create("storage-delete",{originalErrorMessage:an&&an.message}))}})})()}createCompositeKey(R){return[this.appId,this.appName,this.namespace,R].join()}}class Xn{constructor(R){this.storage=R}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var R=this;return(0,P.Z)(function*(){const W=R.storage.getLastFetchStatus(),ue=R.storage.getLastSuccessfulFetchTimestampMillis(),je=R.storage.getActiveConfig(),ze=yield W;ze&&(R.lastFetchStatus=ze);const _t=yield ue;_t&&(R.lastSuccessfulFetchTimestampMillis=_t);const _n=yield je;_n&&(R.activeConfig=_n)})()}setLastFetchStatus(R){return this.lastFetchStatus=R,this.storage.setLastFetchStatus(R)}setLastSuccessfulFetchTimestampMillis(R){return this.lastSuccessfulFetchTimestampMillis=R,this.storage.setLastSuccessfulFetchTimestampMillis(R)}setActiveConfig(R){return this.activeConfig=R,this.storage.setActiveConfig(R)}}function ft(){return er.apply(this,arguments)}function er(){return(er=(0,P.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(N){return!1}})).apply(this,arguments)}!function vr(){(0,se._registerComponent)(new ve.wA("remote-config",function N(R,{instanceIdentifier:W}){const ue=R.getProvider("app").getImmediate(),je=R.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw we.create("registration-window");if(!(0,le.hl)())throw we.create("indexed-db-unavailable");const{projectId:ze,apiKey:_t,appId:_n}=ue.options;if(!ze)throw we.create("registration-project-id");if(!_t)throw we.create("registration-api-key");if(!_n)throw we.create("registration-app-id");const it=new ln(_n,ue.name,W=W||"firebase"),an=new Xn(it),mn=new oe.Yd(de);mn.logLevel=oe.in.ERROR;const xt=new At(je,se.SDK_VERSION,W,ze,_t,_n),Ts=new Fn(xt,it),xi=new dt(Ts,it,an,mn),Do=new jn(ue,xi,an,it,mn);return function We(N){const R=(0,le.m9)(N);R._initializePromise||(R._initializePromise=R._storageCache.loadFromStorage().then(()=>{R._isInitializationComplete=!0}))}(Do),Do},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(de,$),(0,se.registerVersion)(de,$,"esm2017")}();var Jt=x(8766);const vn="/firebase-messaging-sw.js",Kr="/firebase-cloud-messaging-push-scope",_r="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",In="google.c.a.c_id",Er="google.c.a.c_l",ii="google.c.a.ts",Vt="google.c.a.e";var ht=(()=>{return(N=ht||(ht={})).PUSH_RECEIVED="push-received",N.NOTIFICATION_CLICKED="notification-clicked",ht;var N})();function sn(N){const R=new Uint8Array(N);return btoa(String.fromCharCode(...R)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kr(N){const W=(N+"=".repeat((4-N.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ue=atob(W),je=new Uint8Array(ue.length);for(let ze=0;ze<ue.length;++ze)je[ze]=ue.charCodeAt(ze);return je}const Ot="fcm_token_details_db",xn="fcm_token_object_Store";function Tn(N){return k.apply(this,arguments)}function k(){return k=(0,P.Z)(function*(N){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ze=>ze.name).includes(Ot))return null;let R=null;return(yield(0,Jt.X3)(Ot,5,{upgrade:(ue=(0,P.Z)(function*(je,ze,_t,_n){var it;if(ze<2||!je.objectStoreNames.contains(xn))return;const an=_n.objectStore(xn),mn=yield an.index("fcmSenderId").get(N);if(yield an.clear(),mn)if(2===ze){const xt=mn;if(!xt.auth||!xt.p256dh||!xt.endpoint)return;R={token:xt.fcmToken,createTime:null!==(it=xt.createTime)&&void 0!==it?it:Date.now(),subscriptionOptions:{auth:xt.auth,p256dh:xt.p256dh,endpoint:xt.endpoint,swScope:xt.swScope,vapidKey:"string"==typeof xt.vapidKey?xt.vapidKey:sn(xt.vapidKey)}}}else if(3===ze){const xt=mn;R={token:xt.fcmToken,createTime:xt.createTime,subscriptionOptions:{auth:sn(xt.auth),p256dh:sn(xt.p256dh),endpoint:xt.endpoint,swScope:xt.swScope,vapidKey:sn(xt.vapidKey)}}}else if(4===ze){const xt=mn;R={token:xt.fcmToken,createTime:xt.createTime,subscriptionOptions:{auth:sn(xt.auth),p256dh:sn(xt.p256dh),endpoint:xt.endpoint,swScope:xt.swScope,vapidKey:sn(xt.vapidKey)}}}}),function(ze,_t,_n,it){return ue.apply(this,arguments)})})).close(),yield(0,Jt.Lj)(Ot),yield(0,Jt.Lj)("fcm_vapid_details_db"),yield(0,Jt.Lj)("undefined"),q(R)?R:null;var ue}),k.apply(this,arguments)}function q(N){if(!N||!N.subscriptionOptions)return!1;const{subscriptionOptions:R}=N;return"number"==typeof N.createTime&&N.createTime>0&&"string"==typeof N.token&&N.token.length>0&&"string"==typeof R.auth&&R.auth.length>0&&"string"==typeof R.p256dh&&R.p256dh.length>0&&"string"==typeof R.endpoint&&R.endpoint.length>0&&"string"==typeof R.swScope&&R.swScope.length>0&&"string"==typeof R.vapidKey&&R.vapidKey.length>0}const V="firebase-messaging-store";let J=null;function U(){return J||(J=(0,Jt.X3)("firebase-messaging-database",1,{upgrade:(N,R)=>{0===R&&N.createObjectStore(V)}})),J}function X(N){return me.apply(this,arguments)}function me(){return(me=(0,P.Z)(function*(N){const R=It(N),ue=yield(yield U()).transaction(V).objectStore(V).get(R);if(ue)return ue;{const je=yield Tn(N.appConfig.senderId);if(je)return yield xe(N,je),je}})).apply(this,arguments)}function xe(N,R){return He.apply(this,arguments)}function He(){return(He=(0,P.Z)(function*(N,R){const W=It(N),je=(yield U()).transaction(V,"readwrite");return yield je.objectStore(V).put(R,W),yield je.done,R})).apply(this,arguments)}function Ve(N){return lt.apply(this,arguments)}function lt(){return(lt=(0,P.Z)(function*(N){const R=It(N),ue=(yield U()).transaction(V,"readwrite");yield ue.objectStore(V).delete(R),yield ue.done})).apply(this,arguments)}function It({appConfig:N}){return N.appId}const Zt=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function wr(N,R){return si.apply(this,arguments)}function si(){return(si=(0,P.Z)(function*(N,R){const W=yield qs(N),ue=Ei(R),je={method:"POST",headers:W,body:JSON.stringify(ue)};let ze;try{ze=yield(yield fetch(ur(N.appConfig),je)).json()}catch(_t){throw Zt.create("token-subscribe-failed",{errorInfo:_t})}if(ze.error)throw Zt.create("token-subscribe-failed",{errorInfo:ze.error.message});if(!ze.token)throw Zt.create("token-subscribe-no-token");return ze.token})).apply(this,arguments)}function on(N,R){return pn.apply(this,arguments)}function pn(){return(pn=(0,P.Z)(function*(N,R){const W=yield qs(N),ue=Ei(R.subscriptionOptions),je={method:"PATCH",headers:W,body:JSON.stringify(ue)};let ze;try{ze=yield(yield fetch(`${ur(N.appConfig)}/${R.token}`,je)).json()}catch(_t){throw Zt.create("token-update-failed",{errorInfo:_t})}if(ze.error)throw Zt.create("token-update-failed",{errorInfo:ze.error.message});if(!ze.token)throw Zt.create("token-update-no-token");return ze.token})).apply(this,arguments)}function _i(N,R){return bn.apply(this,arguments)}function bn(){return(bn=(0,P.Z)(function*(N,R){const ue={method:"DELETE",headers:yield qs(N)};try{const ze=yield(yield fetch(`${ur(N.appConfig)}/${R}`,ue)).json();if(ze.error)throw Zt.create("token-unsubscribe-failed",{errorInfo:ze.error.message})}catch(je){throw Zt.create("token-unsubscribe-failed",{errorInfo:je})}})).apply(this,arguments)}function ur({projectId:N}){return`https://fcmregistrations.googleapis.com/v1/projects/${N}/registrations`}function qs(N){return ji.apply(this,arguments)}function ji(){return(ji=(0,P.Z)(function*({appConfig:N,installations:R}){const W=yield R.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":N.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function Ei({p256dh:N,auth:R,endpoint:W,vapidKey:ue}){const je={web:{endpoint:W,auth:R,p256dh:N}};return ue!==_r&&(je.web.applicationPubKey=ue),je}const oi=6048e5;function $n(N){return ss.apply(this,arguments)}function ss(){return(ss=(0,P.Z)(function*(N){const R=yield Pt(N.swRegistration,N.vapidKey),W={vapidKey:N.vapidKey,swScope:N.swRegistration.scope,endpoint:R.endpoint,auth:sn(R.getKey("auth")),p256dh:sn(R.getKey("p256dh"))},ue=yield X(N.firebaseDependencies);if(ue){if(jt(ue.subscriptionOptions,W))return Date.now()>=ue.createTime+oi?F(N,{token:ue.token,createTime:Date.now(),subscriptionOptions:W}):ue.token;try{yield _i(N.firebaseDependencies,ue.token)}catch(je){console.warn(je)}return Oe(N.firebaseDependencies,W)}return Oe(N.firebaseDependencies,W)})).apply(this,arguments)}function Ir(N){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,P.Z)(function*(N){const R=yield X(N.firebaseDependencies);R&&(yield _i(N.firebaseDependencies,R.token),yield Ve(N.firebaseDependencies));const W=yield N.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function F(N,R){return ie.apply(this,arguments)}function ie(){return(ie=(0,P.Z)(function*(N,R){try{const W=yield on(N.firebaseDependencies,R),ue=Object.assign(Object.assign({},R),{token:W,createTime:Date.now()});return yield xe(N.firebaseDependencies,ue),W}catch(W){throw yield Ir(N),W}})).apply(this,arguments)}function Oe(N,R){return ot.apply(this,arguments)}function ot(){return(ot=(0,P.Z)(function*(N,R){const ue={token:yield wr(N,R),createTime:Date.now(),subscriptionOptions:R};return yield xe(N,ue),ue.token})).apply(this,arguments)}function Pt(N,R){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,P.Z)(function*(N,R){return(yield N.pushManager.getSubscription())||N.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:kr(R)})})).apply(this,arguments)}function jt(N,R){return R.vapidKey===N.vapidKey&&R.endpoint===N.endpoint&&R.auth===N.auth&&R.p256dh===N.p256dh}function cn(N){const R={from:N.from,collapseKey:N.collapse_key,messageId:N.fcmMessageId};return function br(N,R){if(!R.notification)return;N.notification={};const W=R.notification.title;W&&(N.notification.title=W);const ue=R.notification.body;ue&&(N.notification.body=ue);const je=R.notification.image;je&&(N.notification.image=je)}(R,N),function pt(N,R){!R.data||(N.data=R.data)}(R,N),function os(N,R){if(!R.fcmOptions)return;N.fcmOptions={};const W=R.fcmOptions.link;W&&(N.fcmOptions.link=W);const ue=R.fcmOptions.analytics_label;ue&&(N.fcmOptions.analyticsLabel=ue)}(R,N),R}function as(N){return"object"==typeof N&&!!N&&In in N}function ra(N,R){const W=[];for(let ue=0;ue<N.length;ue++)W.push(N.charAt(ue)),ue<R.length&&W.push(R.charAt(ue));return W.join("")}function Gn(N){return Zt.create("missing-app-config-values",{valueName:N})}ra("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ra("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ls{constructor(R,W,ue){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const je=function us(N){if(!N||!N.options)throw Gn("App Configuration Object");if(!N.name)throw Gn("App Name");const R=["projectId","apiKey","appId","messagingSenderId"],{options:W}=N;for(const ue of R)if(!W[ue])throw Gn(ue);return{appName:N.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(R);this.firebaseDependencies={app:R,appConfig:je,installations:W,analyticsProvider:ue}}_delete(){return Promise.resolve()}}function Hi(N){return qn.apply(this,arguments)}function qn(){return(qn=(0,P.Z)(function*(N){try{N.swRegistration=yield navigator.serviceWorker.register(vn,{scope:Kr}),N.swRegistration.update().catch(()=>{})}catch(R){throw Zt.create("failed-service-worker-registration",{browserErrorMessage:R.message})}})).apply(this,arguments)}function dn(N,R){return zs.apply(this,arguments)}function zs(){return(zs=(0,P.Z)(function*(N,R){if(!R&&!N.swRegistration&&(yield Hi(N)),R||!N.swRegistration){if(!(R instanceof ServiceWorkerRegistration))throw Zt.create("invalid-sw-registration");N.swRegistration=R}})).apply(this,arguments)}function cu(N,R){return lr.apply(this,arguments)}function lr(){return(lr=(0,P.Z)(function*(N,R){R?N.vapidKey=R:N.vapidKey||(N.vapidKey=_r)})).apply(this,arguments)}function Ds(){return(Ds=(0,P.Z)(function*(N,R){if(!navigator)throw Zt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Zt.create("permission-blocked");return yield cu(N,null==R?void 0:R.vapidKey),yield dn(N,null==R?void 0:R.serviceWorkerRegistration),$n(N)})).apply(this,arguments)}function du(N,R,W){return $i.apply(this,arguments)}function $i(){return($i=(0,P.Z)(function*(N,R,W){const ue=wi(R);(yield N.firebaseDependencies.analyticsProvider.get()).logEvent(ue,{message_id:W[In],message_name:W[Er],message_time:W[ii],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function wi(N){switch(N){case ht.NOTIFICATION_CLICKED:return"notification_open";case ht.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Rl(){return(Rl=(0,P.Z)(function*(N,R){const W=R.data;if(!W.isFirebaseMessaging)return;N.onMessageHandler&&W.messageType===ht.PUSH_RECEIVED&&("function"==typeof N.onMessageHandler?N.onMessageHandler(cn(W)):N.onMessageHandler.next(cn(W)));const ue=W.data;as(ue)&&"1"===ue[Vt]&&(yield du(N,W.messageType,ue))})).apply(this,arguments)}const fu="@firebase/messaging",cs=N=>{const R=new ls(N.getProvider("app").getImmediate(),N.getProvider("installations-internal").getImmediate(),N.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function hu(N,R){return Rl.apply(this,arguments)}(R,W)),R},Nl=N=>{const R=N.getProvider("messaging").getImmediate();return{getToken:ue=>function ai(N,R){return Ds.apply(this,arguments)}(R,ue)}};function Ci(){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,P.Z)(function*(){try{yield(0,le.eu)()}catch(N){return!1}return"undefined"!=typeof window&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Bf(){(0,se._registerComponent)(new ve.wA("messaging",cs,"PUBLIC")),(0,se._registerComponent)(new ve.wA("messaging-internal",Nl,"PRIVATE")),(0,se.registerVersion)(fu,"0.9.13"),(0,se.registerVersion)(fu,"0.9.13","esm2017")}();var Ws=x(7982),Vl=x(4408),ia=x(7565);const Ul=new class jf extends ia.v{}(class pu extends Vl.o{constructor(R,W){super(R,W),this.scheduler=R,this.work=W}schedule(R,W=0){return W>0?super.schedule(R,W):(this.delay=W,this.state=R,this.scheduler.flush(this),this)}execute(R,W){return W>0||this.closed?super.execute(R,W):this._execute(R,W)}requestAsyncId(R,W,ue=0){return null!=ue&&ue>0||null==ue&&this.delay>0?super.requestAsyncId(R,W,ue):R.flush(this)}});var Zs=x(4986),Ti=x(8505),Eo=x(9468),Bl=x(5363);const Pd=new h.GfV("7.3.0"),sa="__angularfire_symbol__analyticsIsSupportedValue",Ai="__angularfire_symbol__analyticsIsSupported",gu="__angularfire_symbol__remoteConfigIsSupportedValue",ds="__angularfire_symbol__remoteConfigIsSupported",oa="__angularfire_symbol__messagingIsSupportedValue",Dr="__angularfire_symbol__messagingIsSupported";globalThis[Ai]||(globalThis[Ai]=(0,Ws.Gb)().then(N=>globalThis[sa]=N).catch(()=>globalThis[sa]=!1)),globalThis[Dr]||(globalThis[Dr]=Ci().then(N=>globalThis[oa]=N).catch(()=>globalThis[oa]=!1)),globalThis[ds]||(globalThis[ds]=ft().then(N=>globalThis[gu]=N).catch(()=>globalThis[gu]=!1));const Hf={async:()=>globalThis[Ai],sync:()=>{const N=globalThis[sa];if(void 0===N)throw new Error((N=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${N} in the constructor, first ensure that ${N} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${N})\`.`)("Analytics"));return N}};function mu(N,R,W){if(R){if(1===R.length)return R[0];const ze=R.filter(_t=>_t.app===W);if(1===ze.length)return ze[0]}return W.container.getProvider(N).getImmediate({optional:!0})}const Ks=(N,R)=>{const W=R?[R]:(0,Y.C6)(),ue=[];return W.forEach(je=>{je.container.getProvider(N).instances.forEach(_t=>{ue.includes(_t)||ue.push(_t)})}),ue};function hs(){}class wo{constructor(R,W=Ul){this.zone=R,this.delegate=W}now(){return this.delegate.now()}schedule(R,W,ue){const je=this.zone;return this.delegate.schedule(function(_t){je.runGuarded(()=>{R.apply(this,[_t])})},W,ue)}}class km{constructor(R){this.zone=R,this.task=null}call(R,W){const ue=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hs,{},hs,hs)),W.pipe((0,Ti.b)({next:ue,complete:ue,error:ue})).subscribe(R).add(ue)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let gn=(()=>{class N{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new wo(Zone.current)),this.insideAngular=W.run(()=>new wo(Zone.current,Zs.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return N.\u0275fac=function(W){return new(W||N)(h.LFG(h.R0b))},N.\u0275prov=h.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();function Mi(){const N=globalThis.\u0275AngularFireScheduler;if(!N)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return N}function Cs(N){return Mi(),function Vr(N){return function(W){return(W=W.lift(new km(N.ngZone))).pipe((0,Eo.R)(N.outsideAngular),(0,Bl.Q)(N.insideAngular))}}(Mi())(N)}},2090:(nt,Ee,x)=>{x.d(Ee,{$s:()=>Ot,BH:()=>Ue,G6:()=>Fe,L:()=>ce,LL:()=>ae,Mn:()=>De,Sg:()=>we,UG:()=>he,US:()=>ve,ZB:()=>j,ZR:()=>pe,b$:()=>Ye,d:()=>Se,eu:()=>Ce,hl:()=>B,jU:()=>Ie,m9:()=>Tn,ne:()=>Hn,pd:()=>vr,r3:()=>jn,ru:()=>et,tV:()=>de,uI:()=>Be,vZ:()=>vi,w1:()=>be,xO:()=>ln,xb:()=>Tt,z$:()=>ke,zI:()=>K,zd:()=>Xn});const se=function(k){const q=[];let z=0;for(let Te=0;Te<k.length;Te++){let V=k.charCodeAt(Te);V<128?q[z++]=V:V<2048?(q[z++]=V>>6|192,q[z++]=63&V|128):55296==(64512&V)&&Te+1<k.length&&56320==(64512&k.charCodeAt(Te+1))?(V=65536+((1023&V)<<10)+(1023&k.charCodeAt(++Te)),q[z++]=V>>18|240,q[z++]=V>>12&63|128,q[z++]=V>>6&63|128,q[z++]=63&V|128):(q[z++]=V>>12|224,q[z++]=V>>6&63|128,q[z++]=63&V|128)}return q},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(k,q){if(!Array.isArray(k))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Te=[];for(let V=0;V<k.length;V+=3){const J=k[V],U=V+1<k.length,X=U?k[V+1]:0,me=V+2<k.length,xe=me?k[V+2]:0;let lt=(15&X)<<2|xe>>6,It=63&xe;me||(It=64,U||(lt=64)),Te.push(z[J>>2],z[(3&J)<<4|X>>4],z[lt],z[It])}return Te.join("")},encodeString(k,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(k):this.encodeByteArray(se(k),q)},decodeString(k,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(k):function(k){const q=[];let z=0,Te=0;for(;z<k.length;){const V=k[z++];if(V<128)q[Te++]=String.fromCharCode(V);else if(V>191&&V<224){const J=k[z++];q[Te++]=String.fromCharCode((31&V)<<6|63&J)}else if(V>239&&V<365){const me=((7&V)<<18|(63&k[z++])<<12|(63&k[z++])<<6|63&k[z++])-65536;q[Te++]=String.fromCharCode(55296+(me>>10)),q[Te++]=String.fromCharCode(56320+(1023&me))}else{const J=k[z++],U=k[z++];q[Te++]=String.fromCharCode((15&V)<<12|(63&J)<<6|63&U)}}return q.join("")}(this.decodeStringToByteArray(k,q))},decodeStringToByteArray(k,q){this.init_();const z=q?this.charToByteMapWebSafe_:this.charToByteMap_,Te=[];for(let V=0;V<k.length;){const J=z[k.charAt(V++)],X=V<k.length?z[k.charAt(V)]:0;++V;const xe=V<k.length?z[k.charAt(V)]:64;++V;const Ve=V<k.length?z[k.charAt(V)]:64;if(++V,null==J||null==X||null==xe||null==Ve)throw Error();Te.push(J<<2|X>>4),64!==xe&&(Te.push(X<<4&240|xe>>2),64!==Ve&&Te.push(xe<<6&192|Ve))}return Te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let k=0;k<this.ENCODED_VALS.length;k++)this.byteToCharMap_[k]=this.ENCODED_VALS.charAt(k),this.charToByteMap_[this.byteToCharMap_[k]]=k,this.byteToCharMapWebSafe_[k]=this.ENCODED_VALS_WEBSAFE.charAt(k),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[k]]=k,k>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(k)]=k,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(k)]=k)}}},ce=function(k){return function(k){const q=se(k);return ve.encodeByteArray(q,!0)}(k).replace(/\./g,"")},de=function(k){try{return ve.decodeString(k,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function j(k,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===k&&(k={});break;case Array:k=[];break;default:return q}for(const z in q)!q.hasOwnProperty(z)||!te(z)||(k[z]=j(k[z],q[z]));return k}function te(k){return"__proto__"!==k}class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,z)=>{this.resolve=q,this.reject=z})}wrapCallback(q){return(z,Te)=>{z?this.reject(z):this.resolve(Te),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(z):q(z,Te))}}}function we(k,q){if(k.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Te=q||"demo-project",V=k.iat||0,J=k.sub||k.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const U=Object.assign({iss:`https://securetoken.google.com/${Te}`,aud:Te,iat:V,exp:V+3600,auth_time:V,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},k);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(U)),""].join(".")}function ke(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function he(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(k){return!1}}function Ie(){return"object"==typeof self&&self.self===self}function et(){const k="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof k&&void 0!==k.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Se(){return ke().indexOf("Electron/")>=0}function be(){const k=ke();return k.indexOf("MSIE ")>=0||k.indexOf("Trident/")>=0}function De(){return ke().indexOf("MSAppHost/")>=0}function Fe(){return!he()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B(){return"object"==typeof indexedDB}function Ce(){return new Promise((k,q)=>{try{let z=!0;const Te="validate-browser-context-for-indexeddb-analytics-module",V=self.indexedDB.open(Te);V.onsuccess=()=>{V.result.close(),z||self.indexedDB.deleteDatabase(Te),k(!0)},V.onupgradeneeded=()=>{z=!1},V.onerror=()=>{var J;q((null===(J=V.error)||void 0===J?void 0:J.message)||"")}}catch(z){q(z)}})}function K(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class pe extends Error{constructor(q,z,Te){super(z),this.code=q,this.customData=Te,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ae.prototype.create)}}class ae{constructor(q,z,Te){this.service=q,this.serviceName=z,this.errors=Te}create(q,...z){const Te=z[0]||{},V=`${this.service}/${q}`,J=this.errors[q],U=J?function Le(k,q){return k.replace(dt,(z,Te)=>{const V=q[Te];return null!=V?String(V):`<${Te}?>`})}(J,Te):"Error";return new pe(V,`${this.serviceName}: ${U} (${V}).`,Te)}}const dt=/\{\$([^}]+)}/g;function jn(k,q){return Object.prototype.hasOwnProperty.call(k,q)}function Tt(k){for(const q in k)if(Object.prototype.hasOwnProperty.call(k,q))return!1;return!0}function vi(k,q){if(k===q)return!0;const z=Object.keys(k),Te=Object.keys(q);for(const V of z){if(!Te.includes(V))return!1;const J=k[V],U=q[V];if(Ln(J)&&Ln(U)){if(!vi(J,U))return!1}else if(J!==U)return!1}for(const V of Te)if(!z.includes(V))return!1;return!0}function Ln(k){return null!==k&&"object"==typeof k}function ln(k){const q=[];for(const[z,Te]of Object.entries(k))Array.isArray(Te)?Te.forEach(V=>{q.push(encodeURIComponent(z)+"="+encodeURIComponent(V))}):q.push(encodeURIComponent(z)+"="+encodeURIComponent(Te));return q.length?"&"+q.join("&"):""}function Xn(k){const q={};return k.replace(/^\?/,"").split("&").forEach(Te=>{if(Te){const[V,J]=Te.split("=");q[decodeURIComponent(V)]=decodeURIComponent(J)}}),q}function vr(k){const q=k.indexOf("?");if(!q)return"";const z=k.indexOf("#",q);return k.substring(q,z>0?z:void 0)}function Hn(k,q){const z=new ft(k,q);return z.subscribe.bind(z)}class ft{constructor(q,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{q(this)}).catch(Te=>{this.error(Te)})}next(q){this.forEachObserver(z=>{z.next(q)})}error(q){this.forEachObserver(z=>{z.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,z,Te){let V;if(void 0===q&&void 0===z&&void 0===Te)throw new Error("Missing Observer.");V=function Jt(k,q){if("object"!=typeof k||null===k)return!1;for(const z of q)if(z in k&&"function"==typeof k[z])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:z,complete:Te},void 0===V.next&&(V.next=vn),void 0===V.error&&(V.error=vn),void 0===V.complete&&(V.complete=vn);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?V.error(this.finalError):V.complete()}catch(U){}}),this.observers.push(V),J}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,q)}sendOne(q,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{z(this.observers[q])}catch(Te){"undefined"!=typeof console&&console.error&&console.error(Te)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vn(){}function Ot(k,q=1e3,z=2){const Te=q*Math.pow(z,k),V=Math.round(.5*Te*(Math.random()-.5)*2);return Math.min(144e5,Te+V)}function Tn(k){return k&&k._delegate?k._delegate:k}},2585:(nt,Ee,x)=>{var h=x(5e3);let Y=null;function P(){return Y}const oe=new h.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function de(){return(0,h.LFG)(j)}()},providedIn:"platform"}),n})();const $=new h.OlP("Location Initialized");let j=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){te()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){te()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ue(){return new j((0,h.LFG)(oe))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function we(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ie(n){const e=(0,h.LFG)(oe).location;return new Ye((0,h.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const et=new h.OlP("appBaseHref");let Ye=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return we(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Be(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Be(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce),h.LFG(et,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=we(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Be(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Be(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce),h.LFG(et,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),be=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ke(Fe(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function We(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Fe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Be,n.joinWithSlash=we,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(h.LFG(he),h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function De(){return new be((0,h.LFG)(he),(0,h.LFG)(ce))}()},providedIn:"root"}),n})();function Fe(n){return n.replace(/\/index.html$/,"")}function os(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}class us{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new us(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),ls(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{ls(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ls(n,e){n.context.$implicit=e.item}let qn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zs("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zs("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class dn{constructor(){this.$implicit=null,this.ngIf=null}}function zs(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let sa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Ai="browser";function Gi(n){return"server"===n}let mu=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Ks((0,h.LFG)(oe),window)}),n})();class Ks{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function wo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=hs(this.window.history)||hs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function hs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class gn{}class Io extends class Mi extends class ve{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){Y||(Y=n)}(new Io)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Hl(){return Kt=Kt||document.querySelector("base"),Kt?Kt.getAttribute("href"):null}();return null==t?null:function Cs(n){yu=yu||document.createElement("a"),yu.setAttribute("href",n);const e=yu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Kt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return os(document.cookie,e)}}let yu,Kt=null;const Vr=new h.OlP("TRANSITION_ID"),bo=[{provide:h.ip1,useFactory:function vu(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=P(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Vr,oe,h.zs3],multi:!0}];class N{static init(){(0,h.VLi)(new N)}addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let R=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const W=new h.OlP("EventManagerPlugins");let ue=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(W),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class je{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=P().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let ze=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),_t=(()=>{class n extends ze{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(_n),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(_n))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function _n(n){P().remove(n)}const it={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},an=/%COMP%/g;function fs(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?fs(n,o,t):(o=o.replace(an,n),t.push(o))}return t}function Me(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let As=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Vn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Ri(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case h.ifc.ShadowDom:return new kd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=fs(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(_t),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Vn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(it[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=it[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=it[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Me(r)):this.eventManager.addEventListener(e,t,Me(r))}}class Ri extends Vn{constructor(e,t,r,o){super(e),this.component=r;const u=fs(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Do(n){return"_ngcontent-%COMP%".replace(an,n)}(o+"-"+r.id),this.hostAttr=function Co(n){return"_nghost-%COMP%".replace(an,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class kd extends Vn{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=fs(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Fd=(()=>{class n extends je{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ld=["alt","control","meta","shift"],r0={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},To={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Yr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let qi=(()=>{class n extends je{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(Ld.forEach(w=>{const b=r.indexOf(w);b>-1&&(r.splice(b,1),d+=w+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function $f(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&To.hasOwnProperty(e)&&(e=To[e]))}return r0[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Ld.forEach(u=>{u!=o&&Yr[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ud=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:Ai},{provide:h.g9A,useValue:function Ys(){Io.makeCurrent(),N.init()},multi:!0},{provide:oe,useFactory:function Vd(){return(0,h.RDi)(document),document},deps:[]}]),Lm=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Ss(){return new h.qLn},deps:[]},{provide:W,useClass:Fd,multi:!0,deps:[oe,h.R0b,h.Lbi]},{provide:W,useClass:qi,multi:!0,deps:[oe]},{provide:As,useClass:As,deps:[ue,_t,h.AFp]},{provide:h.FYo,useExisting:As},{provide:ze,useExisting:_t},{provide:_t,useClass:_t,deps:[oe]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:ue,useClass:ue,deps:[W,h.R0b]},{provide:gn,useClass:R,deps:[]}];let _u=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Vr,useExisting:h.AFp},bo]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:Lm,imports:[sa,h.hGG]}),n})(),ql=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Vm(){return new ql((0,h.LFG)(oe))}(),r},providedIn:"root"}),n})();"undefined"!=typeof window&&window;var Rn=x(8996),wu=x(7669);function Et(...n){const e=(0,wu.yG)(n);return(0,Rn.D)(n,e)}var Qr=x(7579);class Wi extends Qr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Wn=x(8306);const{isArray:Wl}=Array,{getPrototypeOf:Qf,prototype:ha,keys:fa}=Object;function Zn(n){if(1===n.length){const e=n[0];if(Wl(e))return{args:e,keys:null};if(function pa(n){return n&&"object"==typeof n&&Qf(n)===ha}(e)){const t=fa(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var xs=x(4671),Dt=x(4004);const{isArray:Jf}=Array;function jd(n){return(0,Dt.U)(e=>function Xf(n,e){return Jf(e)?n(...e):n(e)}(n,e))}function Hd(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Ur=x(5403),Js=x(9672);function Xs(n,e,t){n?(0,Js.f)(t,n,e):e()}var ga=x(576);function ma(n,e){const t=(0,ga.m)(n)?n:()=>n,r=o=>o.error(t());return new Wn.y(e?o=>e.schedule(r,0,o):r)}const xo=(0,x(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Iu=x(8189);function Yl(...n){return function Kl(){return(0,Iu.J)(1)}()((0,Rn.D)(n,(0,wu.yG)(n)))}var bu=x(8421);function Du(n){return new Wn.y(e=>{(0,bu.Xf)(n()).subscribe(e)})}var ps=x(515),Ro=x(727),Jr=x(4482);function Gd(){return(0,Jr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Ur.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ya extends Wn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Jr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ro.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Ur.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ro.w0.EMPTY)}return e}refCount(){return Gd()(this)}}function Nn(n,e){return(0,Jr.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Ur.x)(r,w=>{null==o||o.unsubscribe();let b=0;const A=u++;(0,bu.Xf)(n(w,A)).subscribe(o=(0,Ur.x)(r,M=>r.next(e?e(w,M,A,b++):M),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var Cu=x(5698);function eo(...n){const e=(0,wu.yG)(n);return(0,Jr.e)((t,r)=>{(e?Yl(n,t,e):Yl(n,t)).subscribe(r)})}function No(n,e,t,r,o){return(u,d)=>{let m=t,w=e,b=0;u.subscribe((0,Ur.x)(d,A=>{const M=b++;w=m?n(w,A,M):(m=!0,A),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function gs(n,e){return(0,Jr.e)(No(n,e,arguments.length>=2,!0))}function Tr(n,e){return(0,Jr.e)((t,r)=>{let o=0;t.subscribe((0,Ur.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function Ni(n){return(0,Jr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Ur.x)(t,void 0,void 0,d=>{u=(0,bu.Xf)(n(d,Ni(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var tr=x(5577);function Zi(n,e){return(0,ga.m)(e)?(0,tr.z)(n,e,1):(0,tr.z)(n,1)}function ep(n){return n<=0?()=>ps.E:(0,Jr.e)((e,t)=>{let r=[];e.subscribe((0,Ur.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Ql(n=On){return(0,Jr.e)((e,t)=>{let r=!1;e.subscribe((0,Ur.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function On(){return new xo}function tp(n){return(0,Jr.e)((e,t)=>{let r=!1;e.subscribe((0,Ur.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function va(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Tr((o,u)=>n(o,u,r)):xs.y,(0,Cu.q)(1),t?tp(e):Ql(()=>new xo))}var Oi=x(8505);class to{constructor(e,t){this.id=e,this.url=t}}class np extends to{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Rs extends to{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qd extends to{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nr extends to{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Tu extends to{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Au extends to{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rp extends to{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $m extends to{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ui extends to{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class li{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Su{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jl{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oo{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _a{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class no{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Gt="primary";class d0{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Po(n){return new d0(n)}const Br="ngNavigationCancelingError";function Ea(n){const e=Error("NavigationCancelingError: "+n);return e[Br]=!0,e}function h0(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ms(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!tc(n[o],e[o]))return!1;return!0}function tc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function ip(n){return Array.prototype.concat.apply([],n)}function nc(n){return n.length>0?n[n.length-1]:null}function dr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function jr(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Rn.D)(Promise.resolve(n)):Et(n)}const f0={exact:function op(n,e,t){if(!ys(n.segments,e.segments)||!sc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!op(n.children[r],e.children[r],t))return!1;return!0},subset:Wd},ro={exact:function ba(n,e){return ms(n,e)},subset:function zd(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tc(n[t],e[t]))},ignored:()=>!0};function Ia(n,e,t){return f0[t.paths](n.root,e.root,t.matrixParams)&&ro[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Wd(n,e,t){return ic(n,e,e.segments,t)}function ic(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ys(o,t)||e.hasChildren()||!sc(o,t,r))}if(n.segments.length===t.length){if(!ys(n.segments,t)||!sc(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Wd(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ys(n.segments,o)&&sc(n.segments,o,r)&&n.children[Gt])&&ic(n.children[Gt],e,u,r)}}function sc(n,e,t){return e.every((r,o)=>ro[t](n[o].parameters,r.parameters))}class Ki{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Po(this.queryParams)),this._queryParamMap}toString(){return qm.serialize(this)}}class Ht{constructor(e,t){this.segments=e,this.children=t,this.parent=null,dr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Da(this)}}class Mu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Po(this.parameters)),this._parameterMap}toString(){return Ru(this)}}function ys(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class oc{}class io{parse(e){const t=new ap(e);return new Ki(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${so(e.root,!0)}`,r=function Zd(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Ns(t)}=${Ns(o)}`).join("&"):`${Ns(t)}=${Ns(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ac(n){return encodeURI(n)}(e.fragment)}`:""}`}}const qm=new io;function Da(n){return n.segments.map(e=>Ru(e)).join("/")}function so(n,e){if(!n.hasChildren())return Da(n);if(e){const t=n.children[Gt]?so(n.children[Gt],!1):"",r=[];return dr(n.children,(o,u)=>{u!==Gt&&r.push(`${u}:${so(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Gm(n,e){let t=[];return dr(n.children,(r,o)=>{o===Gt&&(t=t.concat(e(r,o)))}),dr(n.children,(r,o)=>{o!==Gt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Gt?[so(n.children[Gt],!1)]:[`${o}:${so(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${Da(n)}/${t[0]}`:`${Da(n)}/(${t.join("//")})`}}function ko(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ns(n){return ko(n).replace(/%3B/gi,";")}function Fo(n){return ko(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xu(n){return decodeURIComponent(n)}function uc(n){return xu(n.replace(/\+/g,"%20"))}function Ru(n){return`${Fo(n.path)}${function lc(n){return Object.keys(n).map(e=>`;${Fo(e)}=${Fo(n[e])}`).join("")}(n.parameters)}`}const Kd=/^[^\/()?;=#]+/;function cc(n){const e=n.match(Kd);return e?e[0]:""}const Ca=/^[^=?&#]+/,Yd=/^[^&#]+/;class ap{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Gt]=new Ht(e,t)),r}parseSegment(){const e=cc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Mu(xu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=cc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=cc(this.remaining);o&&(r=o,this.capture(r))}e[xu(t)]=xu(r)}parseQueryParam(e){const t=function Nu(n){const e=n.match(Ca);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function p0(n){const e=n.match(Yd);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=uc(t),u=uc(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=cc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Gt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Gt]:new Ht([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Qd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=up(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=up(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ta(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Ta(e,this._root).map(t=>t.value)}}function up(n,e){if(n===e.value)return e;for(const t of e.children){const r=up(n,t);if(r)return r}return null}function Ta(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ta(n,t);if(r.length)return r.unshift(e),r}return[]}class Os{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Aa(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ou extends Qd{constructor(e,t){super(e),this.snapshot=t,fc(this,e)}toString(){return this.snapshot.toString()}}function dc(n,e){const t=function Sa(n,e){const d=new Ps([],{},{},"",{},Gt,e,null,n.root,-1,{});return new hc("",new Os(d,[]))}(n,e),r=new Wi([new Mu("",{})]),o=new Wi({}),u=new Wi({}),d=new Wi({}),m=new Wi(""),w=new Ma(r,o,d,m,u,Gt,e,t.root);return w.snapshot=t.root,new Ou(new Os(w,[]),t)}class Ma{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Dt.U)(e=>Po(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Dt.U)(e=>Po(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function lp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function g0(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ps{constructor(e,t,r,o,u,d,m,w,b,A,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=A,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Po(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Po(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hc extends Qd{constructor(e,t){super(t),this.url=e,fc(this,t)}toString(){return Jd(this._root)}}function fc(n,e){e.value._routerState=n,e.children.forEach(t=>fc(n,t))}function Jd(n){const e=n.children.length>0?` { ${n.children.map(Jd).join(", ")} } `:"";return`${n.value}${e}`}function pc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ms(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ms(e.params,t.params)||n.params.next(t.params),function ec(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ms(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ms(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function gc(n,e){const t=ms(n.params,e.params)&&function Ar(n,e){return ys(n,e)&&n.every((t,r)=>ms(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||gc(n.parent,e.parent))}function Pu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function zm(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Pu(n,r,o);return Pu(n,r)})}(n,e,t);return new Os(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Pu(n,m)),d}}const r=function Wm(n){return new Ma(new Wi(n.url),new Wi(n.params),new Wi(n.queryParams),new Wi(n.fragment),new Wi(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Pu(n,u));return new Os(r,o)}}function Ii(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ks(n){return"object"==typeof n&&null!=n&&n.outlets}function ku(n,e,t,r,o){let u={};if(r&&dr(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(b=>`${b}`):`${m}`}),n===e)return new Ki(t,u,o);const d=Km(n,e,t);return new Ki(d,u,o)}function Km(n,e,t){const r={};return dr(n.children,(o,u)=>{r[u]=o===e?t:Km(o,e,t)}),new Ht(n.segments,r)}class dp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ii(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(ks);if(o&&o!==nc(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class mc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function fp(n,e,t){if(n||(n=new Ht([],{})),0===n.segments.length&&n.hasChildren())return yc(n,e,t);const r=function Ym(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(ks(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!eh(w,b,d))return u;r+=2}else{if(!eh(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ht(n.segments.slice(0,r.pathIndex),{});return u.children[Gt]=new Ht(n.segments.slice(r.pathIndex),n.children),yc(u,0,o)}return r.match&&0===o.length?new Ht(n.segments,{}):r.match&&!n.hasChildren()?Qm(n,e,t):r.match?yc(n,0,o):Qm(n,e,t)}function yc(n,e,t){if(0===t.length)return new Ht(n.segments,{});{const r=function hp(n){return ks(n[0])?n[0].outlets:{[Gt]:n}}(t),o={};return dr(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=fp(n.children[d],e,u))}),dr(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Ht(n.segments,o)}}function Qm(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(ks(u)){const w=Lo(u.outlets);return new Ht(r,w)}if(0===o&&Ii(t[0])){r.push(new Mu(n.segments[e].path,Fu(t[0]))),o++;continue}const d=ks(u)?u.outlets[Gt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&Ii(m)?(r.push(new Mu(d,Fu(m))),o+=2):(r.push(new Mu(d,{})),o++)}return new Ht(r,{})}function Lo(n){const e={};return dr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Qm(new Ht([],{}),0,t))}),e}function Fu(n){const e={};return dr(n,(t,r)=>e[r]=`${t}`),e}function eh(n,e,t){return n==t.path&&ms(e,t.parameters)}class Lu{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),pc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Aa(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),dr(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Aa(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Aa(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Aa(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new no(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Oo(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(pc(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),pc(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function vc(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class _c{constructor(e,t){this.routes=e,this.module=t}}function Fs(n){return"function"==typeof n}function xa(n){return n instanceof Ki}const Ec=Symbol("INITIAL_VALUE");function wc(){return Nn(n=>function Zl(...n){const e=(0,wu.yG)(n),t=(0,wu.jO)(n),{args:r,keys:o}=Zn(n);if(0===r.length)return(0,Rn.D)([],e);const u=new Wn.y(function Mo(n,e,t=xs.y){return r=>{Xs(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)Xs(e,()=>{const b=(0,Rn.D)(n[w],e);let A=!1;b.subscribe((0,Ur.x)(r,M=>{u[w]=M,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>Hd(o,d):xs.y));return t?u.pipe(jd(t)):u}(n.map(e=>e.pipe((0,Cu.q)(1),eo(Ec)))).pipe(gs((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==Ec?o:(u===Ec&&(r=!0),r||!1!==u&&d!==t.length-1&&!xa(u)?o:u),e)},Ec),Tr(e=>e!==Ec),(0,Dt.U)(e=>xa(e)?e:!0===e),(0,Cu.q)(1)))}class gp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ra,this.attachRef=null}}class Ra{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new gp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Uu=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=u||Gt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new Jm(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ra),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Jm{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ma?this.route:e===Ra?this.childContexts:this.parent.get(e,t)}}let rh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[Uu],encapsulation:2}),n})();function Bu(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Na(r,Xm(e,r))}}function Na(n,e){n.children&&Bu(n.children,e)}function Xm(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ju(n){const e=n.children&&n.children.map(ju),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Gt&&(t.component=rh),t}function Xr(n){return n.outlet||Gt}function Un(n,e){const t=n.filter(r=>Xr(r)===e);return t.push(...n.filter(r=>Xr(r)!==e)),t}const mp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ic(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},mp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||h0)(t,n,e);if(!u)return Object.assign({},mp);const d={};dr(u.posParams,(w,b)=>{d[b]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Vo(n,e,t,r,o="corrected"){if(t.length>0&&function ty(n,e,t){return t.some(r=>Uo(n,e,r)&&Xr(r)!==Gt)}(n,t,r)){const d=new Ht(e,function ey(n,e,t,r){const o={};o[Gt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Xr(u)!==Gt){const d=new Ht([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Xr(u)]=d}return o}(n,e,r,new Ht(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function ny(n,e,t){return t.some(r=>Uo(n,e,r))}(n,t,r)){const d=new Ht(n.segments,function yp(n,e,t,r,o,u){const d={};for(const m of r)if(Uo(n,t,m)&&!o[Xr(m)]){const w=new Ht([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Xr(m)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Ht(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Uo(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function vp(n,e,t,r){return!!(Xr(n)===r||r!==Gt&&Uo(e,t,n))&&("**"===n.path||Ic(e,n,t).matched)}function _p(n,e,t){return 0===e.length&&!n.children[t]}class ih{constructor(e){this.segmentGroup=e||null}}class Oa{constructor(e){this.urlTree=e}}function rr(n){return ma(new ih(n))}function bc(n){return ma(new Oa(n))}class Pa{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=Vo(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ht(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Gt).pipe((0,Dt.U)(u=>this.createUrlTree(Hu(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ni(u=>{if(u instanceof Oa)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ih?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Gt).pipe((0,Dt.U)(o=>this.createUrlTree(Hu(o),e.queryParams,e.fragment))).pipe(Ni(o=>{throw o instanceof ih?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Ht([],{[Gt]:e}):e;return new Ki(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Dt.U)(u=>new Ht([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Rn.D)(o).pipe(Zi(u=>{const d=r.children[u],m=Un(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,Dt.U)(w=>({segment:w,outlet:u})))}),gs((u,d)=>(u[d.outlet]=d.segment,u),{}),function c0(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Tr((o,u)=>n(o,u,r)):xs.y,ep(1),t?tp(e):Ql(()=>new xo))}())}expandSegment(e,t,r,o,u,d){return(0,Rn.D)(r).pipe(Zi(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(Ni(b=>{if(b instanceof ih)return Et(null);throw b}))),va(m=>!!m),Ni((m,w)=>{if(m instanceof xo||"EmptyError"===m.name)return _p(t,o,u)?Et(new Ht([],{})):rr(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return vp(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):rr(t):rr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?bc(u):this.lineralizeSegments(r,u).pipe((0,tr.z)(d=>{const m=new Ht(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:A}=Ic(t,o,u);if(!m)return rr(t);const M=this.applyRedirectCommands(w,o.redirectTo,A);return o.redirectTo.startsWith("/")?bc(M):this.lineralizeSegments(o,M).pipe((0,tr.z)(L=>this.expandSegment(e,t,r,L.concat(b),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Et(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Dt.U)(M=>(r._loadedConfig=M,new Ht(o,{})))):Et(new Ht(o,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=Ic(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,tr.z)(A=>{const M=A.module,L=A.routes,{segmentGroup:G,slicedSegments:ee}=Vo(t,m,w,L),Re=new Ht(G.segments,G.children);if(0===ee.length&&Re.hasChildren())return this.expandChildren(M,L,Re).pipe((0,Dt.U)(Yt=>new Ht(m,Yt)));if(0===L.length&&0===ee.length)return Et(new Ht(m,{}));const Ze=Xr(r)===u;return this.expandSegment(M,Re,L,ee,Ze?Gt:u,!0).pipe((0,Dt.U)(Mt=>new Ht(m.concat(Mt.segments),Mt.children)))})):rr(t)}getChildConfig(e,t,r){return t.children?Et(new _c(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Et(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,tr.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Dt.U)(u=>(t._loadedConfig=u,u))):function Dc(n){return ma(Ea(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Et(new _c([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?Et(o.map(d=>{const m=e.get(d);let w;if(function v0(n){return n&&Fs(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!Fs(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return jr(w)})).pipe(wc(),(0,Oi.b)(d=>{if(!xa(d))return;const m=Ea(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,Dt.U)(d=>!0===d)):Et(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Et(r);if(o.numberOfChildren>1||!o.children[Gt])return ma(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Gt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Ki(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return dr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return dr(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new Ht(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Hu(n){const e={};for(const r of Object.keys(n.children)){const u=Hu(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function oh(n){if(1===n.numberOfChildren&&n.children[Gt]){const e=n.children[Gt];return new Ht(n.segments.concat(e.segments),e.children)}return n}(new Ht(n.segments,e))}class ei{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class oo{constructor(e,t){this.component=e,this.route=t}}function ah(n,e,t){const r=n._root;return $u(r,e?e._root:null,t,[r.value])}function Bo(n,e,t){const r=function uh(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function $u(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Aa(e);return n.children.forEach(d=>{(function Cc(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function sy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ys(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ys(n.url,e.url)||!ms(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gc(n,e)||!ms(n.queryParams,e.queryParams);default:return!gc(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new ei(r)):(u.data=d.data,u._resolvedData=d._resolvedData),$u(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new oo(m.outlet.component,d))}else d&&ki(e,m,o),o.canActivateChecks.push(new ei(r)),$u(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),dr(u,(d,m)=>ki(d,t.getContext(m),o)),o}function ki(n,e,t){const r=Aa(n),o=n.value;dr(r,(u,d)=>{ki(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new oo(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class uy{}function Yi(n){return new Wn.y(e=>e.error(n))}class wp{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Vo(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Gt);if(null===t)return null;const r=new Ps([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Os(r,t),u=new hc(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=lp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=Un(e,u),w=this.processSegmentGroup(m,d,u);if(null===w)return null;r.push(...w)}const o=bp(r);return function Ip(n){n.sort((e,t)=>e.value.outlet===Gt?-1:t.value.outlet===Gt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return _p(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!vp(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const G=r.length>0?nc(r).parameters:{};u=new Ps(r,G,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Xr(e),e.component,e,Dp(t),jo(t)+r.length,f(e))}else{const G=Ic(t,e,r);if(!G.matched)return null;d=G.consumedSegments,m=G.remainingSegments,u=new Ps(d,G.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Xr(e),e.component,e,Dp(t),jo(t)+d.length,f(e))}const w=function ly(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:A}=Vo(t,d,m,w.filter(G=>void 0===G.redirectTo),this.relativeLinkResolution);if(0===A.length&&b.hasChildren()){const G=this.processChildren(w,b);return null===G?null:[new Os(u,G)]}if(0===w.length&&0===A.length)return[new Os(u,[])];const M=Xr(e)===o,L=this.processSegment(w,b,A,M?Gt:o);return null===L?null:[new Os(u,L)]}}function dh(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function bp(n){const e=[],t=new Set;for(const r of n){if(!dh(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=bp(r.children);e.push(new Os(r.value,o))}return e.filter(r=>!t.has(r))}function Dp(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function jo(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function f(n){return n.resolve||{}}function Z(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function qe(n){return Nn(e=>{const t=n(e);return t?(0,Rn.D)(t).pipe((0,Dt.U)(()=>e)):Et(e)})}class gt extends class mt{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Pn=new h.OlP("ROUTES");class di{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Dt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new _c(ip(d.injector.get(Pn,void 0,h.XFs.Self|h.XFs.Optional)).map(ju),d)}),Ni(u=>{throw t._loader$=void 0,u}));return t._loader$=new ya(o,()=>new Qr.x).pipe(Gd()),t._loader$}loadModuleFactory(e){return jr(e()).pipe((0,tr.z)(t=>t instanceof h.YKP?Et(t):(0,Rn.D)(this.compiler.compileModuleAsync(t))))}}class hh{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Cp(n){throw n}function Ho(n,e,t){return e.parse("/")}function qu(n,e){return Et(null)}const Sc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Tp={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Sr=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Qr.x,this.errorHandler=Cp,this.malformedUriErrorHandler=Ho,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qu,afterPreactivation:qu},this.urlHandlingStrategy=new hh,this.routeReuseStrategy=new gt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(h.h0i),this.console=d.get(h.c2e);const M=d.get(h.R0b);this.isNgZoneEnabled=M instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function rc(){return new Ki(new Ht([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new di(d,m,L=>this.triggerEvent(new li(L)),L=>this.triggerEvent(new Su(L))),this.routerState=dc(this.currentUrlTree,this.rootComponentType),this.transitions=new Wi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Tr(o=>0!==o.id),(0,Dt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Nn(o=>{let u=!1,d=!1;return Et(o).pipe((0,Oi.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Nn(m=>{const w=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return ph(m.source)&&(this.browserUrlTree=m.extractedUrl),Et(m).pipe(Nn(M=>{const L=this.transitions.getValue();return r.next(new np(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),L!==this.transitions.getValue()?ps.E:Promise.resolve(M)}),function ry(n,e,t,r){return Nn(o=>function hr(n,e,t,r,o){return new Pa(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Dt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Oi.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function g(n,e,t,r,o){return(0,tr.z)(u=>function Gu(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new wp(n,e,t,r,o,u).recognize();return null===d?Yi(new uy):Et(d)}catch(d){return Yi(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Dt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Oi.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(G,M)}this.browserUrlTree=M.urlAfterRedirects}const L=new Tu(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(L)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:G,source:ee,restoredState:Re,extras:Ze}=m,vt=new np(L,this.serializeUrl(G),ee,Re);r.next(vt);const Mt=dc(G,this.rootComponentType).snapshot;return Et(Object.assign(Object.assign({},m),{targetSnapshot:Mt,urlAfterRedirects:G,extras:Object.assign(Object.assign({},Ze),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),ps.E}),qe(m=>{const{targetSnapshot:w,id:b,extractedUrl:A,rawUrl:M,extras:{skipLocationChange:L,replaceUrl:G}}=m;return this.hooks.beforePreactivation(w,{navigationId:b,appliedUrlTree:A,rawUrlTree:M,skipLocationChange:!!L,replaceUrl:!!G})}),(0,Oi.b)(m=>{const w=new Au(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,Dt.U)(m=>Object.assign(Object.assign({},m),{guards:ah(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function Tc(n,e){return(0,tr.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?Et(Object.assign(Object.assign({},t),{guardsResult:!0})):function oy(n,e,t,r){return(0,Rn.D)(n).pipe((0,tr.z)(o=>function ch(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Et(u.map(m=>{const w=Bo(m,e,o);let b;if(function nh(n){return n&&Fs(n.canDeactivate)}(w))b=jr(w.canDeactivate(n,e,t,r));else{if(!Fs(w))throw new Error("Invalid CanDeactivate guard");b=jr(w(n,e,t,r))}return b.pipe(va())})).pipe(wc()):Et(!0)}(o.component,o.route,t,e,r)),va(o=>!0!==o,!0))}(d,r,o,n).pipe((0,tr.z)(m=>m&&function pp(n){return"boolean"==typeof n}(m)?function ay(n,e,t,r){return(0,Rn.D)(e).pipe(Zi(o=>Yl(function Ep(n,e){return null!==n&&e&&e(new Jl(n)),Et(!0)}(o.route.parent,r),function Ac(n,e){return null!==n&&e&&e(new _a(n)),Et(!0)}(o.route,r),function lh(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function iy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Du(()=>Et(d.guards.map(w=>{const b=Bo(w,d.node,t);let A;if(function th(n){return n&&Fs(n.canActivateChild)}(b))A=jr(b.canActivateChild(r,n));else{if(!Fs(b))throw new Error("Invalid CanActivateChild guard");A=jr(b(r,n))}return A.pipe(va())})).pipe(wc())));return Et(u).pipe(wc())}(n,o.path,t),function ci(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Et(!0);const o=r.map(u=>Du(()=>{const d=Bo(u,e,t);let m;if(function Vu(n){return n&&Fs(n.canActivate)}(d))m=jr(d.canActivate(e,n));else{if(!Fs(d))throw new Error("Invalid CanActivate guard");m=jr(d(e,n))}return m.pipe(va())}));return Et(o).pipe(wc())}(n,o.route,t))),va(o=>!0!==o,!0))}(r,u,n,e):Et(m)),(0,Dt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Oi.b)(m=>{if(xa(m.guardsResult)){const b=Ea(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw b.url=m.guardsResult,b}const w=new rp(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),Tr(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),qe(m=>{if(m.guards.canActivateChecks.length)return Et(m).pipe((0,Oi.b)(w=>{const b=new $m(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}),Nn(w=>{let b=!1;return Et(w).pipe(function _(n,e){return(0,tr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Et(t);let u=0;return(0,Rn.D)(o).pipe(Zi(d=>function D(n,e,t,r){return function S(n,e,t,r){const o=Z(n);if(0===o.length)return Et({});const u={};return(0,Rn.D)(o).pipe((0,tr.z)(d=>function ye(n,e,t,r){const o=Bo(n,e,r);return jr(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,Oi.b)(m=>{u[d]=m}))),ep(1),(0,tr.z)(()=>Z(u).length===o.length?Et(u):ps.E))}(n._resolve,n,e,r).pipe((0,Dt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),lp(n,t).resolve),null)))}(d.route,r,n,e)),(0,Oi.b)(()=>u++),ep(1),(0,tr.z)(d=>u===o.length?Et(t):ps.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Oi.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Oi.b)(w=>{const b=new ui(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}))}),qe(m=>{const{targetSnapshot:w,id:b,extractedUrl:A,rawUrl:M,extras:{skipLocationChange:L,replaceUrl:G}}=m;return this.hooks.afterPreactivation(w,{navigationId:b,appliedUrlTree:A,rawUrlTree:M,skipLocationChange:!!L,replaceUrl:!!G})}),(0,Dt.U)(m=>{const w=function cp(n,e,t){const r=Pu(n,e._root,t?t._root:void 0);return new Ou(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,Oi.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Dt.U)(r=>(new Lu(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Oi.b)({next(){u=!0},complete(){u=!0}}),function Hm(n){return(0,Jr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),Ni(m=>{if(d=!0,function wa(n){return n&&n[Br]}(m)){const w=xa(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const b=new qd(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(b),w?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),M={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ph(o.source)};this.scheduleNavigation(A,"imperative",null,M,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new nr(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(b){o.reject(b)}}return ps.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Bu(t),this.config=t.map(ju),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,b=o||this.routerState.root,A=w?this.currentUrlTree.fragment:d;let M=null;switch(m){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function Zm(n,e,t,r,o){if(0===t.length)return ku(e.root,e.root,e.root,r,o);const u=function m0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new dp(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return dr(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new dp(t,e,r)}(t);if(u.toRoot())return ku(e.root,e.root,new Ht([],{}),r,o);const d=function y0(n,e,t){if(n.isAbsolute)return new mc(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new mc(u,u===e.root,0)}const r=Ii(n.commands[0])?0:1;return function Xd(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new mc(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?yc(d.segmentGroup,d.index,u.commands):fp(d.segmentGroup,d.index,u.commands);return ku(e.root,d.segmentGroup,m,r,o)}(b,this.currentUrlTree,t,M,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=xa(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function fh(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Sc):!1===r?Object.assign({},Tp):r,xa(t))return Ia(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Ia(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Rs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,w;if(this.disposed)return Promise.resolve(!1);let b,A,M;d?(b=d.resolve,A=d.reject,M=d.promise):M=new Promise((ee,Re)=>{b=ee,A=Re});const L=++this.navigationId;let G;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),G=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):G=0,this.setTransition({id:L,targetPageId:G,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:A,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(ee=>Promise.reject(ee))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new qd(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function ph(n){return"imperative"!==n}let Fa=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new Qr.x,this.subscription=t.events.subscribe(u=>{u instanceof Rs&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){if(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:La(this.skipLocationChange),replaceUrl:La(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:La(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Sr),h.Y36(Ma),h.Y36(he))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})();function La(n){return""===n||!!n}class Ap{}class Sp{preload(e,t){return Et(null)}}let I0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new di(o,r,w=>t.triggerEvent(new li(w)),w=>t.triggerEvent(new Su(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Tr(t=>t instanceof Rs),Zi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,Rn.D)(o).pipe((0,Iu.J)(),(0,Dt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Et(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,tr.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Sr),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(Ap))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),cy=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof np?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Rs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Xl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Xl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Va=new h.OlP("ROUTER_CONFIGURATION"),Ua=new h.OlP("ROUTER_FORROOT_GUARD"),b0=[be,{provide:oc,useClass:io},{provide:Sr,useFactory:function A0(n,e,t,r,o,u,d={},m,w){const b=new Sr(null,n,e,t,r,o,ip(u));return m&&(b.urlHandlingStrategy=m),w&&(b.routeReuseStrategy=w),function hy(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,b),d.enableTracing&&b.events.subscribe(A=>{var M,L;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(L=console.groupEnd)||void 0===L||L.call(console)}),b},deps:[oc,Ra,be,h.zs3,h.Sil,Pn,Va,[class ka{},new h.FiY],[class rt{},new h.FiY]]},Ra,{provide:Ma,useFactory:function S0(n){return n.routerState.root},deps:[Sr]},I0,Sp,class w0{preload(e,t){return t().pipe(Ni(()=>Et(null)))}},{provide:Va,useValue:{enableTracing:!1}}];function D0(){return new h.PXZ("Router",Sr)}let C0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[b0,dy(t),{provide:Ua,useFactory:T0,deps:[[Sr,new h.FiY,new h.tp0]]},{provide:Va,useValue:r||{}},{provide:he,useFactory:lb,deps:[ce,[new h.tBr(et),new h.FiY],Va]},{provide:cy,useFactory:Mp,deps:[Sr,mu,Va]},{provide:Ap,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Sp},{provide:h.PXZ,multi:!0,useFactory:D0},[Mc,{provide:h.ip1,multi:!0,useFactory:xp,deps:[Mc]},{provide:Rp,useFactory:M0,deps:[Mc]},{provide:h.tb,multi:!0,useExisting:Rp}]]}}static forChild(t){return{ngModule:n,providers:[dy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ua,8),h.LFG(Sr,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Mp(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new cy(n,e,t)}function lb(n,e,t={}){return t.useHash?new Se(n,e):new Ye(n,e)}function T0(n){return"guarded"}function dy(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:Pn,multi:!0,useValue:n}]}let Mc=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Qr.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(Sr),d=this.injector.get(Va);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?Et(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Va),o=this.injector.get(I0),u=this.injector.get(cy),d=this.injector.get(Sr),m=this.injector.get(h.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function xp(n){return n.appInitializer.bind(n)}function M0(n){return n.bootstrapListener.bind(n)}const Rp=new h.OlP("Router Initializer");let N0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Ba=(()=>{class n extends N0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const ao=new h.OlP("NgValueAccessor"),py={provide:ao,useExisting:(0,h.Gpc)(()=>xc),multi:!0},yA=new h.OlP("CompositionEventMode");let xc=(()=>{class n extends N0{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function O0(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(yA,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([py]),h.qOj]}),n})();function ja(n){return null==n||0===n.length}function gy(n){return null!=n&&"number"==typeof n.length}const hi=new h.OlP("NgValidators"),Ha=new h.OlP("NgAsyncValidators"),Ls=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Np{static min(e){return function my(n){return e=>{if(ja(e.value)||ja(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function P0(n){return e=>{if(ja(e.value)||ja(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return k0(e)}static requiredTrue(e){return function F0(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function L0(n){return ja(n.value)||Ls.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function yy(n){return e=>ja(e.value)||!gy(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function V0(n){return e=>gy(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function U0(n){if(!n)return Op;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ja(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return wy(e)}static composeAsync(e){return kp(e)}}function k0(n){return ja(n.value)?{required:!0}:null}function Op(n){return null}function Rt(n){return null!=n}function vy(n){const e=(0,h.QGY)(n)?(0,Rn.D)(n):n;return(0,h.CqO)(e),e}function _y(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ey(n,e){return e.map(t=>t(n))}function vs(n){return n.map(e=>function Pp(n){return!n.validate}(e)?e:t=>e.validate(t))}function wy(n){if(!n)return null;const e=n.filter(Rt);return 0==e.length?null:function(t){return _y(Ey(t,e))}}function Iy(n){return null!=n?wy(vs(n)):null}function kp(n){if(!n)return null;const e=n.filter(Rt);return 0==e.length?null:function(t){return function mh(...n){const e=(0,wu.jO)(n),{args:t,keys:r}=Zn(n),o=new Wn.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,b=d;for(let A=0;A<d;A++){let M=!1;(0,bu.Xf)(t[A]).subscribe((0,Ur.x)(u,L=>{M||(M=!0,b--),m[A]=L},()=>w--,void 0,()=>{(!w||!M)&&(b||u.next(r?Hd(r,m):m),u.complete())}))}});return e?o.pipe(jd(e)):o}(Ey(t,e).map(vy)).pipe((0,Dt.U)(_y))}}function Vs(n){return null!=n?kp(vs(n)):null}function Fp(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function by(n){return n._rawValidators}function Lp(n){return n._rawAsyncValidators}function B0(n){return n?Array.isArray(n)?n:[n]:[]}function yh(n,e){return Array.isArray(n)?n.includes(e):n===e}function db(n,e){const t=B0(e);return B0(n).forEach(o=>{yh(t,o)||t.push(o)}),t}function vh(n,e){return B0(e).filter(t=>!yh(n,t))}class _h{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Iy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Vs(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class uo extends _h{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ti extends _h{get formDirective(){return null}get path(){return null}}class Vp{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let Dy=(()=>{class n extends Vp{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(uo,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),Cy=(()=>{class n extends Vp{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ti,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function Up(n,e){Ry(n,e),e.valueAccessor.writeValue(n.value),function Ny(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Bp(n,e)})}(n,e),function gb(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function H0(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Bp(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function xy(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function My(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),wh(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Us(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ry(n,e){const t=by(n);null!==e.validator?n.setValidators(Fp(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Lp(n);null!==e.asyncValidator?n.setAsyncValidators(Fp(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Us(e._rawValidators,o),Us(e._rawAsyncValidators,o)}function wh(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=by(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Lp(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Us(e._rawValidators,r),Us(e._rawAsyncValidators,r),t}function Bp(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Ih(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const lo="VALID",jp="INVALID",Wu="PENDING",Nc="DISABLED";function Dh(n){return(Ch(n)?n.validators:n)||null}function Fy(n){return Array.isArray(n)?Iy(n):n||null}function Oc(n,e){return(Ch(e)?e.asyncValidators:n)||null}function q0(n){return Array.isArray(n)?Vs(n):n||null}function Ch(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const z0=n=>n instanceof bi,Th=n=>n instanceof Hp,Ly=n=>n instanceof K0;function W0(n){return z0(n)?n.value:n.getRawValue()}function Vy(n,e){const t=Th(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function Z0(n,e){Th(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new h.vHH(1002,"")})}class Uy{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Fy(this._rawValidators),this._composedAsyncValidatorFn=q0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===lo}get invalid(){return this.status===jp}get pending(){return this.status==Wu}get disabled(){return this.status===Nc}get enabled(){return this.status!==Nc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Fy(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=q0(e)}addValidators(e){this.setValidators(db(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(db(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vh(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vh(e,this._rawAsyncValidators))}hasValidator(e){return yh(this._rawValidators,e)}hasAsyncValidator(e){return yh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Wu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Nc,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lo,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lo||this.status===Wu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nc:lo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Wu,this._hasOwnPendingAsyncValidator=!0;const t=vy(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function ky(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Th(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:Ly(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Nc:this.errors?jp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wu)?Wu:this._anyControlsHaveStatus(jp)?jp:lo}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ch(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class bi extends Uy{constructor(e=null,t,r){super(Dh(t),Oc(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ch(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ih(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ih(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Hp extends Uy{constructor(e,t,r){super(Dh(t),Oc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Z0(this,e),Object.keys(e).forEach(r=>{Vy(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=W0(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class K0 extends Uy{constructor(e,t,r){super(Dh(t),Oc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Z0(this,e),e.forEach((r,o)=>{Vy(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>W0(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let jy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const wb={provide:ao,useExisting:(0,h.Gpc)(()=>qp),multi:!0};let qp=(()=>{class n extends Ba{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[h._Bn([wb]),h.qOj]}),n})(),Bs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const zp=new h.OlP("NgModelWithFormControlWarning"),Cb={provide:ti,useExisting:(0,h.Gpc)(()=>Zu)};let Zu=(()=>{class n extends ti{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(wh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Up(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){My(t.control||null,t,!1),Ih(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Rc(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(My(r||null,t),z0(o)&&(Up(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function $o(n,e){Ry(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function $0(n,e){return wh(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ry(this.form,this),this._oldForm&&wh(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(hi,10),h.Y36(Ha,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Cb]),h.qOj,h.TTD]}),n})();const Gy={provide:uo,useExisting:(0,h.Gpc)(()=>Pc)};let Pc=(()=>{class n extends uo{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function $a(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===xc?t=u:function yb(n){return Object.getPrototypeOf(n.constructor)===Ba}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Py(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Sy(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(ti,13),h.Y36(hi,10),h.Y36(Ha,10),h.Y36(ao,10),h.Y36(zp,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([Gy]),h.qOj,h.TTD]}),n})(),Ku=(()=>{class n{constructor(){this._validator=Op}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Op,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const Mh={provide:hi,useExisting:(0,h.Gpc)(()=>Yu),multi:!0};let Yu=(()=>{class n extends Ku{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function Kp(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>k0}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([Mh]),h.qOj]}),n})(),Ju=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Bs]]}),n})(),Pb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ju]}),n})(),hE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:zp,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ju]}),n})(),fE=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,u=null,d=null;return null!=r&&(function kb(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,d=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,d=null!=r.asyncValidator?r.asyncValidator:null)),new Hp(o,{asyncValidators:d,updateOn:m,validators:u})}control(t,r,o){return new bi(t,r,o)}array(t,r,o){const u=t.map(d=>this._createControl(d));return new K0(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return z0(t)||Th(t)||Ly(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:hE}),n})();class Zy{}class pE{}class Ky{}class Yy{}class ho{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),u=o.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(o,u),this.headers.has(u)?this.headers.get(u).push(d):this.headers.set(u,[d])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const o=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(o,r),this.maybeSetNormalizedName(t,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ho?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ho;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ho?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const u=e.value;if(u){let d=this.headers.get(t);if(!d)return;d=d.filter(m=>-1===u.indexOf(m)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Fb{encodeKey(e){return Qy(e)}encodeValue(e){return Qy(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Vb=/%(\d[a-f0-9])/gi,Ub={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Qy(n){return encodeURIComponent(n).replace(Vb,(e,t)=>{var r;return null!==(r=Ub[t])&&void 0!==r?r:e})}function Bb(n){return`${n}`}class qo{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Fb,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Lb(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const u=o.indexOf("="),[d,m]=-1==u?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,u)),e.decodeValue(o.slice(u+1))],w=t.get(d)||[];w.push(m),t.set(d,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new qo({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Bb(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(Bb(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class jb{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Hb(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Xp(n){return"undefined"!=typeof Blob&&n instanceof Blob}function gE(n){return"undefined"!=typeof FormData&&n instanceof FormData}class kc{constructor(e,t,r,o){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function LA(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,u=o):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new ho),this.context||(this.context=new jb),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+d}}else this.params=new qo,this.urlWithParams=t}serializeBody(){return null===this.body?null:Hb(this.body)||Xp(this.body)||gE(this.body)||function mE(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof qo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||gE(this.body)?null:Xp(this.body)?this.body.type||null:Hb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof qo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,o=e.url||this.url,u=e.responseType||this.responseType,d=void 0!==e.body?e.body:this.body,m=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,w=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let b=e.headers||this.headers,A=e.params||this.params;const M=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(b=Object.keys(e.setHeaders).reduce((L,G)=>L.set(G,e.setHeaders[G]),b)),e.setParams&&(A=Object.keys(e.setParams).reduce((L,G)=>L.set(G,e.setParams[G]),A)),new kc(r,o,d,{params:A,headers:b,context:M,reportProgress:w,responseType:u,withCredentials:m})}}var Mr=(()=>((Mr=Mr||{})[Mr.Sent=0]="Sent",Mr[Mr.UploadProgress=1]="UploadProgress",Mr[Mr.ResponseHeader=2]="ResponseHeader",Mr[Mr.DownloadProgress=3]="DownloadProgress",Mr[Mr.Response=4]="Response",Mr[Mr.User=5]="User",Mr))();class Qi{constructor(e,t=200,r="OK"){this.headers=e.headers||new ho,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class yE extends Qi{constructor(e={}){super(e),this.type=Mr.ResponseHeader}clone(e={}){return new yE({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Jy extends Qi{constructor(e={}){super(e),this.type=Mr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Jy({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Xy extends Qi{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function eg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ev=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let u;if(t instanceof kc)u=t;else{let w,b;w=o.headers instanceof ho?o.headers:new ho(o.headers),o.params&&(b=o.params instanceof qo?o.params:new qo({fromObject:o.params})),u=new kc(t,r,void 0!==o.body?o.body:null,{headers:w,context:o.context,params:b,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const d=Et(u).pipe(Zi(w=>this.handler.handle(w)));if(t instanceof kc||"events"===o.observe)return d;const m=d.pipe(Tr(w=>w instanceof Jy));switch(o.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,Dt.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return m.pipe((0,Dt.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return m.pipe((0,Dt.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return m.pipe((0,Dt.U)(w=>w.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new qo).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,eg(o,r))}post(t,r,o={}){return this.request("POST",t,eg(o,r))}put(t,r,o={}){return this.request("PUT",t,eg(o,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ky))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class vE{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const $b=new h.OlP("HTTP_INTERCEPTORS");let _E=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Gb=/^\)\]\}',?\n/;let Xu=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Wn.y(r=>{const o=this.xhrFactory.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((G,ee)=>o.setRequestHeader(G,ee.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const G=t.detectContentTypeHeader();null!==G&&o.setRequestHeader("Content-Type",G)}if(t.responseType){const G=t.responseType.toLowerCase();o.responseType="json"!==G?G:"text"}const u=t.serializeBody();let d=null;const m=()=>{if(null!==d)return d;const G=o.statusText||"OK",ee=new ho(o.getAllResponseHeaders()),Re=function tg(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return d=new yE({headers:ee,status:o.status,statusText:G,url:Re}),d},w=()=>{let{headers:G,status:ee,statusText:Re,url:Ze}=m(),vt=null;204!==ee&&(vt=void 0===o.response?o.responseText:o.response),0===ee&&(ee=vt?200:0);let Mt=ee>=200&&ee<300;if("json"===t.responseType&&"string"==typeof vt){const Yt=vt;vt=vt.replace(Gb,"");try{vt=""!==vt?JSON.parse(vt):null}catch(Lt){vt=Yt,Mt&&(Mt=!1,vt={error:Lt,text:vt})}}Mt?(r.next(new Jy({body:vt,headers:G,status:ee,statusText:Re,url:Ze||void 0})),r.complete()):r.error(new Xy({error:vt,headers:G,status:ee,statusText:Re,url:Ze||void 0}))},b=G=>{const{url:ee}=m(),Re=new Xy({error:G,status:o.status||0,statusText:o.statusText||"Unknown Error",url:ee||void 0});r.error(Re)};let A=!1;const M=G=>{A||(r.next(m()),A=!0);let ee={type:Mr.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(ee.total=G.total),"text"===t.responseType&&!!o.responseText&&(ee.partialText=o.responseText),r.next(ee)},L=G=>{let ee={type:Mr.UploadProgress,loaded:G.loaded};G.lengthComputable&&(ee.total=G.total),r.next(ee)};return o.addEventListener("load",w),o.addEventListener("error",b),o.addEventListener("timeout",b),o.addEventListener("abort",b),t.reportProgress&&(o.addEventListener("progress",M),null!==u&&o.upload&&o.upload.addEventListener("progress",L)),o.send(u),r.next({type:Mr.Sent}),()=>{o.removeEventListener("error",b),o.removeEventListener("abort",b),o.removeEventListener("load",w),o.removeEventListener("timeout",b),t.reportProgress&&(o.removeEventListener("progress",M),null!==u&&o.upload&&o.upload.removeEventListener("progress",L)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(gn))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const tv=new h.OlP("XSRF_COOKIE_NAME"),el=new h.OlP("XSRF_HEADER_NAME");class IE{}let qb=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=os(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe),h.LFG(h.Lbi),h.LFG(tv))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),xh=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const o=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||o.startsWith("http://")||o.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(IE),h.LFG(el))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),fo=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get($b,[]);this.chain=r.reduceRight((o,u)=>new vE(o,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Yy),h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),tl=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:xh,useClass:_E}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:tv,useValue:t.cookieName}:[],t.headerName?{provide:el,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[xh,{provide:$b,useExisting:xh,multi:!0},{provide:IE,useClass:qb},{provide:tv,useValue:"XSRF-TOKEN"},{provide:el,useValue:"X-XSRF-TOKEN"}]}),n})(),rg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[ev,{provide:Ky,useClass:fo},Xu,{provide:Yy,useExisting:Xu}],imports:[[tl.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),Ga=(()=>{class n{constructor(t){this.http=t,this.apiPaises="https://restcountries.com/v3.1/"}listarPaises(){return this.http.get(this.apiPaises+"all")}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ev))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Fc=x(4986),hn=x(880);function zo(){return(0,Jr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Ur.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function nl(n,e=xs.y){return n=null!=n?n:Lc,(0,Jr.e)((t,r)=>{let o,u=!0;t.subscribe((0,Ur.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}function Lc(n,e){return n===e}var at,fr=x(2011),Vc=(x(7092),x(3942)),Ae=x(5861),qa=x(9681),Nh=x(4859),Wo=x(1877),qt=x(2090),DE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},po={},ig=ig||{},Nt=DE||self;function Oh(){}function nv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ph(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var rv="closure_uid_"+(1e9*Math.random()>>>0),zb=0;function TE(n,e,t){return n.call.apply(n.bind,arguments)}function Wb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Hr(n,e,t){return(Hr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?TE:Wb).apply(null,arguments)}function sg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ni(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function rl(){this.s=this.s,this.o=this.o}var iv={};rl.prototype.s=!1,rl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function CE(n){return Object.prototype.hasOwnProperty.call(n,rv)&&n[rv]||(n[rv]=++zb)}(this);delete iv[n]}},rl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const og=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},AE=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function Kb(n){return Array.prototype.concat.apply([],arguments)}function SE(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ag(n){return/^[\s\xa0]*$/.test(n)}var pr,sv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Fi(n,e){return-1!=n.indexOf(e)}function ov(n,e){return n<e?-1:n>e?1:0}e:{var ME=Nt.navigator;if(ME){var av=ME.userAgent;if(av){pr=av;break e}}pr=""}function uv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function lv(n){const e={};for(const t in n)e[t]=n[t];return e}var kh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xE(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<kh.length;u++)t=kh[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ug(n){return ug[" "](n),n}ug[" "]=Oh;var Fh,n,Qb=Fi(pr,"Opera"),Uc=Fi(pr,"Trident")||Fi(pr,"MSIE"),RE=Fi(pr,"Edge"),cv=RE||Uc,dv=Fi(pr,"Gecko")&&!(Fi(pr.toLowerCase(),"webkit")&&!Fi(pr,"Edge"))&&!(Fi(pr,"Trident")||Fi(pr,"MSIE"))&&!Fi(pr,"Edge"),Jb=Fi(pr.toLowerCase(),"webkit")&&!Fi(pr,"Edge");function hv(){var n=Nt.document;return n?n.documentMode:void 0}e:{var Lh="",NE=(n=pr,dv?/rv:([^\);]+)(\)|;)/.exec(n):RE?/Edge\/([\d\.]+)/.exec(n):Uc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Jb?/WebKit\/(\S+)/.exec(n):Qb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(NE&&(Lh=NE?NE[1]:""),Uc){var Vh=hv();if(null!=Vh&&Vh>parseFloat(Lh)){Fh=String(Vh);break e}}Fh=Lh}var Xb={};var pv=Nt.document&&Uc&&(hv()||parseInt(Fh,10))||void 0,gv=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Nt.addEventListener("test",Oh,e),Nt.removeEventListener("test",Oh,e)}catch(t){}return n}();function fi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function za(n,e){if(fi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(dv){e:{try{ug(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:lg[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&za.Z.h.call(this)}}fi.prototype.h=function(){this.defaultPrevented=!0},ni(za,fi);var lg={2:"touch",3:"pen",4:"mouse"};za.prototype.h=function(){za.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var sl="closure_listenable_"+(1e6*Math.random()|0),zA=0;function eD(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++zA,this.ca=this.fa=!1}function Bc(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function jc(n){this.src=n,this.g={},this.h=0}function cg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=og(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Bc(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function dg(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}jc.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=dg(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new eD(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Uh="closure_lm_"+(1e6*Math.random()|0),hg={};function mv(n,e,t,r,o){if(r&&r.once)return PE(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)mv(n,e[u],t,r,o);return null}return t=Ev(t),n&&n[sl]?n.N(e,t,Ph(r)?!!r.capture:!!r,o):fg(n,e,t,!1,r,o)}function fg(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Ph(o)?!!o.capture:!!o,m=vv(n);if(m||(n[Uh]=m=new jc(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function OE(){var e=kE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)gv||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(gg(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function PE(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)PE(n,e[u],t,r,o);return null}return t=Ev(t),n&&n[sl]?n.O(e,t,Ph(r)?!!r.capture:!!r,o):fg(n,e,t,!0,r,o)}function yv(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)yv(n,e[u],t,r,o);else r=Ph(r)?!!r.capture:!!r,t=Ev(t),n&&n[sl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=dg(u=n.g[e],t,r,o))&&(Bc(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=vv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=dg(e,t,r,o)),(t=-1<n?e[n]:null)&&pg(t))}function pg(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[sl])cg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(gg(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=vv(e))?(cg(t,n),0==t.h&&(t.src=null,e[Uh]=null)):Bc(n)}}}function gg(n){return n in hg?hg[n]:hg[n]="on"+n}function kE(n,e){if(n.ca)n=!0;else{e=new za(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&pg(n),n=t.call(r,e)}return n}function vv(n){return(n=n[Uh])instanceof jc?n:null}var _v="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ev(n){return"function"==typeof n?n:(n[_v]||(n[_v]=function(e){return n.handleEvent(e)}),n[_v])}function gr(){rl.call(this),this.i=new jc(this),this.P=this,this.I=null}function xr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new fi(e,n);else if(e instanceof fi)e.target=e.target||n;else{var o=e;xE(e=new fi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Bh(d,r,!0,e)&&o}if(o=Bh(d=e.g=n,r,!0,e)&&o,o=Bh(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Bh(d=e.g=t[u],r,!1,e)&&o}function Bh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&cg(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}ni(gr,rl),gr.prototype[sl]=!0,gr.prototype.removeEventListener=function(n,e,t,r){yv(this,n,e,t,r)},gr.prototype.M=function(){if(gr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Bc(t[r]);delete n.g[e],n.h--}}this.I=null},gr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},gr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var mg=Nt.JSON.stringify;function FE(){var n=bv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var BE,wv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new VE,n=>n.reset());class VE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function UE(n){Nt.setTimeout(()=>{throw n},0)}function yg(n,e){BE||function tD(){var n=Nt.Promise.resolve(void 0);BE=function(){n.then(nD)}}(),Iv||(BE(),Iv=!0),bv.add(n,e)}var Iv=!1,bv=new class LE{constructor(){this.h=this.g=null}add(e,t){const r=wv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function nD(){for(var n;n=FE();){try{n.h.call(n.g)}catch(t){UE(t)}var e=wv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Iv=!1}function Kn(n,e){gr.call(this),this.h=n||1,this.g=e||Nt,this.j=Hr(this.kb,this),this.l=Date.now()}function vg(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Dv(n,e,t){if("function"==typeof n)t&&(n=Hr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Hr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Nt.setTimeout(n,e||0)}function jE(n){n.g=Dv(()=>{n.g=null,n.i&&(n.i=!1,jE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ni(Kn,gr),(at=Kn.prototype).da=!1,at.S=null,at.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),xr(this,"tick"),this.da&&(vg(this),this.start()))}},at.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.M=function(){Kn.Z.M.call(this),vg(this),delete this.g};class HE extends rl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jE(this)}M(){super.M(),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jh(n){rl.call(this),this.h=n,this.g={}}ni(jh,rl);var Cv=[];function Tv(n,e,t,r){Array.isArray(t)||(t&&(Cv[0]=t.toString()),t=Cv);for(var o=0;o<t.length;o++){var u=mv(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function ol(n){uv(n.g,function(e,t){this.g.hasOwnProperty(t)&&pg(e)},n),n.g={}}function _g(){this.g=!0}function Hc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function WA(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return mg(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}jh.prototype.M=function(){jh.Z.M.call(this),ol(this)},jh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_g.prototype.Aa=function(){this.g=!1},_g.prototype.info=function(){};var Wa={},Eg=null;function Ji(){return Eg=Eg||new gr}function qE(n){fi.call(this,Wa.Ma,n)}function Hh(n){const e=Ji();xr(e,new qE(e,n))}function Hs(n,e){fi.call(this,Wa.STAT_EVENT,n),this.stat=e}function An(n){const e=Ji();xr(e,new Hs(e,n))}function _s(n,e){fi.call(this,Wa.Na,n),this.size=e}function $c(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Nt.setTimeout(function(){n()},e)}Wa.Ma="serverreachability",ni(qE,fi),Wa.STAT_EVENT="statevent",ni(Hs,fi),Wa.Na="timingevent",ni(_s,fi);var $h={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},zE={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Av(){}function ZE(){}Av.prototype.h=null;var wg,al={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ul(){fi.call(this,"d")}function Sv(){fi.call(this,"c")}function Ig(){}function Gc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new jh(this),this.P=bg,this.W=new Kn(n=cv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Mv}function Mv(){this.i=null,this.g="",this.h=!1}ni(ul,fi),ni(Sv,fi),ni(Ig,Av),Ig.prototype.g=function(){return new XMLHttpRequest},Ig.prototype.i=function(){return{}},wg=new Ig;var bg=45e3,xv={},Gh={};function Dg(n,e,t){n.K=1,n.v=xg(Zo(e)),n.s=t,n.U=!0,Cg(n,null)}function Cg(n,e){n.F=Date.now(),qc(n),n.A=Zo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Ka(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Mv,n.g=td(n.l,t?e:null,!n.s),0<n.O&&(n.L=new HE(Hr(n.Ia,n,n.g),n.O)),Tv(n.V,n.g,"readystatechange",n.gb),e=n.H?lv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Hh(1),function rD(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var A=b[0];b=b[1];var M=A.split("_");d=2<=M.length&&"type"==M[1]?d+(A+"=")+b+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function qh(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Rv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=KE(n,t),o==Gh){4==e&&(n.o=4,An(14),r=!1),Hc(n.j,n.m,null,"[Incomplete Response]");break}if(o==xv){n.o=4,An(15),Hc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Hc(n.j,n.m,o,null),Tg(n,o)}qh(n)&&o!=Gh&&o!=xv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,An(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),yw(e),e.L=!0,An(11))):(Hc(n.j,n.m,t,"[Invalid Chunked Response]"),Za(n),zc(n))}function KE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Gh:(t=Number(e.substring(t,r)),isNaN(t)?xv:(r+=1)+t>e.length?Gh:(e=e.substr(r,t),n.C=r+t,e))}function qc(n){n.Y=Date.now()+n.P,Nv(n,n.P)}function Nv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=$c(Hr(n.eb,n),e)}function zh(n){n.B&&(Nt.clearTimeout(n.B),n.B=null)}function zc(n){0==n.l.G||n.I||Wv(n.l,n)}function Za(n){zh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,vg(n.W),ol(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Tg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Rg(t.i,n)))if(t.I=n.N,!n.J&&Rg(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=$c(Hr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;zv(t),Pg(t)}mw(t),An(18)}if(1>=Uv(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else hl(t,11)}else if((n.J||t.g==n)&&zv(t),!ag(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const L=b[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const ee=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ee){var u=r.i;!u.g&&(Fi(ee,"spdy")||Fi(ee,"quic")||Fi(ee,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(rw(u,u.h),u.h=null))}if(r.D){const Re=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Re&&(r.sa=Re,kn(r.F,r.D,Re))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=Zv(r,r.H?r.la:null,r.W),d.J){wt(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(zh(m),qc(m)),r.g=d}else gw(r);0<t.l.length&&Qh(t)}else"stop"!=b[0]&&"close"!=b[0]||hl(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?hl(t,7):qv(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Hh(4)}catch(b){}}function Ov(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(nv(n)||"string"==typeof n)AE(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(nv(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function iD(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(nv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Wc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Wc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Pv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ll(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)ll(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function ll(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(at=Gc.prototype).setTimeout=function(n){this.P=n},at.gb=function(n){n=n.target;const e=this.L;e&&3==go(n)?e.l():this.Ia(n)},at.Ia=function(n){try{if(n==this.g)e:{const A=go(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>A)&&(3!=A||cv||this.g&&(this.h.h||this.g.ga()||$v(this.g)))){this.I||4!=A||7==e||Hh(8==e||0>=M?3:2),zh(this);var t=this.g.ba();this.N=t;t:if(qh(this)){var r=$v(this.g);n="";var o=r.length,u=4==go(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Za(this),zc(this);var d="";break t}this.h.i=new Nt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function $E(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ag(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,An(12),Za(this),zc(this);break e}Hc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Tg(this,t)}this.U?(Rv(this,A,d),cv&&this.i&&3==A&&(Tv(this.V,this.W,"tick",this.fb),this.W.start())):(Hc(this.j,this.m,d,null),Tg(this,d)),4==A&&Za(this),this.i&&!this.I&&(4==A?Wv(this.l,this):(this.i=!1,qc(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,An(12)):(this.o=0,An(13)),Za(this),zc(this)}}}catch(A){}},at.fb=function(){if(this.g){var n=go(this.g),e=this.g.ga();this.C<e.length&&(zh(this),Rv(this,n,e),this.i&&4!=n&&qc(this))}},at.cancel=function(){this.I=!0,Za(this)},at.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function GE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Hh(3),An(17)),Za(this),this.o=2,zc(this)):Nv(this,this.Y-n)},(at=Wc.prototype).R=function(){Pv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},at.T=function(){return Pv(this),this.g.concat()},at.get=function(n,e){return ll(this.h,n)?this.h[n]:e},at.set=function(n,e){ll(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},at.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var YE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function cl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof cl){this.g=void 0!==e?e:n.g,Ag(this,n.j),this.s=n.s,Sg(this,n.i),Mg(this,n.m),this.l=n.l,e=n.h;var t=new Kc;t.i=e.i,e.g&&(t.g=new Wc(e.g),t.h=e.h),QE(this,t),this.o=n.o}else n&&(t=String(n).match(YE))?(this.g=!!e,Ag(this,t[1]||"",!0),this.s=Wh(t[2]||""),Sg(this,t[3]||"",!0),Mg(this,t[4]),this.l=Wh(t[5]||"",!0),QE(this,t[6]||"",!0),this.o=Wh(t[7]||"")):(this.g=!!e,this.h=new Kc(null,this.g))}function Zo(n){return new cl(n)}function Ag(n,e,t){n.j=t?Wh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Sg(n,e,t){n.i=t?Wh(e,!0):e}function Mg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function QE(n,e,t){e instanceof Kc?(n.h=e,function uD(n,e){e&&!n.j&&(Ko(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Fv(this,r),Ka(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Zc(e,tw)),n.h=new Kc(e,n.g))}function kn(n,e,t){n.h.set(e,t)}function xg(n){return kn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Wh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Zc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,JE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function JE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}cl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Zc(e,kv,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Zc(e,kv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Zc(t,"/"==t.charAt(0)?ew:XE,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Zc(t,nw)),n.join("")};var kv=/[#\/\?@]/g,XE=/[#\?:]/g,ew=/[#\?]/g,tw=/[#\?@]/g,nw=/#/g;function Kc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ko(n){n.g||(n.g=new Wc,n.h=0,n.i&&function sD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Fv(n,e){Ko(n),e=Yc(n,e),ll(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ll((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Pv(n)))}function Lv(n,e){return Ko(n),e=Yc(n,e),ll(n.g.h,e)}function Ka(n,e,t){Fv(n,e),0<t.length&&(n.i=null,n.g.set(Yc(n,e),SE(t)),n.h+=t.length)}function Yc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function lD(n){this.l=n||Vv,n=Nt.PerformanceNavigationTiming?0<(n=Nt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Nt.g&&Nt.g.Ea&&Nt.g.Ea()&&Nt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=Kc.prototype).add=function(n,e){Ko(this),this.i=null,n=Yc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},at.forEach=function(n,e){Ko(this),this.g.forEach(function(t,r){AE(t,function(o){n.call(e,o,r,this)},this)},this)},at.T=function(){Ko(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},at.R=function(n){Ko(this);var e=[];if("string"==typeof n)Lv(this,n)&&(e=Kb(e,this.g.get(Yc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Kb(e,n[t])}return e},at.set=function(n,e){return Ko(this),this.i=null,Lv(this,n=Yc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},at.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var Vv=10;function cD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Uv(n){return n.h?1:n.g?n.g.size:0}function Rg(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function rw(n,e){n.g?n.g.add(e):n.h=e}function wt(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function iw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return SE(n.i)}function Bv(){}function dD(){this.g=new Bv}function Ng(n,e,t){const r=t||"";try{Ov(n,function(o,u){let d=o;Ph(o)&&(d=mg(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function dl(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Ya(n){this.l=n.$b||null,this.j=n.ib||!1}function Sn(n,e){gr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=sw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}lD.prototype.cancel=function(){if(this.i=iw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Bv.prototype.stringify=function(n){return Nt.JSON.stringify(n,void 0)},Bv.prototype.parse=function(n){return Nt.JSON.parse(n,void 0)},ni(Ya,Av),Ya.prototype.g=function(){return new Sn(this.l,this.j)},Ya.prototype.i=function(n){return function(){return n}}({}),ni(Sn,gr);var sw=0;function jv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Zh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Kh(n)}function Kh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=Sn.prototype).open=function(n,e){if(this.readyState!=sw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Kh(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Nt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zh(this)),this.readyState=sw},at.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Kh(this)),this.g&&(this.readyState=3,Kh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Nt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},at.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Zh(this):Kh(this),3==this.readyState&&jv(this)}},at.Ua=function(n){this.g&&(this.response=this.responseText=n,Zh(this))},at.Ta=function(n){this.g&&(this.response=n,Zh(this))},at.ha=function(){this.g&&Zh(this)},at.setRequestHeader=function(n,e){this.v.append(n,e)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Sn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ow=Nt.JSON.parse;function ir(n){gr.call(this),this.headers=new Wc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Hv,this.K=this.L=!1}ni(ir,gr);var Hv="",aw=/^https?$/i,fD=["POST","PUT"];function gD(n){return"content-type"==n.toLowerCase()}function Jc(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,uw(n),Og(n)}function uw(n){n.D||(n.D=!0,xr(n,"complete"),xr(n,"error"))}function lw(n){if(n.h&&void 0!==ig&&(!n.C[1]||4!=go(n)||2!=n.ba()))if(n.v&&4==go(n))Dv(n.Fa,0,n);else if(xr(n,"readystatechange"),4==go(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(YE)[1]||null;if(!o&&Nt.self&&Nt.self.location){var u=Nt.self.location.protocol;o=u.substr(0,u.length-1)}r=!aw.test(o?o.toLowerCase():"")}t=r}if(t)xr(n,"complete"),xr(n,"success");else{n.m=6;try{var d=2<go(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",uw(n)}}finally{Og(n)}}}function Og(n,e){if(n.g){Yh(n);const t=n.g,r=n.C[0]?Oh:null;n.g=null,n.C=null,e||xr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Yh(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Nt.clearTimeout(n.A),n.A=null)}function go(n){return n.g?n.g.readyState:0}function $v(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Hv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Gv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function cw(n){let e="";return uv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):kn(n,e,t))}function Yo(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Xc(n){this.za=0,this.l=[],this.h=new _g,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Yo("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Yo("baseRetryDelayMs",5e3,n),this.$a=Yo("retryDelaySeedMs",1e4,n),this.Ya=Yo("forwardChannelMaxRetries",2,n),this.ra=Yo("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new lD(n&&n.concurrentRequestLimit),this.Ca=new dD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function qv(n){if(dw(n),3==n.G){var e=n.V++,t=Zo(n.F);kn(t,"SID",n.J),kn(t,"RID",e),kn(t,"TYPE","terminate"),ed(n,t),(e=new Gc(n,n.h,e,void 0)).K=2,e.v=xg(Zo(t)),t=!1,Nt.navigator&&Nt.navigator.sendBeacon&&(t=Nt.navigator.sendBeacon(e.v.toString(),"")),!t&&Nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=td(e.l,null),e.g.ea(e.v)),e.F=Date.now(),qc(e)}vw(n)}function Pg(n){n.g&&(yw(n),n.g.cancel(),n.g=null)}function dw(n){Pg(n),n.u&&(Nt.clearTimeout(n.u),n.u=null),zv(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Nt.clearTimeout(n.m),n.m=null)}function kg(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Qh(n)}function Qh(n){cD(n.i)||n.m||(n.m=!0,yg(n.Ha,n),n.C=0)}function fw(n,e){var t;t=e?e.m:n.V++;const r=Zo(n.F);kn(r,"SID",n.J),kn(r,"RID",t),kn(r,"AID",n.U),ed(n,r),n.o&&n.s&&Gv(r,n.o,n.s),t=new Gc(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=pw(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),rw(n.i,t),Dg(t,r,e)}function ed(n,e){n.j&&Ov({},function(t,r){kn(e,r,t)})}function pw(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Hr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=o[w].h;const A=o[w].g;if(b-=u,0>b)u=Math.max(0,o[w].h-100),m=!1;else try{Ng(A,d,"req"+b+"_")}catch(M){r&&r(A)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function gw(n){n.g||n.u||(n.Y=1,yg(n.Ga,n),n.A=0)}function mw(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=$c(Hr(n.Ga,n),Jh(n,n.A)),n.A++,0))}function yw(n){null!=n.B&&(Nt.clearTimeout(n.B),n.B=null)}function mD(n){n.g=new Gc(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Zo(n.oa);kn(e,"RID","rpc"),kn(e,"SID",n.J),kn(e,"CI",n.N?"0":"1"),kn(e,"AID",n.U),ed(n,e),kn(e,"TYPE","xmlhttp"),n.o&&n.s&&Gv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=xg(Zo(e)),t.s=null,t.U=!0,Cg(t,n)}function zv(n){null!=n.v&&(Nt.clearTimeout(n.v),n.v=null)}function Wv(n,e){var t=null;if(n.g==e){zv(n),yw(n),n.g=null;var r=2}else{if(!Rg(n.i,e))return;t=e.D,wt(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;xr(r=Ji(),new _s(r,t,e,o)),Qh(n)}else gw(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function hw(n,e){return!(Uv(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=$c(Hr(n.Ha,n,e),Jh(n,n.C)),n.C++,0)))}(n,e)||2==r&&mw(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:hl(n,5);break;case 4:hl(n,10);break;case 3:hl(n,6);break;default:hl(n,2)}}function Jh(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function hl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Hr(n.jb,n);t||(t=new cl("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||Ag(t,"https"),xg(t)),function hD(n,e){const t=new _g;if(Nt.Image){const r=new Image;r.onload=sg(dl,t,r,"TestLoadImage: loaded",!0,e),r.onerror=sg(dl,t,r,"TestLoadImage: error",!1,e),r.onabort=sg(dl,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=sg(dl,t,r,"TestLoadImage: timeout",!1,e),Nt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else An(2);n.G=0,n.j&&n.j.va(e),vw(n),dw(n)}function vw(n){n.G=0,n.I=-1,n.j&&((0!=iw(n.i).length||0!=n.l.length)&&(n.i.i.length=0,SE(n.l),n.l.length=0),n.j.ua())}function Zv(n,e,t){let r=function oD(n){return n instanceof cl?Zo(n):new cl(n,void 0)}(t);if(""!=r.i)e&&Sg(r,e+"."+r.i),Mg(r,r.m);else{const o=Nt.location;r=function aD(n,e,t,r){var o=new cl(null,void 0);return n&&Ag(o,n),e&&Sg(o,e),t&&Mg(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&uv(n.aa,function(o,u){kn(r,u,o)}),t=n.sa,(e=n.D)&&t&&kn(r,e,t),kn(r,"VER",n.ma),ed(n,r),r}function td(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ir(t&&n.Ba&&!n.qa?new Ya({ib:!0}):n.qa)).L=n.H,e}function _w(){}function Fg(){if(Uc&&!(10<=Number(pv)))throw Error("Environmental error: no available transport.")}function Xi(n,e){gr.call(this),this.g=new Xc(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ag(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ag(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new fl(this)}function Ew(n){ul.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function ww(){Sv.call(this),this.status=1}function fl(n){this.g=n}(at=ir.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wg.g(),this.C=function WE(n){return n.h||(n.h=n.i())}(this.u?this.u:wg),this.g.onreadystatechange=Hr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Jc(this,u)}n=t||"";const o=new Wc(this.headers);r&&Ov(r,function(u,d){o.set(d,u)}),r=function GA(n){e:{var e=gD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Nt.FormData&&n instanceof Nt.FormData,!(0<=og(fD,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yh(this),0<this.B&&((this.K=function pD(n){return Uc&&function qA(){return function Yb(n){var e=Xb;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=sv(String(Fh)).split("."),t=sv("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=ov(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||ov(0==o[2].length,0==u[2].length)||ov(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hr(this.pa,this)):this.A=Dv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Jc(this,u)}},at.pa=function(){void 0!==ig&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xr(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,xr(this,"complete"),xr(this,"abort"),Og(this))},at.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Og(this,!0)),ir.Z.M.call(this)},at.Fa=function(){this.s||(this.F||this.v||this.l?lw(this):this.cb())},at.cb=function(){lw(this)},at.ba=function(){try{return 2<go(this)?this.g.status:-1}catch(n){return-1}},at.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},at.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ow(e)}},at.Da=function(){return this.m},at.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=Xc.prototype).ma=8,at.G=1,at.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},at.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Gc(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=lv(u),xE(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=pw(this,o,e),kn(t=Zo(this.F),"RID",n),kn(t,"CVER",22),this.D&&kn(t,"X-HTTP-Session-Id",this.D),ed(this,t),this.o&&u&&Gv(t,this.o,u),rw(this.i,o),this.Ra&&kn(t,"TYPE","init"),this.ja?(kn(t,"$req",e),kn(t,"SID","null"),o.$=!0,Dg(o,t,null)):Dg(o,t,e),this.G=2}}else 3==this.G&&(n?fw(this,n):0==this.l.length||cD(this.i)||fw(this))},at.Ga=function(){if(this.u=null,mD(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=$c(Hr(this.bb,this),n)}},at.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,An(10),Pg(this),mD(this))},at.ab=function(){null!=this.v&&(this.v=null,Pg(this),mw(this),An(19))},at.jb=function(n){n?(this.h.info("Successfully pinged google.com"),An(2)):(this.h.info("Failed to ping google.com"),An(1))},(at=_w.prototype).xa=function(){},at.wa=function(){},at.va=function(){},at.ua=function(){},at.Oa=function(){},Fg.prototype.g=function(n,e){return new Xi(n,e)},ni(Xi,gr),Xi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),yg(Hr(n.hb,n,e))),An(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Zv(n,null,n.W),Qh(n)},Xi.prototype.close=function(){qv(this.g)},Xi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,kg(this.g,e)}else this.v?((e={}).__data__=mg(n),kg(this.g,e)):kg(this.g,n)},Xi.prototype.M=function(){this.g.j=null,delete this.j,qv(this.g),delete this.g,Xi.Z.M.call(this)},ni(Ew,ul),ni(ww,Sv),ni(fl,_w),fl.prototype.xa=function(){xr(this.g,"a")},fl.prototype.wa=function(n){xr(this.g,new Ew(n))},fl.prototype.va=function(n){xr(this.g,new ww(n))},fl.prototype.ua=function(){xr(this.g,"b")},Fg.prototype.createWebChannel=Fg.prototype.g,Xi.prototype.send=Xi.prototype.u,Xi.prototype.open=Xi.prototype.m,Xi.prototype.close=Xi.prototype.close,$h.NO_ERROR=0,$h.TIMEOUT=8,$h.HTTP_ERROR=6,zE.COMPLETE="complete",ZE.EventType=al,al.OPEN="a",al.CLOSE="b",al.ERROR="c",al.MESSAGE="d",gr.prototype.listen=gr.prototype.N,ir.prototype.listenOnce=ir.prototype.O,ir.prototype.getLastError=ir.prototype.La,ir.prototype.getLastErrorCode=ir.prototype.Da,ir.prototype.getStatus=ir.prototype.ba,ir.prototype.getResponseJson=ir.prototype.Qa,ir.prototype.getResponseText=ir.prototype.ga,ir.prototype.send=ir.prototype.ea;var yD=po.createWebChannelTransport=function(){return new Fg},vD=po.getStatEventTarget=function(){return Ji()},Qa=po.ErrorCode=$h,_D=po.EventType=zE,Iw=po.Event=Wa,bw=po.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Dw=po.FetchXmlHttpFactory=Ya,Lg=po.WebChannel=ZE,Cw=po.XhrIo=ir;const Tw="@firebase/firestore";class Rr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rr.UNAUTHENTICATED=new Rr(null),Rr.GOOGLE_CREDENTIALS=new Rr("google-credentials-uid"),Rr.FIRST_PARTY=new Rr("first-party-uid"),Rr.MOCK_USER=new Rr("mock-user");let nd="9.8.0";const Qo=new Wo.Yd("@firebase/firestore");function Vg(){return Qo.logLevel}function $e(n,...e){if(Qo.logLevel<=Wo.in.DEBUG){const t=e.map(Kv);Qo.debug(`Firestore (${nd}): ${n}`,...t)}}function mr(n,...e){if(Qo.logLevel<=Wo.in.ERROR){const t=e.map(Kv);Qo.error(`Firestore (${nd}): ${n}`,...t)}}function pl(n,...e){if(Qo.logLevel<=Wo.in.WARN){const t=e.map(Kv);Qo.warn(`Firestore (${nd}): ${n}`,...t)}}function Kv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${nd}) INTERNAL ASSERTION FAILED: `+n;throw mr(e),new Error(e)}function St(n,e){n||ct()}function tt(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends qt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $r{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Aw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ID{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rr.UNAUTHENTICATED))}shutdown(){}}class Sw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Mw{constructor(e){this.t=e,this.currentUser=Rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let d=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new $r,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=d;e.enqueueRetryable((0,Ae.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new $r)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St("string"==typeof r.accessToken),new Aw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new Rr(e)}}class bD{constructor(e,t,r){this.type="FirstParty",this.user=Rr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class DD{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new bD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CD{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,$e("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St("string"==typeof t.token),this.p=t.token,new Yv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class es{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Qv(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}es.A=-1;class Ug{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Qv(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function Ja(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function xw(n){return n+"\0"}class sr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return sr.fromMillis(Date.now())}static fromDate(e){return sr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new sr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new sr(0,0))}static max(){return new bt(new sr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Rw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Nw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class rd{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===rd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xt extends rd{construct(e,t,r){return new Xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Xt(t)}static emptyPath(){return new Xt([])}}const Ow=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gr extends rd{construct(e,t,r){return new Gr(e,t,r)}static isValidIdentifier(e){return Ow.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Gr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Pe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Pe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Pe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new Pe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gr(t)}static emptyPath(){return new Gr([])}}class id{constructor(e){this.fields=e,e.sort(Gr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Nr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Nr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Nr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nr.EMPTY_BYTE_STRING=new Nr("");const sd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(n){if(St(!!n),"string"==typeof n){let e=0;const t=sd.exec(n);if(St(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(n.seconds),nanos:Yn(n.nanos)}}function Yn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function od(n){return"string"==typeof n?Nr.fromBase64String(n):Nr.fromUint8Array(n)}function jg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Pw(n){const e=n.mapValue.fields.__previous_value__;return jg(e)?Pw(e):e}function Xh(n){const e=Es(n.mapValue.fields.__local_write_time__.timestampValue);return new sr(e.seconds,e.nanos)}class TD{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Jo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Jo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jo&&e.projectId===this.projectId&&e.database===this.database}}function ad(n){return null==n}function ud(n){return 0===n&&1/n==-1/0}function Hg(n){return"number"==typeof n&&Number.isInteger(n)&&!ud(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(Xt.fromString(e))}static fromName(e){return new Qe(Xt.fromString(e).popFirst(5))}static empty(){return new Qe(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new Xt(e.slice()))}}const ws={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$g={nullValue:"NULL_VALUE"};function eu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jg(n)?4:Fw(n)?9007199254740991:10:ct()}function $s(n,e){if(n===e)return!0;const t=eu(n);if(t!==eu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xh(n).isEqual(Xh(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Es(r.timestampValue),d=Es(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,od(n.bytesValue).isEqual(od(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Yn(r.geoPointValue.latitude)===Yn(o.geoPointValue.latitude)&&Yn(r.geoPointValue.longitude)===Yn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Yn(r.integerValue)===Yn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Yn(r.doubleValue),d=Yn(o.doubleValue);return u===d?ud(u)===ud(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Ja(n.arrayValue.values||[],e.arrayValue.values||[],$s);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(Rw(u)!==Rw(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!$s(u[m],d[m])))return!1;return!0}(n,e);default:return ct()}var o}function ef(n,e){return void 0!==(n.values||[]).find(t=>$s(t,e))}function tu(n,e){if(n===e)return 0;const t=eu(n),r=eu(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Yn(o.integerValue||o.doubleValue),m=Yn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return Gg(n.timestampValue,e.timestampValue);case 4:return Gg(Xh(n),Xh(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(o,u){const d=od(o),m=od(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const b=Ft(d[w],m[w]);if(0!==b)return b}return Ft(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Ft(Yn(o.latitude),Yn(u.latitude));return 0!==d?d:Ft(Yn(o.longitude),Yn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const b=tu(d[w],m[w]);if(b)return b}return Ft(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===ws.mapValue&&u===ws.mapValue)return 0;if(o===ws.mapValue)return 1;if(u===ws.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let A=0;A<m.length&&A<b.length;++A){const M=Ft(m[A],b[A]);if(0!==M)return M;const L=tu(d[m[A]],w[b[A]]);if(0!==L)return L}return Ft(m.length,b.length)}(n.mapValue,e.mapValue);default:throw ct()}}function Gg(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=Es(n),r=Es(e),o=Ft(t.seconds,r.seconds);return 0!==o?o:Ft(t.nanos,r.nanos)}function ld(n){return kw(n)}function kw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Es(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?od(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=kw(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${kw(r.fields[m])}`;return u+"}"}(n.mapValue):ct();var e}function gl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Jv(n){return!!n&&"integerValue"in n}function mo(n){return!!n&&"arrayValue"in n}function Xv(n){return!!n&&"nullValue"in n}function ml(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function e_(n){return!!n&&"mapValue"in n}function cd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Xa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Fw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function KA(n){return"nullValue"in n?$g:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?gl(Jo.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ct()}function Lw(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?gl(Jo.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ws:ct()}function AD(n,e){const t=tu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function t_(n,e){const t=tu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class qr{constructor(e){this.value=e}static empty(){return new qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!e_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cd(t)}setAll(e){let t=Gr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=cd(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());e_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $s(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];e_(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Xa(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new qr(cd(this.value))}}function Vw(n){const e=[];return Xa(n.fields,(t,r)=>{const o=new Gr([t]);if(e_(r)){const u=Vw(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new id(e)}class Mn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Mn(e,0,bt.min(),bt.min(),qr.empty(),0)}static newFoundDocument(e,t,r){return new Mn(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new Mn(e,2,t,bt.min(),qr.empty(),0)}static newUnknownDocument(e,t){return new Mn(e,3,t,bt.min(),qr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qg{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function n_(n){return n.fields.find(e=>2===e.kind)}function yl(n){return n.fields.filter(e=>2!==e.kind)}qg.UNKNOWN_ID=-1;class zg{constructor(e,t){this.fieldPath=e,this.kind=t}}class tf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new tf(0,Gs.min())}}function Uw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=bt.fromTimestamp(1e9===r?new sr(t+1,0):new sr(t,r));return new Gs(o,Qe.empty(),e)}function SD(n){return new Gs(n.readTime,n.key,-1)}class Gs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Gs(bt.min(),Qe.empty(),-1)}static max(){return new Gs(bt.max(),Qe.empty(),-1)}}function dd(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}class Qn{constructor(e,t){this.comparator=e,this.root=t||zr.EMPTY}insert(e,t){return new Qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zr.BLACK,null,null))}remove(e){return new Qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nf(this.root,e,this.comparator,!1)}getReverseIterator(){return new nf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nf(this.root,e,this.comparator,!0)}}class nf{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:zr.RED,this.left=null!=o?o:zr.EMPTY,this.right=null!=u?u:zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new zr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return zr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}zr.EMPTY=null,zr.RED=!0,zr.BLACK=!1,zr.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,o){return this}insert(n,e,t){return new zr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class En{constructor(e){this.comparator=e,this.data=new Qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new r_(this.data.getIterator())}getIteratorFrom(e){return new r_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class r_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hd(n){return n.hasNext()?n.getNext():void 0}class MD{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function Bw(n,e=null,t=[],r=[],o=null,u=null,d=null){return new MD(n,e,t,r,o,u,d)}function vl(n){const e=tt(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+ld(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),ad(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ld(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ld(r)).join(",")),e.P=t}return e.P}function rf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!$w(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!$s(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Qg(n.startAt,e.startAt)&&Qg(n.endAt,e.endAt)}function Wg(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function nu(n,e){return n.filters.filter(t=>t instanceof Dn&&t.field.isEqual(e))}function jw(n,e,t){let r=$g,o=!0;for(const u of nu(n,e)){let d=$g,m=!0;switch(u.op){case"<":case"<=":d=KA(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=$g}AD({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];AD({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function Zg(n,e,t){let r=ws,o=!0;for(const u of nu(n,e)){let d=ws,m=!0;switch(u.op){case">=":case">":d=Lw(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=ws}t_({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];t_({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Dn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new RD(e,t,r):"array-contains"===t?new ND(e,r):"in"===t?new OD(e,r):"not-in"===t?new Kg(e,r):"array-contains-any"===t?new Yg(e,r):new Dn(e,t,r)}static V(e,t,r){return"in"===t?new i_(e,r):new sf(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(tu(t,this.value)):null!==t&&eu(this.value)===eu(t)&&this.v(tu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class RD extends Dn{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.v(t)}}class i_ extends Dn{constructor(e,t){super(e,"in",t),this.keys=Hw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sf extends Dn{constructor(e,t){super(e,"not-in",t),this.keys=Hw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Hw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class ND extends Dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mo(t)&&ef(t.arrayValue,this.value)}}class OD extends Dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ef(this.value.arrayValue,t)}}class Kg extends Dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ef(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ef(this.value.arrayValue,t)}}class Yg extends Dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ef(this.value.arrayValue,r))}}class ru{constructor(e,t){this.position=e,this.inclusive=t}}class fd{constructor(e,t="asc"){this.field=e,this.dir=t}}function $w(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function s_(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Qe.comparator(Qe.fromName(d.referenceValue),t.key):tu(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Qg(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$s(n.position[t],e.position[t]))return!1;return!0}class yo{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function Gw(n,e,t,r,o,u,d,m){return new yo(n,e,t,r,o,u,d,m)}function pd(n){return new yo(n)}function of(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function af(n){for(const e of n.filters)if(e.S())return e.field;return null}function Jg(n){return null!==n.collectionGroup}function iu(n){const e=tt(n);if(null===e.D){e.D=[];const t=af(e),r=of(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new fd(t)),e.D.push(new fd(Gr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new fd(Gr.keyField(),u))}}}return e.D}function Li(n){const e=tt(n);if(!e.C)if("F"===e.limitType)e.C=Bw(e.path,e.collectionGroup,iu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of iu(e))t.push(new fd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ru(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new ru(e.startAt.position,e.startAt.inclusive):null;e.C=Bw(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function qw(n,e,t){return new yo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function uf(n,e){return rf(Li(n),Li(e))&&n.limitType===e.limitType}function zw(n){return`${vl(Li(n))}|lt:${n.limitType}`}function o_(n){return`Query(target=${function xD(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ld(r.value)}`;var r}).join(", ")}]`),ad(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ld(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ld(t)).join(",")),`Target(${e})`}(Li(n))}; limitType=${n.limitType})`}function Xg(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=s_(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,iu(t),r)||t.endAt&&!function(o,u,d){const m=s_(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,iu(t),r)));var t,r}function em(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function a_(n){return(e,t)=>{let r=!1;for(const o of iu(n)){const u=PD(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function PD(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?tu(m,w):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}function u_(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ud(e)?"-0":e}}function l_(n){return{integerValue:""+n}}function Ww(n,e){return Hg(e)?l_(e):u_(n,e)}class lf{constructor(){this._=void 0}}function Zw(n,e,t){return n instanceof gd?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof or?_l(n,e):n instanceof El?Kw(n,e):function(r,o){const u=c_(r,o),d=md(u)+md(r.k);return Jv(u)&&Jv(r.k)?l_(d):u_(r.M,d)}(n,e)}function kD(n,e,t){return n instanceof or?_l(n,e):n instanceof El?Kw(n,e):t}function c_(n,e){return n instanceof cf?Jv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class gd extends lf{}class or extends lf{constructor(e){super(),this.elements=e}}function _l(n,e){const t=Yw(e);for(const r of n.elements)t.some(o=>$s(o,r))||t.push(r);return{arrayValue:{values:t}}}class El extends lf{constructor(e){super(),this.elements=e}}function Kw(n,e){let t=Yw(e);for(const r of n.elements)t=t.filter(o=>!$s(o,r));return{arrayValue:{values:t}}}class cf extends lf{constructor(e,t){super(),this.M=e,this.k=t}}function md(n){return Yn(n.integerValue||n.doubleValue)}function Yw(n){return mo(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class wl{constructor(e,t){this.field=e,this.transform=t}}class Qw{constructor(e,t){this.version=e,this.transformResults=t}}class yr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class yd{}function Jw(n,e,t){n instanceof vd?function(r,o,u){const d=r.value.clone(),m=df(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Il?function(r,o,u){if(!tm(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=df(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(d_(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function nm(n,e,t){var o;n instanceof vd?function(r,o,u){if(!tm(r.precondition,o))return;const d=r.value.clone(),m=h_(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(LD(o),d).setHasLocalMutations()}(n,e,t):n instanceof Il?function(r,o,u){if(!tm(r.precondition,o))return;const d=h_(r.fieldTransforms,u,o),m=o.data;m.setAll(d_(r)),m.setAll(d),o.convertToFoundDocument(LD(o),m).setHasLocalMutations()}(n,e,t):tm(n.precondition,o=e)&&o.convertToNoDocument(bt.min())}function rm(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=c_(r.transform,o||null);null!=u&&(null==t&&(t=qr.empty()),t.set(r.field,u))}return t||null}function im(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ja(t,r,(o,u)=>function FD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof or&&r instanceof or||t instanceof El&&r instanceof El?Ja(t.elements,r.elements,$s):t instanceof cf&&r instanceof cf?$s(t.k,r.k):t instanceof gd&&r instanceof gd);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function LD(n){return n.isFoundDocument()?n.version:bt.min()}class vd extends yd{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Il extends yd{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function d_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function df(n,e,t){const r=new Map;St(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,kD(d,m,t[o]))}return r}function h_(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,Zw(u,d,e))}return r}class hf extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class ff extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class f_{constructor(e){this.count=e}}var Or,en;function Xw(n){switch(n){default:return ct();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function p_(n){if(void 0===n)return mr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Or.OK:return fe.OK;case Or.CANCELLED:return fe.CANCELLED;case Or.UNKNOWN:return fe.UNKNOWN;case Or.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Or.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Or.INTERNAL:return fe.INTERNAL;case Or.UNAVAILABLE:return fe.UNAVAILABLE;case Or.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Or.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Or.NOT_FOUND:return fe.NOT_FOUND;case Or.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Or.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Or.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Or.ABORTED:return fe.ABORTED;case Or.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Or.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Or.DATA_LOSS:return fe.DATA_LOSS;default:return ct()}}(en=Or||(Or={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class Xo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Xa(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Nw(this.inner)}size(){return this.innerSize}}const VD=new Qn(Qe.comparator);function ts(){return VD}const eI=new Qn(Qe.comparator);function g_(...n){let e=eI;for(const t of n)e=e.insert(t.key,t);return e}function pf(){return new Xo(n=>n.toString(),(n,e)=>n.isEqual(e))}const tI=new Qn(Qe.comparator),UD=new En(Qe.comparator);function un(...n){let e=UD;for(const t of n)e=e.add(t);return e}const nI=new En(Ft);function gf(){return nI}class _d{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,mf.createSynthesizedTargetChangeForCurrentChange(e,t)),new _d(bt.min(),r,gf(),ts(),un())}}class mf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new mf(Nr.EMPTY_BYTE_STRING,t,un(),un(),un())}}class sm{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class BD{constructor(e,t){this.targetId=e,this.$=t}}class m_{constructor(e,t,r=Nr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class jD{constructor(){this.B=0,this.L=$D(),this.U=Nr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=un(),t=un(),r=un();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ct()}}),new mf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=$D()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class QA{constructor(e){this.nt=e,this.st=new Map,this.it=ts(),this.rt=HD(),this.ot=new En(Ft)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(Wg(u))if(0===r){const d=new Qe(u.path);this.ct(t,d,Mn.newNoDocument(d,bt.min()))}else St(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&Wg(m.target)){const w=new Qe(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,Mn.newNoDocument(w,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=un();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const b=this.wt(w);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new _d(e,t,this.ot,this.it,r);return this.it=ts(),this.rt=HD(),this.ot=new En(Ft),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new jD,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new En(Ft),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new jD),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function HD(){return new Qn(Qe.comparator)}function $D(){return new Qn(Qe.comparator)}const JA={asc:"ASCENDING",desc:"DESCENDING"},XA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class eS{constructor(e,t){this.databaseId=e,this.N=t}}function om(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yf(n,e){return n.N?e.toBase64():e.toUint8Array()}function tS(n,e){return om(n,e.toTimestamp())}function Pr(n){return St(!!n),bt.fromTimestamp(function(e){const t=Es(e);return new sr(t.seconds,t.nanos)}(n))}function vf(n,e){return(t=n,new Xt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function y_(n){const e=Xt.fromString(n);return St(aI(e)),e}function Ed(n,e){return vf(n.databaseId,e.path)}function ea(n,e){const t=y_(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(__(t))}function _f(n,e){return vf(n.databaseId,e)}function v_(n){const e=y_(n);return 4===e.length?Xt.emptyPath():__(e)}function Ef(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function __(n){return St(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function GD(n,e,t){return{name:Ed(n,e),fields:t.value.mapValue.fields}}function rI(n,e,t){const r=ea(n,e.name),o=Pr(e.updateTime),u=new qr({mapValue:{fields:e.fields}}),d=Mn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function wf(n,e){let t;if(e instanceof vd)t={update:GD(n,e.key,e.value)};else if(e instanceof hf)t={delete:Ed(n,e.key)};else if(e instanceof Il)t={update:GD(n,e.key,e.data),updateMask:QD(e.fieldMask)};else{if(!(e instanceof ff))return ct();t={verify:Ed(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof gd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof or)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof El)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof cf)return{fieldPath:u.field.canonicalString(),increment:d.k};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:tS(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:ct()),t;var o}function iI(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?yr.updateTime(Pr(o.updateTime)):void 0!==o.exists?yr.exists(o.exists):yr.none():yr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(St("REQUEST_TIME"===d.setToServerValue),m=new gd):"appendMissingElements"in d?m=new or(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new El(d.removeAllFromArray.values||[]):"increment"in d?m=new cf(u,d.increment):ct();const w=Gr.fromServerFormat(d.fieldPath);return new wl(w,m)}(n,o)):[];var o;if(e.update){const o=ea(n,e.update.name),u=new qr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new id((e.updateMask.fieldPaths||[]).map(b=>Gr.fromServerFormat(b)));return new Il(o,u,d,t,r)}return new vd(o,u,t,r)}if(e.delete){const o=ea(n,e.delete);return new hf(o,t)}if(e.verify){const o=ea(n,e.verify);return new ff(o,t)}return ct()}function zD(n,e){return{documents:[_f(n,e.path)]}}function sI(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=_f(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=_f(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const b=w.map(A=>function(M){if("=="===M.op){if(ml(M.value))return{unaryFilter:{field:wd(M.field),op:"IS_NAN"}};if(Xv(M.value))return{unaryFilter:{field:wd(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(ml(M.value))return{unaryFilter:{field:wd(M.field),op:"IS_NOT_NAN"}};if(Xv(M.value))return{unaryFilter:{field:wd(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wd(M.field),op:w_(M.op),value:M.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:wd((A=b).field),direction:KD(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(b=e.limit,n.N||ad(b)?b:{value:b});var b,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function oI(n){let e=v_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){St(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=ZD(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new fd(pi((M=A).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let m=null;t.limit&&(m=function(A){let M;return M="object"==typeof A?A.value:A,ad(M)?null:M}(t.limit));let w=null;var A;t.startAt&&(w=new ru((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new ru(A.values||[],!A.before)}(t.endAt)),Gw(e,o,d,u,m,"F",w,b)}function ZD(n){return n?void 0!==n.unaryFilter?[I_(n)]:void 0!==n.fieldFilter?[YD(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>ZD(e)).reduce((e,t)=>e.concat(t)):ct():[]}function KD(n){return JA[n]}function w_(n){return XA[n]}function wd(n){return{fieldPath:n.canonicalString()}}function pi(n){return Gr.fromServerFormat(n.fieldPath)}function YD(n){return Dn.create(pi(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(n.fieldFilter.op),n.fieldFilter.value)}function I_(n){switch(n.unaryFilter.op){case"IS_NAN":const e=pi(n.unaryFilter.field);return Dn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=pi(n.unaryFilter.field);return Dn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=pi(n.unaryFilter.field);return Dn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=pi(n.unaryFilter.field);return Dn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}function QD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function aI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ri(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=b_(e)),e=uI(n.get(t),e);return b_(e)}function uI(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function b_(n){return n+"\x01\x01"}function vo(n){const e=n.length;if(St(e>=2),2===e)return St("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Xt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&ct(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:ct()}u=d+2}return new Xt(r)}const D_=["userId","batchId"];function am(n,e){return[n,ri(e)]}function lI(n,e,t){return[n,ri(e),t]}const JD={},C_=["prefixPath","collectionGroup","readTime","documentId"],bl=["prefixPath","collectionGroup","documentId"],cI=["collectionGroup","readTime","prefixPath","documentId"],dI=["canonicalId","targetId"],XD=["targetId","path"],rS=["path","targetId"],eC=["collectionId","parent"],tC=["indexId","uid"],nC=["uid","sequenceNumber"],hI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rC=["indexId","uid","orderedDocumentKey"],iC=["userId","collectionPath","documentId"],iS=["userId","collectionPath","largestBatchId"],T_=["userId","collectionGroup","largestBatchId"],A_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sC=[...A_,"documentOverlays"],fI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pI=[...fI,"indexConfiguration","indexState","indexEntries"],um="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(o=>o?ge.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class cm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new $r,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new If(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=M_(r.target.error);this.At.reject(new If(e,o))}}static open(e,t,r,o){try{return new cm(t,e.transaction(o,r))}catch(u){throw new If(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new sS(t)}}class Is{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Is.Vt((0,qt.z$)())&&mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),Id(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,qt.hl)())return!1;if(Is.St())return!0;const e=(0,qt.z$)(),t=Is.Vt(e),r=0<t&&t<10,o=Is.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ae.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new If(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Pe(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Pe(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new If(e,m))},u.onupgradeneeded=d=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ae.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=cm.open(u.db,e,d?"readonly":"readwrite",r),b=o(w).next(A=>(w.bt(),A)).catch(A=>(w.abort(A),ge.reject(A))).toPromise();return b.catch(()=>{}),yield w.Rt,b}catch(w){const b="FirebaseError"!==w.name&&m<3;if($e("SimpleDb","Transaction failed with error:",w.message,"Retrying:",b),u.close(),!b)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gI{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Id(this.Ft.delete())}}class If extends Pe{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Dl(n){return"IndexedDbTransactionError"===n.name}class sS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Id(r)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),Id(this.store.add(e))}get(e){return Id(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),Id(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),Id(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ge((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ge((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new ge((r,o)=>{t.onerror=u=>{const d=M_(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new ge((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new gI(m),b=t(m.primaryKey,m.value,w);if(b instanceof ge){const A=b.catch(M=>(w.done(),ge.reject(M)));r.push(A)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Id(n){return new ge((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=M_(r.target.error);t(o)}})}let S_=!1;function M_(n){const e=Is.Vt((0,qt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return S_||(S_=!0,setTimeout(()=>{throw r},0)),r}}return n}class mI extends lm{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Wr(n,e){const t=tt(n);return Is.xt(t.Ht,e)}class yI{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Jw(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&nm(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&nm(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(bt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,(t,r)=>im(t,r))&&Ja(this.baseMutations,e.baseMutations,(t,r)=>im(t,r))}}class vI{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){St(e.mutations.length===r.length);let o=tI;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new vI(e,t,r,o)}}class _I{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Cl{constructor(e,t,r,o,u=bt.min(),d=bt.min(),m=Nr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Cl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Cl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Cl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class oC{constructor(e){this.Jt=e}}function bf(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:dm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ed(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:om(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Tl(e.version)};else{if(!e.isUnknownDocument())return ct();r.unknownDocument={path:t.path.toArray(),version:Tl(e.version)}}var o,u;return r}function dm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Tl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function su(n){const e=new sr(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function bs(n,e){const t=(e.baseMutations||[]).map(u=>iI(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>iI(n.Jt,u)),o=sr.fromMillis(e.localWriteTimeMs);return new yI(e.batchId,o,t,r)}function bd(n){const e=su(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?su(n.lastLimboFreeSnapshotVersion):bt.min();let r;var o;return void 0!==n.query.documents?(St(1===(o=n.query).documents.length),r=Li(pd(v_(o.documents[0])))):r=Li(oI(n.query)),new Cl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Nr.fromBase64String(n.resumeToken))}function hm(n,e){const t=Tl(e.snapshotVersion),r=Tl(e.lastLimboFreeSnapshotVersion);let o;o=Wg(e.target)?zD(n.Jt,e.target):sI(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Df(n){const e=oI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?qw(e,e.limit,"L"):e}function x_(n,e){return new _I(e.largestBatchId,iI(n.Jt,e.overlayMutation))}function fm(n,e){const t=e.path.lastSegment();return[n,ri(e.path.popLast()),t]}class R_{getBundleMetadata(e,t){return Cf(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:su(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Cf(e).put({bundleId:(r=t).id,createTime:Tl(Pr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return uC(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Df(o.bundledQuery),readTime:su(o.readTime)};var o})}saveNamedQuery(e,t){return uC(e).put({name:(r=t).name,readTime:Tl(Pr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Cf(n){return Wr(n,"bundles")}function uC(n){return Wr(n,"namedQueries")}class EI{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new EI(e,t.uid||"")}getOverlay(e,t){return pm(e).get(fm(this.userId,t)).next(r=>r?x_(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new _I(t,d);o.push(this.Xt(e,m))}),ge.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(ri(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(pm(e).Qt("collectionPathOverlayIndex",m))}),ge.waitFor(u)}getOverlaysForCollection(e,t,r){const o=pf(),u=ri(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return pm(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const b=x_(this.M,w);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=pf();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pm(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,b,A)=>{const M=x_(this.M,b);u.size()<o||M.largestBatchId===d?(u.set(M.getKey(),M),d=M.largestBatchId):A.done()}).next(()=>u)}Xt(e,t){return pm(e).put(function(r,o,u){const[d,m,w]=fm(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:wf(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function pm(n){return Wr(n,"documentOverlays")}class Dd{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Yn(e.integerValue));else if("doubleValue"in e){const r=Yn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),ud(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(od(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Fw(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ct()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Qe.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function wI(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function II(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=wI(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Dd.fe=new Dd;class lC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=II(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=II(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class cC{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class dC{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Cd{constructor(){this.De=new lC,this.Ce=new cC(this.De),this.xe=new dC(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ou{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ou(this.indexId,this.documentKey,this.arrayValue,r)}}function au(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=bI(n.arrayValue,e.arrayValue),0!==t?t:(t=bI(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function bI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class hC{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=n_(e);if(void 0!==t&&!this.Be(t))return!1;const r=yl(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class DI{constructor(){this.qe=new Tf}addToCollectionParentIndex(e,t){return this.qe.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(Gs.min())}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class Tf{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new En(Xt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new En(Xt.comparator)).toArray()}}const N_=new Uint8Array(0);class CI{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Tf,this.Ge=new Xo(r=>vl(r),(r,o)=>rf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:ri(o)};return gm(e).put(u)}return ge.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[xw(t),""],!1,!0);return gm(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(vo(d.parent))}return r})}addFieldIndex(e,t){const r=mm(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=mm(e),o=O_(e),u=Af(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Af(e);let o=!0;const u=new Map;return ge.forEach(this.Qe(t),d=>this.je(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=un();const m=[];return ge.forEach(u,(w,b)=>{var A;$e("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Yt=>`${Yt.fieldPath}:${Yt.kind}`).join(",")}`} to execute ${vl(t)}`);const M=function(Yt,Lt){const Qt=n_(Lt);if(void 0===Qt)return null;for(const yn of nu(Yt,Qt.fieldPath))switch(yn.op){case"array-contains-any":return yn.value.arrayValue.values||[];case"array-contains":return[yn.value]}return null}(b,w),L=function(Yt,Lt){const Qt=new Map;for(const yn of yl(Lt))for(const Bi of nu(Yt,yn.fieldPath))switch(Bi.op){case"==":case"in":Qt.set(yn.fieldPath.canonicalString(),Bi.value);break;case"not-in":case"!=":return Qt.set(yn.fieldPath.canonicalString(),Bi.value),Array.from(Qt.values())}return null}(b,w),G=function(Yt,Lt){const Qt=[];let yn=!0;for(const Bi of yl(Lt)){const n0=0===Bi.kind?jw(Yt,Bi.fieldPath,Yt.startAt):Zg(Yt,Bi.fieldPath,Yt.startAt);Qt.push(n0.value),yn&&(yn=n0.inclusive)}return new ru(Qt,yn)}(b,w),ee=function(Yt,Lt){const Qt=[];let yn=!0;for(const Bi of yl(Lt)){const n0=0===Bi.kind?Zg(Yt,Bi.fieldPath,Yt.endAt):jw(Yt,Bi.fieldPath,Yt.endAt);Qt.push(n0.value),yn&&(yn=n0.inclusive)}return new ru(Qt,yn)}(b,w),Re=this.We(w,b,G),Ze=this.We(w,b,ee),vt=this.ze(w,b,L),Mt=this.He(w.indexId,M,Re,G.inclusive,Ze,ee.inclusive,vt);return ge.forEach(Mt,Yt=>r.Gt(Yt,t.limit).next(Lt=>{Lt.forEach(Qt=>{const yn=Qe.fromSegments(Qt.documentKey);d.has(yn)||(d=d.add(yn),m.push(yn))})}))}).next(()=>m)}return ge.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),A=[];for(let M=0;M<w;++M){const L=t?this.Je(t[M/b]):N_,G=this.Ye(e,L,r[M%b],o),ee=this.Xe(e,L,u[M%b],d),Re=m.map(Ze=>this.Ye(e,L,Ze,!0));A.push(...this.createRange(G,ee,Re))}return A}Ye(e,t,r,o){const u=new ou(e,Qe.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new ou(e,Qe.empty(),t,r);return o?u.ke():u}je(e,t){const r=new hC(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.$e(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return ge.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new En(Gr.comparator),w=!1;for(const b of d.filters){const A=b;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?w=!0:m=m.add(A.field))}for(const b of d.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Cd;for(const o of yl(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);Dd.fe.Zt(u,d)}return r.Se()}Je(e){const t=new Cd;return Dd.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Cd;return Dd.fe.Zt(gl(this.databaseId,t),r.Ne(function(o){const u=yl(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new Cd);let u=0;for(const d of yl(e)){const m=r[u++];for(const w of o)if(this.en(t,d.fieldPath)&&mo(m))o=this.nn(o,d,m);else{const b=w.Ne(d.kind);Dd.fe.Zt(m,b)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new Cd;w.seed(m.Se()),Dd.fe.Zt(d,w.Ne(t.kind)),u.push(w)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Dn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=mm(e),o=O_(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return ge.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(b,A){const M=A?new tf(A.sequenceNumber,new Gs(su(A.readTime),new Qe(vo(A.documentKey)),A.largestBatchId)):tf.empty(),L=b.fields.map(([G,ee])=>new zg(Gr.fromServerFormat(G),ee));return new qg(b.indexId,b.collectionGroup,L,M)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Ft(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=mm(e),u=O_(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ge.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Tl((L=r).readTime),documentKey:ri(L.documentKey.path),largestBatchId:L.largestBatchId});var L})))}updateIndexEntries(e,t){const r=new Map;return ge.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?ge.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),ge.forEach(m,w=>this.on(e,o,w).next(b=>{const A=this.un(u,w);return b.isEqual(A)?ge.resolve():this.an(e,u,w,b,A)}))))})}cn(e,t,r,o){return Af(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Af(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Af(e);let u=new En(au);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new ou(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new En(au);const o=this.Ze(t,e);if(null==o)return r;const u=n_(t);if(null!=u){const d=e.data.field(u.fieldPath);if(mo(d))for(const m of d.arrayValue.values||[])r=r.add(new ou(t.indexId,e.key,this.Je(m),o))}else r=r.add(new ou(t.indexId,e.key,N_,o));return r}an(e,t,r,o,u){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,b,A,M){const L=m.getIterator(),G=w.getIterator();let ee=hd(L),Re=hd(G);for(;ee||Re;){let Ze=!1,vt=!1;if(ee&&Re){const Mt=b(ee,Re);Mt<0?vt=!0:Mt>0&&(Ze=!0)}else null!=ee?vt=!0:Ze=!0;Ze?(A(Re),Re=hd(G)):vt?(M(ee),ee=hd(L)):(ee=hd(L),Re=hd(G))}}(o,u,au,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),ge.waitFor(d)}rn(e){let t=1;return O_(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>au(d,m)).filter((d,m,w)=>!m||0!==au(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=au(d,e),w=au(d,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(d),o.push(d.ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,N_,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,N_,[]]));return u}getMinOffset(e,t){let r;return ge.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||dd(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Gs.min()})).next(()=>r)}}function gm(n){return Wr(n,"collectionParents")}function Af(n){return Wr(n,"indexEntries")}function mm(n){return Wr(n,"indexConfiguration")}function O_(n){return Wr(n,"indexState")}const fC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vi(e,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function TI(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(A,M,L)=>(m++,L.delete()));u.push(w.next(()=>{St(1===m)}));const b=[];for(const A of t.mutations){const M=lI(e,A.key.path,t.batchId);u.push(o.delete(M)),b.push(A.key)}return ge.waitFor(u).next(()=>b)}function P_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}Vi.DEFAULT_COLLECTION_PERCENTILE=10,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vi.DEFAULT=new Vi(41943040,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vi.DISABLED=new Vi(-1,0,0);class AI{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){St(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new AI(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Al(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Sf(e),d=Al(e);return d.add({}).next(m=>{St("number"==typeof m);const w=new yI(m,t,r,o),b=function(L,G,ee){const Re=ee.baseMutations.map(vt=>wf(L.Jt,vt)),Ze=ee.mutations.map(vt=>wf(L.Jt,vt));return{userId:G,batchId:ee.batchId,localWriteTimeMs:ee.localWriteTime.toMillis(),baseMutations:Re,mutations:Ze}}(this.M,this.userId,w),A=[];let M=new En((L,G)=>Ft(L.canonicalString(),G.canonicalString()));for(const L of o){const G=lI(this.userId,L.key.path,m);M=M.add(L.key.path.popLast()),A.push(d.put(b)),A.push(u.put(G,JD))}return M.forEach(L=>{A.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),ge.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return Al(e).get(t).next(r=>r?(St(r.userId===this.userId),bs(this.M,r)):null)}fn(e,t){return this.ln[t]?ge.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Al(e).Wt({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(St(m.batchId>=r),u=bs(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Al(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Al(e).qt("userMutationsIndex",t).next(r=>r.map(o=>bs(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=am(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Sf(e).Wt({range:o},(d,m,w)=>{const[b,A,M]=d,L=vo(A);if(b===this.userId&&t.path.isEqual(L))return Al(e).get(M).next(G=>{if(!G)throw ct();St(G.userId===this.userId),u.push(bs(this.M,G))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(Ft);const o=[];return t.forEach(u=>{const d=am(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=Sf(e).Wt({range:m},(b,A,M)=>{const[L,G,ee]=b,Re=vo(G);L===this.userId&&u.path.isEqual(Re)?r=r.add(ee):M.done()});o.push(w)}),ge.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=am(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new En(Ft);return Sf(e).Wt({range:d},(w,b,A)=>{const[M,L,G]=w,ee=vo(L);M===this.userId&&r.isPrefixOf(ee)?ee.length===o&&(m=m.add(G)):A.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Al(e).get(u).next(d=>{if(null===d)throw ct();St(d.userId===this.userId),r.push(bs(this.M,d))}))}),ge.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return TI(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ge.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Sf(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=vo(u[1]);o.push(w)}else m.done()}).next(()=>{St(0===o.length)})})}containsKey(e,t){return pC(e,this.userId,t)}wn(e){return SI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pC(n,e,t){const r=am(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Sf(n).Wt({range:u,jt:!0},(m,w,b)=>{const[A,M,L]=m;A===e&&M===o&&(d=!0),b.done()}).next(()=>d)}function Al(n){return Wr(n,"mutations")}function Sf(n){return Wr(n,"documentMutations")}function SI(n){return Wr(n,"mutationQueues")}class Td{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Td(0)}static yn(){return new Td(-1)}}class oS{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Td(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>bt.fromTimestamp(new sr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Mf(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(St(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Mf(e).Wt((d,m)=>{const w=bd(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>ge.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Mf(e).Wt((r,o)=>{const u=bd(o);t(u)})}pn(e){return gC(e).get("targetGlobalKey").next(t=>(St(null!==t),t))}In(e,t){return gC(e).put("targetGlobalKey",t)}Tn(e,t){return Mf(e).put(hm(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=vl(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Mf(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const b=bd(m);rf(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=i(e);return t.forEach(d=>{const m=ri(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),ge.waitFor(o)}removeMatchingKeys(e,t,r){const o=i(e);return ge.forEach(t,u=>{const d=ri(u.path);return ge.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=i(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=i(e);let u=un();return o.Wt({range:r,jt:!0},(d,m,w)=>{const b=vo(d[1]),A=new Qe(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=ri(t.path),o=IDBKeyRange.bound([r],[xw(r)],!1,!0);let u=0;return i(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],w,b)=>{0!==d&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return Mf(e).get(t).next(r=>r?bd(r):null)}}function Mf(n){return Wr(n,"targets")}function gC(n){return Wr(n,"targetGlobal")}function i(n){return Wr(n,"targetDocuments")}function s(n){return a.apply(this,arguments)}function a(){return a=(0,Ae.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==um)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),a.apply(this,arguments)}function l([n,e],[t,r]){const o=Ft(n,t);return 0===o?Ft(e,r):o}class c{constructor(e){this.An=e,this.buffer=new En(l),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();l(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class p{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;$e("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ae.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Dl(o)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield s(o)}yield t.Sn(e)}))}}class v{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ge.resolve(es.A);const r=new c(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(fC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fC):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,m,w,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),o=this.params.maximumSequenceNumbersToCollect):o=M,d=Date.now(),this.nthSequenceNumber(e,o))).next(M=>(r=M,m=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),Vg()<=Wo.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${M} documents in `+(b-w)+`ms\nTotal Duration: ${b-A}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:M})))}}class E{constructor(e,t){this.db=e,this.garbageCollector=new v(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return I(e,r)}removeReference(e,t,r){return I(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return I(e,t)}On(e,t){return function(r,o){let u=!1;return SI(r).zt(d=>pC(r,d,o).next(m=>(m&&(u=!0),ge.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const w=this.On(e,d).next(b=>{if(!b)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,bt.min()),i(e).delete([0,ri(d.path)])))});o.push(w)}}).next(()=>ge.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return I(e,t)}Mn(e,t){const r=i(e);let o,u=es.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:b})=>{0===d?(u!==es.A&&t(new Qe(vo(o)),u),u=b,o=w):u=es.A}).next(()=>{u!==es.A&&t(new Qe(vo(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function I(n,e){return i(n).put((r=n.currentSequenceNumber,{targetId:0,path:ri(e.path),sequenceNumber:r}));var r}class C{constructor(){this.changes=new Xo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class T{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Q(e).put(r)}removeEntry(e,t,r){return Q(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],dm(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Mn.newInvalidDocument(t);return Q(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(_e(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Mn.newInvalidDocument(t)};return Q(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(_e(t))},(o,u)=>{r={document:this.$n(t,u),size:P_(u)}}).next(()=>r)}getEntries(e,t){let r=ts();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=ts(),o=new Qn(Qe.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),o=o.insert(u,P_(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return ge.resolve();let o=new En(Je);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(_e(o.first()),_e(o.last())),d=o.getIterator();let m=d.getNext();return Q(e).Wt({index:"documentKeyIndex",range:u},(w,b,A)=>{const M=Qe.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&Je(m,M)<0;)r(m,null),m=d.getNext();m&&m.isEqual(M)&&(r(m,b),m=d.hasNext()?d.getNext():null),m?A.Ut(_e(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),dm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Q(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=ts();for(const w of d){const b=this.$n(Qe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(b.key,b)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=ts();const d=Ge(t,r),m=Ge(t,Gs.max());return Q(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,b,A)=>{const M=this.$n(Qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new O(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return H(e).get("remoteDocumentGlobalKey").next(t=>(St(!!t),t))}Fn(e,t){return H(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function aC(n,e){let t;if(e.document)t=rI(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),o=su(e.noDocument.readTime);t=Mn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=Qe.fromSegments(e.unknownDocument.path),o=su(e.unknownDocument.version);t=Mn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new sr(r[0],r[1]);return bt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return Mn.newInvalidDocument(e)}}class O extends C{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Xo(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new En((u,d)=>Ft(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=bf(this.Kn.M,d);o=o.add(u.path.popLast()),r+=P_(w)-m.size,t.push(this.Kn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=bf(this.Kn.M,d.convertToNoDocument(bt.min()));t.push(this.Kn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function H(n){return Wr(n,"remoteDocumentGlobal")}function Q(n){return Wr(n,"remoteDocumentsV14")}function _e(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ge(n,e){const t=e.documentKey.path.toArray();return[n,dm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Je(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Ft(t[u],r[u]),o)return o;return o=Ft(t.length,r.length),o||(o=Ft(t[t.length-2],r[r.length-2]),o||Ft(t[t.length-1],r[r.length-1]))}class ut{constructor(e){this.M=e}kt(e,t,r,o){const u=new cm("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",D_,{unique:!0}),m.createObjectStore("documentMutations"),Ne(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=ge.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Ne(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",D_,{unique:!0});const A=w.store("mutations"),M=b.map(L=>A.put(L));return ge.waitFor(M)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:iC});w.createIndex("collectionPathOverlayIndex",iS,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",T_,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:C_});w.createIndex("documentKeyIndex",bl),w.createIndex("collectionGroupIndex",cI)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:tC}).createIndex("sequenceNumberIndex",nC,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:hI}).createIndex("documentKeyIndex",rC,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=P_(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>ge.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>ge.forEach(m,w=>{St(w.userId===u.userId);const b=bs(this.M,w);return TI(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const w=new Xt(d),b=[0,ri(w)];u.push(t.get(b).next(A=>A?ge.resolve():t.put({targetId:0,path:ri(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ge.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:eC});const r=t.store("collectionParents"),o=new Tf,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:ri(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new Xt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],b)=>{const A=vo(m);return u(A.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=bd(o),d=hm(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(b=d,b.document?new Qe(Xt.fromString(b.document.name).popFirst(5)):b.noDocument?Qe.fromSegments(b.noDocument.path):b.unknownDocument?Qe.fromSegments(b.unknownDocument.path):ct()).path.toArray();var b;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(A))}).next(()=>ge.waitFor(o))}}function Ne(n){n.createObjectStore("targetDocuments",{keyPath:XD}).createIndex("documentTargetsIndex",rS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",dI,{unique:!0}),n.createObjectStore("targetGlobal")}const yt="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class zt{constructor(e,t,r,o,u,d,m,w,b,A,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=b,this.Zn=A,this.ts=M,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=L=>Promise.resolve(),!zt.vt())throw new Pe(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new E(this,o),this.hs=t+"main",this.M=new oC(w),this.ls=new Is(this.hs,this.ts,new ut(this.M)),this.fs=new oS(this.referenceDelegate,this.M),this.ds=new T(this.M),this._s=new R_,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===A&&mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(fe.FAILED_PRECONDITION,yt);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new es(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ae.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ae.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ae.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gi(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Dl(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return tn(e).get("owner").next(t=>ge.resolve(this.Ps(t)))}Vs(e){return gi(e).delete(this.clientId)}vs(){var e=this;return(0,Ae.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Wr(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return ge.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ge.resolve(!0):tn(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Pe(fe.FAILED_PRECONDITION,yt);return!1}}return!(!this.networkEnabled||!this.inForeground)||gi(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ae.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new mI(t,es.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>gi(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return AI.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new CI(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return EI.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){$e("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?pI:13===d?fI:12===d?sC:11===d?A_:void ct();var d;let m;return this.ls.runTransaction(e,o,u,w=>(m=new mI(w,this.es?this.es.next():es.A),"readwrite-primary"===t?this.Es(m).next(b=>!!b||this.As(m)).next(b=>{if(!b)throw mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(fe.FAILED_PRECONDITION,um);return r(m)}).next(b=>this.bs(m).next(()=>b)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return tn(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(fe.FAILED_PRECONDITION,yt)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tn(e).put("owner",t)}static vt(){return Is.vt()}Rs(e){const t=tn(e);return t.get("owner").next(r=>this.Ps(r)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ge.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,qt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return $e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){mr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tn(n){return Wr(n,"owner")}function gi(n){return Wr(n,"clientMetadata")}function ta(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class k_{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):Jg(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new Qe(t)).next(r=>{let o=g_();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=g_();return this.indexManager.getCollectionParents(e,o).next(d=>ge.forEach(d,m=>{const w=(b=t,A=m.child(o),new yo(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.zs(e,w,r).next(b=>{b.forEach((A,M)=>{u=u.insert(A,M)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const w=m.key;let b=o.get(w);null==b&&(b=Mn.newInvalidDocument(w),o=o.insert(w,b)),nm(m,b,d.localWriteTime),b.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((u,d)=>{Xg(t,d)||(o=o.remove(u))}),o))}}class xf{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=un(),o=un();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new xf(e,t.fromCache,r,o)}}class ym{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return ge.resolve(null)}ei(e,t,r,o){return function YA(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(bt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const d=this.si(t,u);return this.ii(t,d,r,o)?this.ni(e,t):(Vg()<=Wo.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),o_(t)),this.ri(e,d,t,Uw(o,-1)))})}si(e,t){let r=new En(a_(e));return t.forEach((o,u)=>{Xg(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return Vg()<=Wo.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",o_(t)),this.Zs.Qs(e,t,Gs.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class F_{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new Qn(Ft),this.ai=new Xo(u=>vl(u),rf),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new k_(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function vm(n,e,t,r){return new F_(n,e,t,r)}function _m(n,e){return Rf.apply(this,arguments)}function Rf(){return Rf=(0,Ae.Z)(function*(n,e){const t=tt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=un();for(const b of o){d.push(b.batchId);for(const A of b.mutations)w=w.add(A.key)}for(const b of u){m.push(b.batchId);for(const A of b.mutations)w=w.add(A.key)}return t.fi.Ks(r,w).next(b=>({di:b,removedBatchIds:d,addedBatchIds:m}))})})}),Rf.apply(this,arguments)}function L_(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,b){const A=w.batch,M=A.keys();let L=ge.resolve();return M.forEach(G=>{L=L.next(()=>b.getEntry(m,G)).next(ee=>{const Re=w.docVersions.get(G);St(null!==Re),ee.version.compareTo(Re)<0&&(A.applyToRemoteDocument(ee,w),ee.isValidDocument()&&(ee.setReadTime(w.commitVersion),b.addEntry(ee)))})}),L.next(()=>d.Bs.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function Em(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function xx(n,e){const t=tt(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const m=[];e.targetChanges.forEach((b,A)=>{const M=o.get(A);if(!M)return;m.push(t.fs.removeMatchingKeys(u,b.removedDocuments,A).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,A)));let L=M.withSequenceNumber(u.currentSequenceNumber);var G,ee,Re;e.targetMismatches.has(A)?L=L.withResumeToken(Nr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):b.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(b.resumeToken,r)),o=o.insert(A,L),ee=L,Re=b,(0===(G=M).resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||Re.addedDocuments.size+Re.modifiedDocuments.size+Re.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,L))});let w=ts();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),m.push(aS(u,d,e.documentUpdates).next(b=>{w=b})),!r.isEqual(bt.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(A=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(b)}return ge.waitFor(m).next(()=>d.apply(u)).next(()=>t.fi.Gs(u,w)).next(()=>w)}).then(u=>(t.ui=o,u))}function aS(n,e,t){let r=un();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=ts();return t.forEach((d,m)=>{const w=o.get(d);m.isNoDocument()&&m.version.isEqual(bt.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):$e("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),u})}function Rx(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function wm(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,ge.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new Cl(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function Im(n,e,t){return mC.apply(this,arguments)}function mC(){return mC=(0,Ae.Z)(function*(n,e,t){const r=tt(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Dl(d))throw d;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}),mC.apply(this,arguments)}function MI(n,e,t){const r=tt(n);let o=bt.min(),u=un();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,b){const A=tt(m),M=A.ai.get(b);return void 0!==M?ge.resolve(A.ui.get(M)):A.fs.getTargetData(w,b)}(r,d,Li(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.oi.Qs(d,e,t?o:bt.min(),t?u:un())).next(m=>(cS(r,em(e),m),{documents:m,_i:u})))}function uS(n,e){const t=tt(n),r=tt(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function lS(n,e){const t=tt(n),r=t.ci.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,Uw(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(cS(t,e,o),o))}function cS(n,e,t){let r=bt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function yC(){return yC=(0,Ae.Z)(function*(n,e,t,r){const o=tt(n);let u=un(),d=ts();for(const b of t){const A=e.wi(b.metadata.name);b.document&&(u=u.add(A));const M=e.mi(b);M.setReadTime(e.gi(b.metadata.readTime)),d=d.insert(A,M)}const m=o.hi.newChangeBuffer({trackRemovals:!0}),w=yield wm(o,(b=r,Li(pd(Xt.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>aS(b,m,d).next(A=>(m.apply(b),A)).next(A=>o.fs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>o.fs.addMatchingKeys(b,u,w.targetId)).next(()=>o.fi.Gs(b,A)).next(()=>A)))}),yC.apply(this,arguments)}function Ox(n,e){return vC.apply(this,arguments)}function vC(){return vC=(0,Ae.Z)(function*(n,e,t=un()){const r=yield wm(n,Li(Df(e.bundledQuery))),o=tt(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=Pr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(Nr.EMPTY_BYTE_STRING,d);return o.ui=o.ui.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),vC.apply(this,arguments)}class Px{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return ge.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Pr(r.createTime)}),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Df(r.bundledQuery),readTime:Pr(r.readTime)}),ge.resolve();var r}}class kx{constructor(){this.overlays=new Qn(Qe.comparator),this.Ii=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),ge.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const o=pf(),u=t.length+1,d=new Qe(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return ge.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Qn((b,A)=>b-A);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=pf(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const m=pf(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,A)=>m.set(b,A)),!(m.size()>=o)););return ge.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new _I(t,r));let u=this.Ii.get(t);void 0===u&&(u=un(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class _C{constructor(){this.Ti=new En(mi.Ei),this.Ai=new En(mi.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new mi(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new mi(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Qe(new Xt([])),r=new mi(t,e),o=new mi(t,e+1),u=[];return this.Ai.forEachInRange([r,o],d=>{this.Pi(d),u.push(d.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Qe(new Xt([])),r=new mi(t,e),o=new mi(t,e+1);let u=un();return this.Ai.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new mi(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class mi{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Qe.comparator(e.key,t.key)||Ft(e.Ci,t.Ci)}static Ri(e,t){return Ft(e.Ci,t.Ci)||Qe.comparator(e.key,t.key)}}class Fx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new En(mi.Ei)}checkEmpty(e){return ge.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const d=new yI(u,t,r,o);this.Bs.push(d);for(const m of o)this.Ni=this.Ni.add(new mi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ge.resolve(d)}lookupMutationBatch(e,t){return ge.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return ge.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return ge.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new mi(t,0),o=new mi(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],d=>{const m=this.ki(d.Ci);u.push(m)}),ge.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(Ft);return t.forEach(o=>{const u=new mi(o,0),d=new mi(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,d],m=>{r=r.add(m.Ci)})}),ge.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Qe.isDocumentKey(u)||(u=u.child(""));const d=new mi(new Qe(u),0);let m=new En(Ft);return this.Ni.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(w.Ci)),!0)},d),ge.resolve(this.Oi(m))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){St(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return ge.forEach(t.mutations,o=>{const u=new mi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new mi(t,0),o=this.Ni.firstAfterOrEqual(r);return ge.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ge.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Lx{constructor(e){this.$i=e,this.docs=new Qn(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():Mn.newInvalidDocument(t))}getEntries(e,t){let r=ts();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Mn.newInvalidDocument(o))}),ge.resolve(r)}getAllFromCollection(e,t,r){let o=ts();const u=new Qe(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||dd(SD(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return ge.resolve(o)}getAllFromCollectionGroup(e,t,r,o){ct()}Bi(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Vx(this)}getSize(e){return ge.resolve(this.size)}}class Vx extends C{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Ux{constructor(e){this.persistence=e,this.Li=new Xo(t=>vl(t),rf),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new _C,this.targetCount=0,this.Ki=Td.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),ge.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Td(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Tn(t),ge.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Li.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ge.waitFor(u).next(()=>o)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),ge.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this.qi.containsKey(t))}}class Bx{constructor(e,t){this.Gi={},this.overlays={},this.es=new es(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Ux(this),this.indexManager=new DI,this.ds=new Lx(r=>this.referenceDelegate.Qi(r)),this.M=new oC(t),this._s=new Px(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new Fx(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const o=new jx(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return ge.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class jx extends lm{constructor(e){super(),this.currentSequenceNumber=e}}class EC{constructor(e){this.persistence=e,this.Hi=new _C,this.Ji=null}static Yi(e){return new EC(e)}get Xi(){if(this.Ji)return this.Ji;throw ct()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Xi,r=>{const o=Qe.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,bt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return ge.or([()=>ge.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function dS(n,e){return`firestore_clients_${n}_${e}`}function hS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function wC(n,e){return`firestore_targets_${n}_${e}`}class xI{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Pe(o.error.code,o.error.message))),d?new xI(e,t,o.state,u):(mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class V_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Pe(r.error.code,r.error.message))),u?new V_(e,r.state,o):(mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class RI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=gf();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=Hg(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new RI(e,u):(mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class IC{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new IC(t.clientId,t.onlineState):(mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bC{constructor(){this.activeTargetIds=gf()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DC{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Qn(Ft),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=dS(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new bC),this.dr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(dS(e.persistenceKey,o));if(u){const d=RI.tr(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(wC(this.persistenceKey,e));if(r){const o=V_.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wC(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if($e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ae.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let d=es.A;if(null!=u)try{const m=JSON.parse(u);St("number"==typeof m),d=m}catch(m){mr("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==es.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new xI(this.currentUser,e,t,r),u=hS(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=hS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=wC(this.persistenceKey,e),u=new V_(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return RI.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return xI.tr(new Rr(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return V_.tr(o,t)}pr(e){return IC.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Lr(d,m).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=gf();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class fS{constructor(){this.Ur=new bC,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new bC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Hx{Kr(e){}shutdown(){}}class pS{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const $x={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Gx{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class qx extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ho(e,t);$e("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(w=>($e("RestConnection","Received: ",w),w),w=>{throw pl("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+nd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${$x[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new Cw;m.listenOnce(_D.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Qa.NO_ERROR:const b=m.getResponseJson();$e("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Qa.TIMEOUT:$e("Connection",'RPC "'+e+'" timed out'),d(new Pe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Qa.HTTP_ERROR:const A=m.getStatus();if($e("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){const M=m.getResponseJson().error;if(M&&M.status&&M.message){const L=function(G){const ee=G.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(ee)>=0?ee:fe.UNKNOWN}(M.status);d(new Pe(L,M.message))}else d(new Pe(fe.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Pe(fe.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{$e("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=yD(),d=vD(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new Dw({})),this.lo(m.initMessageHeaders,t,r),(0,qt.uI)()||(0,qt.b$)()||(0,qt.d)()||(0,qt.w1)()||(0,qt.Mn)()||(0,qt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");$e("Connection","Creating WebChannel: "+w,m);const b=u.createWebChannel(w,m);let A=!1,M=!1;const L=new Gx({Jr:ee=>{M?$e("Connection","Not sending because WebChannel is closed:",ee):(A||($e("Connection","Opening WebChannel transport."),b.open(),A=!0),$e("Connection","WebChannel sending:",ee),b.send(ee))},Yr:()=>b.close()}),G=(ee,Re,Ze)=>{ee.listen(Re,vt=>{try{Ze(vt)}catch(Mt){setTimeout(()=>{throw Mt},0)}})};return G(b,Lg.EventType.OPEN,()=>{M||$e("Connection","WebChannel transport opened.")}),G(b,Lg.EventType.CLOSE,()=>{M||(M=!0,$e("Connection","WebChannel transport closed"),L.ro())}),G(b,Lg.EventType.ERROR,ee=>{M||(M=!0,pl("Connection","WebChannel transport errored:",ee),L.ro(new Pe(fe.UNAVAILABLE,"The operation could not be completed")))}),G(b,Lg.EventType.MESSAGE,ee=>{var Re;if(!M){const Ze=ee.data[0];St(!!Ze);const vt=Ze,Mt=vt.error||(null===(Re=vt[0])||void 0===Re?void 0:Re.error);if(Mt){$e("Connection","WebChannel received error:",Mt);const Yt=Mt.status;let Lt=function(yn){const Bi=Or[yn];if(void 0!==Bi)return p_(Bi)}(Yt),Qt=Mt.message;void 0===Lt&&(Lt=fe.INTERNAL,Qt="Unknown error status: "+Yt+" with message "+Mt.message),M=!0,L.ro(new Pe(Lt,Qt)),b.close()}else $e("Connection","WebChannel received:",Ze),L.oo(Ze)}}),G(d,Iw.STAT_EVENT,ee=>{ee.stat===bw.PROXY?$e("Connection","Detected buffering proxy"):ee.stat===bw.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.io()},0),L}}function gS(){return"undefined"!=typeof window?window:null}function NI(){return"undefined"!=typeof document?document:null}function U_(n){return new eS(n,!0)}class CC{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&$e("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class mS{constructor(e,t,r,o,u,d,m,w){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new CC(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ae.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ae.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Ae.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new Pe(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ae.Z)(function*(){e.state=0,e.start()}))}jo(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zx extends mS{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function E_(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:ct(),o=e.targetChange.targetIds||[],u=function(w,b){return w.N?(St(void 0===b||"string"==typeof b),Nr.fromBase64String(b||"")):(St(void 0===b||b instanceof Uint8Array),Nr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const b=void 0===w.code?fe.UNKNOWN:p_(w.code);return new Pe(b,w.message||"")}(d);t=new m_(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=ea(n,r.document.name),u=Pr(r.document.updateTime),d=new qr({mapValue:{fields:r.document.fields}}),m=Mn.newFoundDocument(o,u,d);t=new sm(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=ea(n,r.document),u=r.readTime?Pr(r.readTime):bt.min(),d=Mn.newNoDocument(o,u);t=new sm([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=ea(n,r.document);t=new sm([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return ct();{const r=e.filter,u=new f_(r.count||0);t=new BD(r.targetId,u)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return bt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?bt.min():u.readTime?Pr(u.readTime):bt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Ef(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=Wg(m)?{documents:zD(o,m)}:{query:sI(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=yf(o,u.resumeToken):u.snapshotVersion.compareTo(bt.min())>0&&(d.readTime=om(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function WD(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ct()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Ef(this.M),t.removeTarget=e,this.Lo(t)}}class Wx extends mS{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function nS(n,e){return n&&n.length>0?(St(void 0!==e),n.map(t=>function(r,o){let u=Pr(r.updateTime?r.updateTime:o);return u.isEqual(bt.min())&&(u=Pr(o)),new Qw(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.tu(r,t)}return St(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Ef(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>wf(this.M,r))};this.Lo(t)}}class Zx extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(fe.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(fe.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class Kx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(mr(t),this.uu=!1):$e("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Yx{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(m=>{r.enqueueAndForget((0,Ae.Z)(function*(){var w;Ad(d)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,Ae.Z)(function*(b){const A=tt(b);A.wu.add(4),yield bm(A),A.yu.set("Unknown"),A.wu.delete(4),yield B_(A)}),function(b){return w.apply(this,arguments)})(d))}))}),this.yu=new Kx(r,o)}}function B_(n){return TC.apply(this,arguments)}function TC(){return TC=(0,Ae.Z)(function*(n){if(Ad(n))for(const e of n.mu)yield e(!0)}),TC.apply(this,arguments)}function bm(n){return AC.apply(this,arguments)}function AC(){return AC=(0,Ae.Z)(function*(n){for(const e of n.mu)yield e(!1)}),AC.apply(this,arguments)}function OI(n,e){const t=tt(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),xC(t)?MC(t):Cm(t).Mo()&&SC(t,e))}function j_(n,e){const t=tt(n),r=Cm(t);t._u.delete(e),r.Mo()&&yS(t,e),0===t._u.size&&(r.Mo()?r.$o():Ad(t)&&t.yu.set("Unknown"))}function SC(n,e){n.pu.Z(e.targetId),Cm(n).Ho(e)}function yS(n,e){n.pu.Z(e),Cm(n).Jo(e)}function MC(n){n.pu=new QA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Cm(n).start(),n.yu.au()}function xC(n){return Ad(n)&&!Cm(n).ko()&&n._u.size>0}function Ad(n){return 0===tt(n).wu.size}function vS(n){n.pu=void 0}function Qx(n){return RC.apply(this,arguments)}function RC(){return RC=(0,Ae.Z)(function*(n){n._u.forEach((e,t)=>{SC(n,e)})}),RC.apply(this,arguments)}function Jx(n,e){return NC.apply(this,arguments)}function NC(){return NC=(0,Ae.Z)(function*(n,e){vS(n),xC(n)?(n.yu.lu(e),MC(n)):n.yu.set("Unknown")}),NC.apply(this,arguments)}function Xx(n,e,t){return OC.apply(this,arguments)}function OC(){return OC=(0,Ae.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof m_&&2===e.state&&e.cause)try{yield(r=(0,Ae.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o._u.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o._u.delete(m),o.pu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield PI(n,r)}else if(e instanceof sm?n.pu.ut(e):e instanceof BD?n.pu._t(e):n.pu.ht(e),!t.isEqual(bt.min()))try{const r=yield Em(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.pu.yt(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=o._u.get(w);b&&o._u.set(w,b.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o._u.get(m);if(!w)return;o._u.set(m,w.withResumeToken(Nr.EMPTY_BYTE_STRING,w.snapshotVersion)),yS(o,m);const b=new Cl(w.target,m,1,w.sequenceNumber);SC(o,b)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield PI(n,r)}var r}),OC.apply(this,arguments)}function PI(n,e,t){return PC.apply(this,arguments)}function PC(){return PC=(0,Ae.Z)(function*(n,e,t){if(!Dl(e))throw e;n.wu.add(1),yield bm(n),n.yu.set("Offline"),t||(t=()=>Em(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ae.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield B_(n)}))}),PC.apply(this,arguments)}function _S(n,e){return e().catch(t=>PI(n,t,e))}function Dm(n){return kC.apply(this,arguments)}function kC(){return kC=(0,Ae.Z)(function*(n){const e=tt(n),t=Sd(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;eR(e);)try{const o=yield Rx(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,tR(e,o)}catch(o){yield PI(e,o)}ES(e)&&wS(e)}),kC.apply(this,arguments)}function eR(n){return Ad(n)&&n.du.length<10}function tR(n,e){n.du.push(e);const t=Sd(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function ES(n){return Ad(n)&&!Sd(n).ko()&&n.du.length>0}function wS(n){Sd(n).start()}function nR(n){return FC.apply(this,arguments)}function FC(){return FC=(0,Ae.Z)(function*(n){Sd(n).nu()}),FC.apply(this,arguments)}function rR(n){return LC.apply(this,arguments)}function LC(){return LC=(0,Ae.Z)(function*(n){const e=Sd(n);for(const t of n.du)e.Zo(t.mutations)}),LC.apply(this,arguments)}function iR(n,e,t){return VC.apply(this,arguments)}function VC(){return VC=(0,Ae.Z)(function*(n,e,t){const r=n.du.shift(),o=vI.from(r,e,t);yield _S(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Dm(n)}),VC.apply(this,arguments)}function sR(n,e){return UC.apply(this,arguments)}function UC(){return UC=(0,Ae.Z)(function*(n,e){var t;e&&Sd(n).Xo&&(yield(t=(0,Ae.Z)(function*(r,o){if(Xw(u=o.code)&&u!==fe.ABORTED){const d=r.du.shift();Sd(r).Fo(),yield _S(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Dm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),ES(n)&&wS(n)}),UC.apply(this,arguments)}function IS(n,e){return BC.apply(this,arguments)}function BC(){return BC=(0,Ae.Z)(function*(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=Ad(t);t.wu.add(3),yield bm(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield B_(t)}),BC.apply(this,arguments)}function jC(n,e){return HC.apply(this,arguments)}function HC(){return HC=(0,Ae.Z)(function*(n,e){const t=tt(n);e?(t.wu.delete(2),yield B_(t)):e||(t.wu.add(2),yield bm(t),t.yu.set("Unknown"))}),HC.apply(this,arguments)}function Cm(n){return n.Iu||(n.Iu=function(e,t,r){const o=tt(e);return o.iu(),new zx(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:Qx.bind(null,n),eo:Jx.bind(null,n),zo:Xx.bind(null,n)}),n.mu.push(function(){var e=(0,Ae.Z)(function*(t){t?(n.Iu.Fo(),xC(n)?MC(n):n.yu.set("Unknown")):(yield n.Iu.stop(),vS(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Sd(n){return n.Tu||(n.Tu=function(e,t,r){const o=tt(e);return o.iu(),new Wx(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:nR.bind(null,n),eo:sR.bind(null,n),eu:rR.bind(null,n),tu:iR.bind(null,n)}),n.mu.push(function(){var e=(0,Ae.Z)(function*(t){t?(n.Tu.Fo(),yield Dm(n)):(yield n.Tu.stop(),n.du.length>0&&($e("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class $C{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new $C(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tm(n,e){if(mr("AsyncQueue",`${e}: ${n}`),Dl(n))return new Pe(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Am{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=g_(),this.sortedSet=new Qn(this.comparator)}static emptySet(e){return new Am(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Am)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Am;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class bS{constructor(){this.Eu=new Qn(Qe.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ct():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Sm{constructor(e,t,r,o,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Sm(e,t,Am.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class oR{constructor(){this.Ru=void 0,this.listeners=[]}}class aR{constructor(){this.queries=new Xo(e=>zw(e),uf),this.onlineState="Unknown",this.bu=new Set}}function GC(n,e){return qC.apply(this,arguments)}function qC(){return qC=(0,Ae.Z)(function*(n,e){const t=tt(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new oR),o)try{u.Ru=yield t.onListen(r)}catch(d){const m=Tm(d,`Initialization of query '${o_(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&ZC(t)}),qC.apply(this,arguments)}function zC(n,e){return WC.apply(this,arguments)}function WC(){return WC=(0,Ae.Z)(function*(n,e){const t=tt(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),WC.apply(this,arguments)}function uR(n,e){const t=tt(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Vu(o)&&(r=!0);d.Ru=o}}r&&ZC(t)}function lR(n,e,t){const r=tt(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function ZC(n){n.bu.forEach(e=>{e.next()})}class KC{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Sm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Sm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class cR{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class DS{constructor(e){this.M=e}wi(e){return ea(this.M,e)}mi(e){return e.metadata.exists?rI(this.M,e.document,!1):Mn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Pr(e)}}class dR{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CS(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Xt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new DS(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||un()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,Ae.Z)(function*(){const t=yield function Nx(n,e,t,r){return yC.apply(this,arguments)}(e.localStore,new DS(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield Ox(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function CS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class TS{constructor(e){this.key=e}}class AS{constructor(e){this.key=e}}class SS{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=un(),this.mutatedKeys=un(),this.Gu=a_(e),this.Qu=new Am(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new bS,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,M)=>{const L=o.get(A),G=Xg(this.query,M)?M:null,ee=!!L&&this.mutatedKeys.has(L.key),Re=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Ze=!1;L&&G?L.data.isEqual(G.data)?ee!==Re&&(r.track({type:3,doc:G}),Ze=!0):this.Hu(L,G)||(r.track({type:2,doc:G}),Ze=!0,(w&&this.Gu(G,w)>0||b&&this.Gu(G,b)<0)&&(m=!0)):!L&&G?(r.track({type:0,doc:G}),Ze=!0):L&&!G&&(r.track({type:1,doc:L}),Ze=!0,(w||b)&&(m=!0)),Ze&&(G?(d=d.add(G),u=Re?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:d,zu:r,ii:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((b,A)=>function(M,L){const G=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return G(M)-G(L)}(b.type,A.type)||this.Gu(b.doc,A.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new Sm(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new bS,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=un(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new AS(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new TS(r))}),t}ta(e){this.Uu=e._i,this.Ku=un();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Sm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class hR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class fR{constructor(e){this.key=e,this.na=!1}}class pR{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sa={},this.ia=new Xo(m=>zw(m),uf),this.ra=new Map,this.oa=new Set,this.ua=new Qn(Qe.comparator),this.aa=new Map,this.ca=new _C,this.ha={},this.la=new Map,this.fa=Td.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function gR(n,e){return YC.apply(this,arguments)}function YC(){return YC=(0,Ae.Z)(function*(n,e){const t=_T(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const d=yield wm(t.localStore,Li(e));t.isPrimaryClient&&OI(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield QC(t,e,r,"current"===m)}return o}),YC.apply(this,arguments)}function QC(n,e,t,r){return JC.apply(this,arguments)}function JC(){return JC=(0,Ae.Z)(function*(n,e,t,r){n._a=(A,M,L)=>{return(G=(0,Ae.Z)(function*(ee,Re,Ze,vt){let Mt=Re.view.Wu(Ze);Mt.ii&&(Mt=yield MI(ee.localStore,Re.query,!1).then(({documents:Qt})=>Re.view.Wu(Qt,Mt)));const Yt=vt&&vt.targetChanges.get(Re.targetId),Lt=Re.view.applyChanges(Mt,ee.isPrimaryClient,Yt);return uT(ee,Re.targetId,Lt.Xu),Lt.snapshot}),function(ee,Re,Ze,vt){return G.apply(this,arguments)})(n,A,M,L);var G};const o=yield MI(n.localStore,e,!0),u=new SS(e,o._i),d=u.Wu(o.documents),m=mf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);uT(n,t,w.Xu);const b=new hR(e,t,u);return n.ia.set(e,b),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),w.snapshot}),JC.apply(this,arguments)}function mR(n,e){return XC.apply(this,arguments)}function XC(){return XC=(0,Ae.Z)(function*(n,e){const t=tt(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!uf(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Im(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),j_(t.remoteStore,r.targetId),Mm(t,r.targetId)}).catch(s))):(Mm(t,r.targetId),yield Im(t.localStore,r.targetId,!0))}),XC.apply(this,arguments)}function eT(){return eT=(0,Ae.Z)(function*(n,e,t){const r=ET(n);try{const o=yield function(u,d){const m=tt(u),w=sr.now(),b=d.reduce((M,L)=>M.add(L.key),un());let A;return m.persistence.runTransaction("Locally write mutations","readwrite",M=>m.fi.Ks(M,b).next(L=>{A=L;const G=[];for(const ee of d){const Re=rm(ee,A.get(ee.key));null!=Re&&G.push(new Il(ee.key,Re,Vw(Re.value.mapValue),yr.exists(!0)))}return m.Bs.addMutationBatch(M,w,G,d)})).then(M=>(M.applyToLocalDocumentSet(A),{batchId:M.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.ha[u.currentUser.toKey()];w||(w=new Qn(Ft)),w=w.insert(d,m),u.ha[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Sl(r,o.changes),yield Dm(r.remoteStore)}catch(o){const u=Tm(o,"Failed to persist write");t.reject(u)}}),eT.apply(this,arguments)}function MS(n,e){return tT.apply(this,arguments)}function tT(){return tT=(0,Ae.Z)(function*(n,e){const t=tt(n);try{const r=yield xx(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.aa.get(u);d&&(St(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.na=!0:o.modifiedDocuments.size>0?St(d.na):o.removedDocuments.size>0&&(St(d.na),d.na=!1))}),yield Sl(t,r,e)}catch(r){yield s(r)}}),tT.apply(this,arguments)}function xS(n,e,t){const r=tt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,d)=>{const m=d.view.Pu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=tt(u);m.onlineState=d;let w=!1;m.queries.forEach((b,A)=>{for(const M of A.listeners)M.Pu(d)&&(w=!0)}),w&&ZC(m)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function vR(n,e,t){return nT.apply(this,arguments)}function nT(){return nT=(0,Ae.Z)(function*(n,e,t){const r=tt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let d=new Qn(Qe.comparator);d=d.insert(u,Mn.newNoDocument(u,bt.min()));const m=un().add(u),w=new _d(bt.min(),new Map,new En(Ft),d,m);yield MS(r,w),r.ua=r.ua.remove(u),r.aa.delete(e),lT(r)}else yield Im(r.localStore,e,!1).then(()=>Mm(r,e,t)).catch(s)}),nT.apply(this,arguments)}function _R(n,e){return rT.apply(this,arguments)}function rT(){return rT=(0,Ae.Z)(function*(n,e){const t=tt(n),r=e.batch.batchId;try{const o=yield L_(t.localStore,e);aT(t,r,null),oT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Sl(t,o)}catch(o){yield s(o)}}),rT.apply(this,arguments)}function ER(n,e,t){return iT.apply(this,arguments)}function iT(){return iT=(0,Ae.Z)(function*(n,e,t){const r=tt(n);try{const o=yield function(u,d){const m=tt(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.Bs.lookupMutationBatch(w,d).next(A=>(St(null!==A),b=A.keys(),m.Bs.removeMutationBatch(w,A))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.fi.Ks(w,b))})}(r.localStore,e);aT(r,e,t),oT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Sl(r,o)}catch(o){yield s(o)}}),iT.apply(this,arguments)}function sT(){return sT=(0,Ae.Z)(function*(n,e){const t=tt(n);Ad(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=tt(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=Tm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),sT.apply(this,arguments)}function oT(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function aT(n,e,t){const r=tt(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function Mm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||RS(n,r)})}function RS(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(j_(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),lT(n))}function uT(n,e,t){for(const r of t)r instanceof TS?(n.ca.addReference(r.key,e),IR(n,r)):r instanceof AS?($e("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||RS(n,r.key)):ct()}function IR(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||($e("SyncEngine","New document in limbo: "+t),n.oa.add(r),lT(n))}function lT(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Qe(Xt.fromString(e)),r=n.fa.next();n.aa.set(r,new fR(t)),n.ua=n.ua.insert(t,r),OI(n.remoteStore,new Cl(Li(pd(t.path)),r,2,es.A))}}function Sl(n,e,t){return cT.apply(this,arguments)}function cT(){return cT=(0,Ae.Z)(function*(n,e,t){const r=tt(n),o=[],u=[],d=[];var m;r.ia.isEmpty()||(r.ia.forEach((m,w)=>{d.push(r._a(w,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b.fromCache?"not-current":"current"),o.push(b);const A=xf.Ys(w.targetId,b);u.push(A)}}))}),yield Promise.all(d),r.sa.zo(o),yield(m=(0,Ae.Z)(function*(w,b){const A=tt(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>ge.forEach(b,L=>ge.forEach(L.Hs,G=>A.persistence.referenceDelegate.addReference(M,L.targetId,G)).next(()=>ge.forEach(L.Js,G=>A.persistence.referenceDelegate.removeReference(M,L.targetId,G)))))}catch(M){if(!Dl(M))throw M;$e("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const L=M.targetId;if(!M.fromCache){const G=A.ui.get(L),Re=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);A.ui=A.ui.insert(L,Re)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),cT.apply(this,arguments)}function bR(n,e){return dT.apply(this,arguments)}function dT(){return dT=(0,Ae.Z)(function*(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const r=yield _m(t.localStore,e);t.currentUser=e,(o=t).la.forEach(d=>{d.forEach(m=>{m.reject(new Pe(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Sl(t,r.di)}var o}),dT.apply(this,arguments)}function DR(n,e){const t=tt(n),r=t.aa.get(e);if(r&&r.na)return un().add(r.key);{let o=un();const u=t.ra.get(e);if(!u)return o;for(const d of u){const m=t.ia.get(d);o=o.unionWith(m.view.ju)}return o}}function CR(n,e){return hT.apply(this,arguments)}function hT(){return hT=(0,Ae.Z)(function*(n,e){const t=tt(n),r=yield MI(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&uT(t,e.targetId,o.Xu),o}),hT.apply(this,arguments)}function TR(n,e){return fT.apply(this,arguments)}function fT(){return fT=(0,Ae.Z)(function*(n,e){const t=tt(n);return lS(t.localStore,e).then(r=>Sl(t,r))}),fT.apply(this,arguments)}function AR(n,e,t,r){return pT.apply(this,arguments)}function pT(){return pT=(0,Ae.Z)(function*(n,e,t,r){const o=tt(n),u=yield function(d,m){const w=tt(d),b=tt(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.fn(A,m).next(M=>M?w.fi.Ks(A,M):ge.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Dm(o.remoteStore):"acknowledged"===t||"rejected"===t?(aT(o,e,r||null),oT(o,e),m=e,tt(tt(o.localStore).Bs)._n(m)):ct(),yield Sl(o,u)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),pT.apply(this,arguments)}function gT(){return gT=(0,Ae.Z)(function*(n,e){const t=tt(n);if(_T(t),ET(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield NS(t,r.toArray());t.da=!0,yield jC(t.remoteStore,!0);for(const u of o)OI(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Mm(t,d),Im(t.localStore,d,!0))),j_(t.remoteStore,d)}),yield o,yield NS(t,r),function(u){const d=tt(u);d.aa.forEach((m,w)=>{j_(d.remoteStore,w)}),d.ca.Si(),d.aa=new Map,d.ua=new Qn(Qe.comparator)}(t),t.da=!1,yield jC(t.remoteStore,!1)}}),gT.apply(this,arguments)}function NS(n,e,t){return mT.apply(this,arguments)}function mT(){return mT=(0,Ae.Z)(function*(n,e,t){const r=tt(n),o=[],u=[];for(const d of e){let m;const w=r.ra.get(d);if(w&&0!==w.length){m=yield wm(r.localStore,Li(w[0]));for(const b of w){const A=r.ia.get(b),M=yield CR(r,A);M.snapshot&&u.push(M.snapshot)}}else{const b=yield uS(r.localStore,d);m=yield wm(r.localStore,b),yield QC(r,OS(b),d,!1)}o.push(m)}return r.sa.zo(u),o}),mT.apply(this,arguments)}function OS(n){return Gw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function MR(n){const e=tt(n);return tt(tt(e.localStore).persistence).Fs()}function xR(n,e,t,r){return yT.apply(this,arguments)}function yT(){return yT=(0,Ae.Z)(function*(n,e,t,r){const o=tt(n);if(o.da)return void $e("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield lS(o.localStore,em(u[0])),m=_d.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Sl(o,d,m);break}case"rejected":yield Im(o.localStore,e,!0),Mm(o,e,r);break;default:ct()}}),yT.apply(this,arguments)}function RR(n,e,t){return vT.apply(this,arguments)}function vT(){return vT=(0,Ae.Z)(function*(n,e,t){const r=_T(n);if(r.da){for(const o of e){if(r.ra.has(o)){$e("SyncEngine","Adding an already active target "+o);continue}const u=yield uS(r.localStore,o),d=yield wm(r.localStore,u);yield QC(r,OS(u),d.targetId,!1),OI(r.remoteStore,d)}for(const o of t)r.ra.has(o)&&(yield Im(r.localStore,o,!1).then(()=>{j_(r.remoteStore,o),Mm(r,o)}).catch(s))}}),vT.apply(this,arguments)}function _T(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vR.bind(null,e),e.sa.zo=uR.bind(null,e.eventManager),e.sa.wa=lR.bind(null,e.eventManager),e}function ET(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_R.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ER.bind(null,e),e}class PS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ae.Z)(function*(){t.M=U_(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return vm(this.persistence,new ym,e.initialUser,this.M)}ya(e){return new Bx(EC.Yi,this.M)}ga(e){return new fS}terminate(){var e=this;return(0,Ae.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class kS extends PS{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ae.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield ET(r.Ta.syncEngine),yield Dm(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return vm(this.persistence,new ym,e.initialUser,this.M)}pa(e){return new p(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=ta(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Vi.withCacheSize(this.cacheSizeBytes):Vi.DEFAULT;return new zt(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,gS(),NI(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new fS}}class OR extends kS{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ae.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof DC&&(r.sharedClientState.syncEngine={$r:AR.bind(null,o),Br:xR.bind(null,o),Lr:RR.bind(null,o),Fs:MR.bind(null,o),Fr:TR.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,Ae.Z)(function*(d){yield function SR(n,e){return gT.apply(this,arguments)}(r.Ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}ga(e){const t=gS();if(!DC.vt(t))throw new Pe(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ta(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new DC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class wT{initialize(e,t){var r=this;return(0,Ae.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>xS(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=bR.bind(null,r.syncEngine),yield jC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new aR}createDatastore(e){const t=U_(e.databaseInfo.databaseId),r=new qx(e.databaseInfo);return new Zx(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>xS(this.syncEngine,m,0),d=pS.vt()?new pS:new Hx,new Yx(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,b){const A=new pR(r,o,u,d,m,w);return b&&(A.da=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ae.Z)(function*(t){const r=tt(t);$e("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield bm(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function FS(n,e=10240){let t=0;return{read:()=>(0,Ae.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ae.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class kI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class PR{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new $r,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ae.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ae.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new cR(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ae.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class kR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ae.Z)(function*(u,d){const m=tt(u),w=Ef(m.M)+"/documents",b={documents:d.map(G=>Ed(m.M,G))},A=yield m._o("BatchGetDocuments",w,b),M=new Map;A.forEach(G=>{const ee=function qD(n,e){return"found"in e?function(t,r){St(!!r.found);const o=ea(t,r.found.name),u=Pr(r.found.updateTime),d=new qr({mapValue:{fields:r.found.fields}});return Mn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){St(!!r.missing),St(!!r.readTime);const o=ea(t,r.missing),u=Pr(r.readTime);return Mn.newNoDocument(o,u)}(n,e):ct()}(m.M,G);M.set(ee.key.toString(),ee)});const L=[];return d.forEach(G=>{const ee=M.get(G.toString());St(!!ee),L.push(ee)}),L}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new hf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Qe.fromPath(o);e.mutations.push(new ff(u,e.precondition(u)))}),yield(r=(0,Ae.Z)(function*(o,u){const d=tt(o),m=Ef(d.M)+"/documents",w={writes:u.map(b=>wf(d.M,b))};yield d.co("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?yr.updateTime(t):yr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Pe(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yr.updateTime(t)}return yr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class FR{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new CC(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ae.Z)(function*(){const t=new kR(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!ad(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Xw(t)}return!1}}class LR{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Rr.UNAUTHENTICATED,this.clientId=Ug.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,Ae.Z)(function*(m){$e("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>($e("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,Ae.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ae.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Tm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function LS(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,Ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ae.Z)(function*(u){r.isEqual(u)||(yield _m(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),IT.apply(this,arguments)}function VS(n,e){return bT.apply(this,arguments)}function bT(){return bT=(0,Ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield DT(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>IS(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>IS(e.remoteStore,u)),n.onlineComponents=e}),bT.apply(this,arguments)}function DT(n){return CT.apply(this,arguments)}function CT(){return CT=(0,Ae.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield LS(n,new PS)),n.offlineComponents}),CT.apply(this,arguments)}function FI(n){return TT.apply(this,arguments)}function TT(){return TT=(0,Ae.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield VS(n,new wT)),n.onlineComponents}),TT.apply(this,arguments)}function US(n){return DT(n).then(e=>e.persistence)}function AT(n){return DT(n).then(e=>e.localStore)}function BS(n){return FI(n).then(e=>e.remoteStore)}function ST(n){return FI(n).then(e=>e.syncEngine)}function xm(n){return MT.apply(this,arguments)}function MT(){return MT=(0,Ae.Z)(function*(n){const e=yield FI(n),t=e.eventManager;return t.onListen=gR.bind(null,e.syncEngine),t.onUnlisten=mR.bind(null,e.syncEngine),t}),MT.apply(this,arguments)}function jS(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(o,u,d,m,w){const b=new kI({next:M=>{u.enqueueAndForget(()=>zC(o,A));const L=M.docs.has(d);!L&&M.fromCache?w.reject(new Pe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&M.fromCache&&m&&"server"===m.source?w.reject(new Pe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(M)},error:M=>w.reject(M)}),A=new KC(pd(d.path),b,{includeMetadataChanges:!0,ku:!0});return GC(o,A)}(yield xm(n),n.asyncQueue,e,t,r)})),r.promise}function HS(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(o,u,d,m,w){const b=new kI({next:M=>{u.enqueueAndForget(()=>zC(o,A)),M.fromCache&&"server"===m.source?w.reject(new Pe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(M)},error:M=>w.reject(M)}),A=new KC(d,b,{includeMetadataChanges:!0,ku:!0});return GC(o,A)}(yield xm(n),n.asyncQueue,e,t,r)})),r.promise}const $S=new Map;function xT(n,e,t){if(!t)throw new Pe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GS(n,e,t,r){if(!0===e&&!0===r)throw new Pe(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qS(n){if(!Qe.isDocumentKey(n))throw new Pe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zS(n){if(Qe.isDocumentKey(n))throw new Pe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function LI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=LI(n);throw new Pe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function WS(n,e){if(e<=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ZS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,GS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class H_{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZS({}),this._settingsFrozen=!1,e instanceof Jo?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Pe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(o.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ID;switch(t.type){case"gapi":const r=t.client;return St(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new DD(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$S.get(e);t&&($e("ComponentProvider","Removing Datastore"),$S.delete(e),t.terminate())}(this),Promise.resolve()}}class Bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class Ui{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ui(this.firestore,e,this._query)}}class uu extends Ui{constructor(e,t,r){super(e,t,pd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new Qe(e))}withConverter(e){return new uu(this.firestore,e,this._path)}}function KS(n,e,...t){if(n=(0,qt.m9)(n),xT("collection","path",e),n instanceof H_){const r=Xt.fromString(e,...t);return zS(r),new uu(n,null,r)}{if(!(n instanceof Bn||n instanceof uu))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return zS(r),new uu(n.firestore,null,r)}}function VI(n,e,...t){if(n=(0,qt.m9)(n),1===arguments.length&&(e=Ug.R()),xT("doc","path",e),n instanceof H_){const r=Xt.fromString(e,...t);return qS(r),new Bn(n,null,new Qe(r))}{if(!(n instanceof Bn||n instanceof uu))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return qS(r),new Bn(n.firestore,n instanceof uu?n.converter:null,new Qe(r))}}function YS(n,e){return n=(0,qt.m9)(n),e=(0,qt.m9)(e),(n instanceof Bn||n instanceof uu)&&(e instanceof Bn||e instanceof uu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function QS(n,e){return n=(0,qt.m9)(n),e=(0,qt.m9)(e),n instanceof Ui&&e instanceof Ui&&n.firestore===e.firestore&&uf(n._query,e._query)&&n.converter===e.converter}class ZR{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new CC(this,"async_queue_retry"),this.Qa=()=>{const t=NI();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=NI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=NI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new $r;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ae.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Dl(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,mr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=$C.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&ct()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ae.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function RT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class KR{constructor(){this._progressObserver={},this._taskCompletionResolver=new $r,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jn extends H_{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new ZR,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||JS(this),this._firestoreClient.terminate()}}function Zr(n){return n._firestoreClient||JS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function JS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new TD(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new LR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function XS(n,e,t){const r=new $r;return n.asyncQueue.enqueue((0,Ae.Z)(function*(){try{yield LS(n,t),yield VS(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===fe.FAILED_PRECONDITION||u.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function eM(n){if(n._initialized||n._terminated)throw new Pe(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ml{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lu(Nr.fromBase64String(e))}catch(t){throw new Pe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new lu(Nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nf{constructor(e){this._methodName=e}}class UI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const sN=/^__.*__$/;class oN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Il(e,this.data,this.fieldMask,t,this.fieldTransforms):new vd(e,this.data,t,this.fieldTransforms)}}class tM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Il(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class BI{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new BI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return $I(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(nM(this.ec)&&sN.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class aN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||U_(e)}lc(e,t,r,o=!1){return new BI({ec:e,methodName:t,hc:r,path:Gr.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Of(n){const e=n._freezeSettings(),t=U_(n._databaseId);return new aN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jI(n,e,t,r,o,u={}){const d=n.lc(u.merge||u.mergeFields?2:0,e,t,o);kT("Data must be an object, but it was:",d,r);const m=sM(r,d);let w,b;if(u.merge)w=new id(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const M of u.mergeFields){const L=FT(e,M,t);if(!d.contains(L))throw new Pe(fe.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);aM(A,L)||A.push(L)}w=new id(A),b=d.fieldTransforms.filter(M=>w.covers(M.field))}else w=null,b=d.fieldTransforms;return new oN(new qr(m),w,b)}class $_ extends Nf{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $_}}function rM(n,e,t){return new BI({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class NT extends Nf{_toFieldTransform(e){return new wl(e.path,new gd)}isEqual(e){return e instanceof NT}}class uN extends Nf{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=rM(this,e,!0),r=this.fc.map(u=>Pf(u,t)),o=new or(r);return new wl(e.path,o)}isEqual(e){return this===e}}class lN extends Nf{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=rM(this,e,!0),r=this.fc.map(u=>Pf(u,t)),o=new El(r);return new wl(e.path,o)}isEqual(e){return this===e}}class cN extends Nf{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new cf(e.M,Ww(e.M,this.dc));return new wl(e.path,t)}isEqual(e){return this===e}}function OT(n,e,t,r){const o=n.lc(1,e,t);kT("Data must be an object, but it was:",o,r);const u=[],d=qr.empty();Xa(r,(w,b)=>{const A=HI(e,w,t);b=(0,qt.m9)(b);const M=o.oc(A);if(b instanceof $_)u.push(A);else{const L=Pf(b,M);null!=L&&(u.push(A),d.set(A,L))}});const m=new id(u);return new tM(d,m,o.fieldTransforms)}function PT(n,e,t,r,o,u){const d=n.lc(1,e,t),m=[FT(e,r,t)],w=[o];if(u.length%2!=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)m.push(FT(e,u[L])),w.push(u[L+1]);const b=[],A=qr.empty();for(let L=m.length-1;L>=0;--L)if(!aM(b,m[L])){const G=m[L];let ee=w[L];ee=(0,qt.m9)(ee);const Re=d.oc(G);if(ee instanceof $_)b.push(G);else{const Ze=Pf(ee,Re);null!=Ze&&(b.push(G),A.set(G,Ze))}}const M=new id(b);return new tM(A,M,d.fieldTransforms)}function iM(n,e,t,r=!1){return Pf(t,n.lc(r?4:3,e))}function Pf(n,e){if(oM(n=(0,qt.m9)(n)))return kT("Unsupported field value:",e,n),sM(n,e);if(n instanceof Nf)return function(t,r){if(!nM(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=Pf(d,r.uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,qt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ww(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=sr.fromDate(t);return{timestampValue:om(r.M,o)}}if(t instanceof sr){const o=new sr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:om(r.M,o)}}if(t instanceof UI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof lu)return{bytesValue:yf(r.M,t._byteString)};if(t instanceof Bn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:vf(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${LI(t)}`)}(n,e)}function sM(n,e){const t={};return Nw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xa(n,(r,o)=>{const u=Pf(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function oM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof sr||n instanceof UI||n instanceof lu||n instanceof Bn||n instanceof Nf)}function kT(n,e,t){if(!oM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=LI(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function FT(n,e,t){if((e=(0,qt.m9)(e))instanceof Ml)return e._internalPath;if("string"==typeof e)return HI(n,e);throw $I("Field path arguments must be of type string or ",n,!1,void 0,t)}const dN=new RegExp("[~\\*/\\[\\]]");function HI(n,e,t){if(e.search(dN)>=0)throw $I(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ml(...e.split("."))._internalPath}catch(r){throw $I(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $I(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new Pe(fe.INVALID_ARGUMENT,m+n+w)}function aM(n,e){return n.some(t=>t.isEqual(e))}class G_{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(GI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hN extends G_{data(){return super.data()}}function GI(n,e){return"string"==typeof e?HI(n,e):e instanceof Ml?e._internalPath:e._delegate._internalPath}class kf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xl extends G_{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new q_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(GI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class q_ extends xl{data(e={}){return super.data(e)}}class Md{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new kf(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new q_(this._firestore,this._userDataWriter,r.key,r,new kf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new q_(r._firestore,r._userDataWriter,d.doc.key,d.doc,new kf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new q_(r._firestore,r._userDataWriter,d.doc.key,d.doc,new kf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),b=u.indexOf(d.doc.key)),{type:fN(d.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function uM(n,e){return n instanceof xl&&e instanceof xl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Md&&e instanceof Md&&n._firestore===e._firestore&&QS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function lM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class z_{}function xd(n,...e){for(const t of e)n=t._apply(n);return n}class pN extends z_{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Of(e.firestore),r=function(o,u,d,m,w,b,A){let M;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){gM(A,b);const G=[];for(const ee of A)G.push(pM(m,o,ee));M={arrayValue:{values:G}}}else M=pM(m,o,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||gM(A,b),M=iM(d,"where",A,"in"===b||"not-in"===b);const L=Dn.create(w,b,M);return function(G,ee){if(ee.S()){const Ze=af(G);if(null!==Ze&&!Ze.isEqual(ee.field))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ze.toString()}' and '${ee.field.toString()}'`);const vt=of(G);null!==vt&&mM(0,ee.field,vt)}const Re=function(Ze,vt){for(const Mt of Ze.filters)if(vt.indexOf(Mt.op)>=0)return Mt.op;return null}(G,function(Ze){switch(Ze){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ee.op));if(null!==Re)throw new Pe(fe.INVALID_ARGUMENT,Re===ee.op?`Invalid query. You cannot use more than one '${ee.op.toString()}' filter.`:`Invalid query. You cannot use '${ee.op.toString()}' filters with '${Re.toString()}' filters.`)}(o,L),L}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Ui(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new yo(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class mN extends z_{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new fd(o,u);return function(m,w){if(null===of(m)){const b=af(m);null!==b&&mM(0,b,w.field)}}(r,d),d}(e._query,this._c,this.gc);return new Ui(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new yo(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class cM extends z_{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Ui(e.firestore,e.converter,qw(e._query,this.yc,this.Ic))}}class dM extends z_{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=fM(e,this.type,this.Tc,this.Ec);return new Ui(e.firestore,e.converter,(o=t,new yo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class hM extends z_{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=fM(e,this.type,this.Tc,this.Ec);return new Ui(e.firestore,e.converter,(o=t,new yo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function fM(n,e,t,r){if(t[0]=(0,qt.m9)(t[0]),t[0]instanceof G_)return function(o,u,d,m,w){if(!m)throw new Pe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const A of iu(o))if(A.field.isKeyField())b.push(gl(u,m.key));else{const M=m.data.field(A.field);if(jg(M))throw new Pe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const L=A.field.canonicalString();throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}b.push(M)}return new ru(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Of(n.firestore);return function(u,d,m,w,b,A){const M=u.explicitOrderBy;if(b.length>M.length)throw new Pe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let G=0;G<b.length;G++){const ee=b[G];if(M[G].field.isKeyField()){if("string"!=typeof ee)throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ee}`);if(!Jg(u)&&-1!==ee.indexOf("/"))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ee}' contains a slash.`);const Re=u.path.child(Xt.fromString(ee));if(!Qe.isDocumentKey(Re))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Re}' is not because it contains an odd number of segments.`);const Ze=new Qe(Re);L.push(gl(d,Ze))}else{const Re=iM(m,w,ee);L.push(Re)}}return new ru(L,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function pM(n,e,t){if("string"==typeof(t=(0,qt.m9)(t))){if(""===t)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jg(e)&&-1!==t.indexOf("/"))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xt.fromString(t));if(!Qe.isDocumentKey(r))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gl(n,new Qe(r))}if(t instanceof Bn)return gl(n,t._key);throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${LI(t)}.`)}function gM(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function mM(n,e,t){if(!t.isEqual(e))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const DN={maxAttempts:5};class LT{convertValue(e,t="none"){switch(eu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(od(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){const r={};return Xa(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new UI(Yn(e.latitude),Yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Pw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Xh(e));default:return null}}convertTimestamp(e){const t=Es(e);return new sr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xt.fromString(e);St(aI(r));const o=new Jo(r.get(1),r.get(3)),u=new Qe(r.popFirst(5));return o.isEqual(t)||mr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function qI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class CN extends LT{constructor(e){super(),this.firestore=e}convertBytes(e){return new lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}class yM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Of(e)}set(e,t,r){this._verifyNotCommitted();const o=Rd(e,this._firestore),u=qI(o.converter,t,r),d=jI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,yr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Rd(e,this._firestore);let d;return d="string"==typeof(t=(0,qt.m9)(t))||t instanceof Ml?PT(this._dataReader,"WriteBatch.update",u._key,t,r,o):OT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rd(e,this._firestore);return this._mutations=this._mutations.concat(new hf(t._key,yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rd(n,e){if((n=(0,qt.m9)(n)).firestore!==e)throw new Pe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ff extends LT{constructor(e){super(),this.firestore=e}convertBytes(e){return new lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function vM(n,e,t){n=nn(n,Bn);const r=nn(n.firestore,Jn),o=qI(n.converter,e,t);return Rm(r,[jI(Of(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,yr.none())])}function _M(n,e,t,...r){n=nn(n,Bn);const o=nn(n.firestore,Jn),u=Of(o);let d;return d="string"==typeof(e=(0,qt.m9)(e))||e instanceof Ml?PT(u,"updateDoc",n._key,e,t,r):OT(u,"updateDoc",n._key,e),Rm(o,[d.toMutation(n._key,yr.exists(!0))])}function EM(n,...e){var t,r,o;n=(0,qt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||RT(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(RT(e[d])){const M=e[d];e[d]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[d+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[d+2]=null===(o=M.complete)||void 0===o?void 0:o.bind(M)}let w,b,A;if(n instanceof Bn)b=nn(n.firestore,Jn),A=pd(n._key.path),w={next:M=>{e[d]&&e[d](VT(b,n,M))},error:e[d+1],complete:e[d+2]};else{const M=nn(n,Ui);b=nn(M.firestore,Jn),A=M._query;const L=new Ff(b);w={next:G=>{e[d]&&e[d](new Md(b,L,M,G))},error:e[d+1],complete:e[d+2]},lM(n._query)}return function(M,L,G,ee){const Re=new kI(ee),Ze=new KC(L,Re,G);return M.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return GC(yield xm(M),Ze)})),()=>{Re.Aa(),M.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return zC(yield xm(M),Ze)}))}}(Zr(b),A,m,w)}function Rm(n,e){return function(t,r){const o=new $r;return t.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function yR(n,e,t){return eT.apply(this,arguments)}(yield ST(t),r,o)})),o.promise}(Zr(n),e)}function VT(n,e,t){const r=t.docs.get(e._key),o=new Ff(n);return new xl(n,o,e._key,r,new kf(t.hasPendingWrites,t.fromCache),e.converter)}class kN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Of(e)}get(e){const t=Rd(e,this._firestore),r=new CN(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return ct();const u=o[0];if(u.isFoundDocument())return new G_(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new G_(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const o=Rd(e,this._firestore),u=qI(o.converter,t,r),d=jI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Rd(e,this._firestore);let d;return d="string"==typeof(t=(0,qt.m9)(t))||t instanceof Ml?PT(this._dataReader,"Transaction.update",u._key,t,r,o):OT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Rd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Rd(e,this._firestore),r=new Ff(this._firestore);return super.get(e).then(o=>new xl(this._firestore,r,t._key,o._document,new kf(!1,!1),t.converter))}}function UT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function IM(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function bM(){if(!function Bg(){return"undefined"!=typeof atob}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){nd=qa.SDK_VERSION,(0,qa._registerComponent)(new Nh.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Jn(o,new Mw(t.getProvider("auth-internal")),new CD(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,qa.registerVersion)(Tw,"3.4.9",n),(0,qa.registerVersion)(Tw,"3.4.9","esm2017")}();class W_{constructor(e){this._delegate=e}static fromBase64String(e){return bM(),new W_(lu.fromBase64String(e))}static fromUint8Array(e){return IM(),new W_(lu.fromUint8Array(e))}toBase64(){return bM(),this._delegate.toBase64()}toUint8Array(){return IM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function BT(n){return function GN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class qN{enableIndexedDbPersistence(e,t){return function QR(n,e){eM(n=nn(n,Jn));const t=Zr(n),r=n._freezeSettings(),o=new wT;return XS(t,o,new kS(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function JR(n){eM(n=nn(n,Jn));const e=Zr(n),t=n._freezeSettings(),r=new wT;return XS(e,r,new OR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function XR(n){if(n._initialized&&!n._terminated)throw new Pe(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $r;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ae.Z)(function*(){try{yield(t=(0,Ae.Z)(function*(r){if(!Is.vt())return Promise.resolve();const o=r+"main";yield Is.delete(o)}),function(r){return t.apply(this,arguments)})(ta(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class DM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&pl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function zR(n,e,t,r={}){var o;const u=(n=nn(n,H_))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&pl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Rr.MOCK_USER;else{d=(0,qt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Pe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Rr(w)}n._authCredentials=new Sw(new Aw(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function tN(n){return function VR(n){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){const e=yield US(n),t=yield BS(n);return e.setNetworkEnabled(!0),function(r){const o=tt(r);return o.wu.delete(0),B_(o)}(t)}))}(Zr(n=nn(n,Jn)))}(this._delegate)}disableNetwork(){return function nN(n){return function UR(n){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){const e=yield US(n),t=yield BS(n);return e.setNetworkEnabled(!1),(r=(0,Ae.Z)(function*(o){const u=tt(o);u.wu.add(0),yield bm(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Zr(n=nn(n,Jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,GS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function eN(n){return function(e){const t=new $r;return e.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function wR(n,e){return sT.apply(this,arguments)}(yield ST(e),t)})),t.promise}(Zr(n=nn(n,Jn)))}(this._delegate)}onSnapshotsInSync(e){return function PN(n,e){return function HR(n,e){const t=new kI(e);return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return r=yield xm(n),o=t,tt(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return r=yield xm(n),o=t,void tt(r).bu.delete(o);var r,o}))}}(Zr(n=nn(n,Jn)),RT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Nm(this,KS(this._delegate,e))}catch(t){throw ns(t,"collection()","Firestore.collection()")}}doc(e){try{return new _o(this,VI(this._delegate,e))}catch(t){throw ns(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new rs(this,function WR(n,e){if(n=nn(n,H_),xT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ui(n,null,(t=e,new yo(Xt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ns(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function FN(n,e,t){n=nn(n,Jn);const r=Object.assign(Object.assign({},DN),t);return function(o){if(o.maxAttempts<1)throw new Pe(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function $R(n,e,t){const r=new $r;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){const o=yield(u=n,FI(u).then(d=>d.datastore));var u;new FR(n.asyncQueue,o,t,e,r).run()})),r.promise}(Zr(n),o=>e(new kN(n,o)),r)}(this._delegate,t=>e(new CM(this,t)))}batch(){return Zr(this._delegate),new TM(new yM(this._delegate,e=>Rm(this._delegate,e)))}loadBundle(e){return function rN(n,e){const t=Zr(n=nn(n,Jn)),r=new KR;return function GR(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return FS(w,b);if(w instanceof ArrayBuffer)return FS(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new PR(w,d);var w}(t,U_(e));n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){!function NR(n,e,t){const r=tt(n);var o;(o=(0,Ae.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(L,G){const ee=tt(L),Re=Pr(G.createTime);return ee.persistence.runTransaction("hasNewerBundle","readonly",Ze=>ee._s.getBundleMetadata(Ze,G.id)).then(Ze=>!!Ze&&Ze.createTime.compareTo(Re)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(L=w).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);m._updateProgress(CS(w));const b=new dR(w,u.localStore,d.M);let A=yield d.ma();for(;A;){const L=yield b.Fu(A);L&&m._updateProgress(L),A=yield d.ma()}const M=yield b.complete();return yield Sl(u,M.Lu,void 0),yield function(L,G){const ee=tt(L);return ee.persistence.runTransaction("Save bundle","readwrite",Re=>ee._s.saveBundleMetadata(Re,G))}(u.localStore,w),m._completeWith(M.progress),Promise.resolve(M.Bu)}catch(w){return pl("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var L}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield ST(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function iN(n,e){return function qR(n,e){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){return function(t,r){const o=tt(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield AT(n),e)}))}(Zr(n=nn(n,Jn)),e).then(t=>t?new Ui(n,null,t.query):null)}(this._delegate,e).then(t=>t?new rs(this,t):null)}}class zI extends LT{constructor(e){super(),this.firestore=e}convertBytes(e){return new W_(new lu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return _o.forKey(t,this.firestore,null)}}class CM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new zI(e)}get(e){const t=Vf(e);return this._delegate.get(t).then(r=>new Z_(this._firestore,new xl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Vf(e);return r?(UT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Vf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Vf(e);return this._delegate.delete(t),this}}class TM{constructor(e){this._delegate=e}set(e,t,r){const o=Vf(e);return r?(UT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Vf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Vf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Lf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new q_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new K_(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Lf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Lf(e,new zI(e),t),o.set(t,u)),u}}Lf.INSTANCES=new WeakMap;class _o{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _o(t,new Bn(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new _o(t,new Bn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Nm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Nm(this.firestore,KS(this._delegate,e))}catch(t){throw ns(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,qt.m9)(e))instanceof Bn&&YS(this._delegate,e)}set(e,t){t=UT("DocumentReference.set",t);try{return t?vM(this._delegate,e,t):vM(this._delegate,e)}catch(r){throw ns(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?_M(this._delegate,e):_M(this._delegate,e,t,...r)}catch(o){throw ns(o,"updateDoc()","DocumentReference.update()")}}delete(){return function NN(n){return Rm(nn(n.firestore,Jn),[new hf(n._key,yr.none())])}(this._delegate)}onSnapshot(...e){const t=AM(e),r=SM(e,o=>new Z_(this.firestore,new xl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return EM(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function AN(n){n=nn(n,Bn);const e=nn(n.firestore,Jn),t=Zr(e),r=new Ff(e);return function BR(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return(r=(0,Ae.Z)(function*(o,u,d){try{const m=yield function(w,b){const A=tt(w);return A.persistence.runTransaction("read document","readonly",M=>A.fi.Ls(M,b))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Pe(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Tm(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield AT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new xl(e,r,n._key,o,new kf(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function SN(n){n=nn(n,Bn);const e=nn(n.firestore,Jn);return jS(Zr(e),n._key,{source:"server"}).then(t=>VT(e,n,t))}(this._delegate):function TN(n){n=nn(n,Bn);const e=nn(n.firestore,Jn);return jS(Zr(e),n._key).then(t=>VT(e,n,t))}(this._delegate),t.then(r=>new Z_(this.firestore,new xl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new _o(this.firestore,this._delegate.withConverter(e?Lf.getInstance(this.firestore,e):null))}}function ns(n,e,t){return n.message=n.message.replace(e,t),n}function AM(n){for(const e of n)if("object"==typeof e&&!BT(e))return e;return{}}function SM(n,e){var t,r;let o;return o=BT(n[0])?n[0]:BT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Z_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new _o(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return uM(this._delegate,e._delegate)}}class K_ extends Z_{data(e){const t=this._delegate.data(e);return function wD(n,e){n||ct()}(void 0!==t),t}}class rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zI(e)}where(e,t,r){try{return new rs(this.firestore,xd(this._delegate,function gN(n,e,t){const r=e,o=GI("where",n);return new pN(o,r,t)}(e,t,r)))}catch(o){throw ns(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new rs(this.firestore,xd(this._delegate,function yN(n,e="asc"){const t=e,r=GI("orderBy",n);return new mN(r,t)}(e,t)))}catch(r){throw ns(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new rs(this.firestore,xd(this._delegate,function vN(n){return WS("limit",n),new cM("limit",n,"F")}(e)))}catch(t){throw ns(t,"limit()","Query.limit()")}}limitToLast(e){try{return new rs(this.firestore,xd(this._delegate,function _N(n){return WS("limitToLast",n),new cM("limitToLast",n,"L")}(e)))}catch(t){throw ns(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new rs(this.firestore,xd(this._delegate,function EN(...n){return new dM("startAt",n,!0)}(...e)))}catch(t){throw ns(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new rs(this.firestore,xd(this._delegate,function wN(...n){return new dM("startAfter",n,!1)}(...e)))}catch(t){throw ns(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new rs(this.firestore,xd(this._delegate,function IN(...n){return new hM("endBefore",n,!1)}(...e)))}catch(t){throw ns(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new rs(this.firestore,xd(this._delegate,function bN(...n){return new hM("endAt",n,!0)}(...e)))}catch(t){throw ns(t,"endAt()","Query.endAt()")}}isEqual(e){return QS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function xN(n){n=nn(n,Ui);const e=nn(n.firestore,Jn),t=Zr(e),r=new Ff(e);return function jR(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return(r=(0,Ae.Z)(function*(o,u,d){try{const m=yield MI(o,u,!0),w=new SS(u,m._i),b=w.Wu(m.documents),A=w.applyChanges(b,!1);d.resolve(A.snapshot)}catch(m){const w=Tm(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield AT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Md(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function RN(n){n=nn(n,Ui);const e=nn(n.firestore,Jn),t=Zr(e),r=new Ff(e);return HS(t,n._query,{source:"server"}).then(o=>new Md(e,r,n,o))}(this._delegate):function MN(n){n=nn(n,Ui);const e=nn(n.firestore,Jn),t=Zr(e),r=new Ff(e);return lM(n._query),HS(t,n._query).then(o=>new Md(e,r,n,o))}(this._delegate),t.then(r=>new jT(this.firestore,new Md(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=AM(e),r=SM(e,o=>new jT(this.firestore,new Md(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return EM(this._delegate,t,r)}withConverter(e){return new rs(this.firestore,this._delegate.withConverter(e?Lf.getInstance(this.firestore,e):null))}}class WN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new K_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new K_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new WN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new K_(this._firestore,r))})}isEqual(e){return uM(this._delegate,e._delegate)}}class Nm extends rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _o(this.firestore,e):null}doc(e){try{return new _o(this.firestore,void 0===e?VI(this._delegate):VI(this._delegate,e))}catch(t){throw ns(t,"doc()","CollectionReference.doc()")}}add(e){return function ON(n,e){const t=nn(n.firestore,Jn),r=VI(n),o=qI(n.converter,e);return Rm(t,[jI(Of(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,yr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new _o(this.firestore,t))}isEqual(e){return YS(this._delegate,e._delegate)}withConverter(e){return new Nm(this.firestore,this._delegate.withConverter(e?Lf.getInstance(this.firestore,e):null))}}function Vf(n){return nn(n,Bn)}class HT{constructor(...e){this._delegate=new Ml(...e)}static documentId(){return new HT(Gr.keyField().canonicalString())}isEqual(e){return(e=(0,qt.m9)(e))instanceof Ml&&this._delegate._internalPath.isEqual(e._internalPath)}}class Uf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function VN(){return new NT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Uf(e)}static delete(){const e=function LN(){return new $_("deleteField")}();return e._methodName="FieldValue.delete",new Uf(e)}static arrayUnion(...e){const t=function UN(...n){return new uN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Uf(t)}static arrayRemove(...e){const t=function BN(...n){return new lN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Uf(t)}static increment(e){const t=function jN(n){return new cN("increment",n)}(e);return t._methodName="FieldValue.increment",new Uf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ZN={Firestore:DM,GeoPoint:UI,Timestamp:sr,Blob:W_,Transaction:CM,WriteBatch:TM,DocumentReference:_o,DocumentSnapshot:Z_,Query:rs,QueryDocumentSnapshot:K_,QuerySnapshot:jT,CollectionReference:Nm,FieldPath:HT,FieldValue:Uf,setLogLevel:function zN(n){!function ED(n){Qo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function YN(n){(function KN(n,e){n.INTERNAL.registerComponent(new Nh.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},ZN)))})(n,(e,t)=>new DM(e,t,new qN)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(Vc.Z);var QN=x(6451),Y_=x(5363),JN=x(6063);class XN extends Qr.x{constructor(e=1/0,t=1/0,r=JN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var eO=x(3099);function $T(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,eO.B)({connector:()=>new XN(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function MM(n,e){return(0,ga.m)(e)?Nn(()=>n,e):Nn(()=>n)}var GT=x(9468);x(5867);const RM=new Map,sO={activated:!1,tokenObservers:[]},oO={initialized:!1,enabled:!1};function yi(n){return RM.get(n)||sO}function na(n,e){RM.set(n,e)}function WI(){return oO}class dO{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ae.Z)(function*(){t.stop();try{t.pending=new qt.BH,yield function hO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new qt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const is=new qt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function OM(n){if(!yi(n).activated)throw is.create("use-before-activation",{appName:n.name})}function ZT(n,e){return KT.apply(this,arguments)}function KT(){return KT=(0,Ae.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const M=yield o.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(M){throw is.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==d.status)throw is.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(M){throw is.create("fetch-parse-error",{originalErrorMessage:M.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw is.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),A=Date.now();return{token:m.token,expireTimeMillis:A+b,issuedAtTimeMillis:A}}),KT.apply(this,arguments)}function yO(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const J_="firebase-app-check-store";let YI=null;function kM(){return YI||(YI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(is.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(J_,{keyPath:"compositeKey"})}}catch(t){e(is.create("storage-open",{originalErrorMessage:t.message}))}}),YI)}function YT(){return YT=(0,Ae.Z)(function*(n,e){const r=(yield kM()).transaction(J_,"readwrite"),u=r.objectStore(J_).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var b;m(is.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),YT.apply(this,arguments)}const X_=new Wo.Yd("@firebase/app-check");function UM(n,e){return(0,qt.hl)()?function wO(n,e){return function FM(n,e){return YT.apply(this,arguments)}(function VM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{X_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function BM(){return WI().enabled}function jM(){return eA.apply(this,arguments)}function eA(){return eA=(0,Ae.Z)(function*(){const n=WI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),eA.apply(this,arguments)}const AO={error:"UNKNOWN_ERROR"};function SO(n){return qt.US.encodeString(JSON.stringify(n),!1)}function QI(n){return tA.apply(this,arguments)}function tA(){return tA=(0,Ae.Z)(function*(n,e=!1){const t=n.app;OM(t);const r=yi(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&JI(w)&&(o=w)}if(!e&&o&&JI(o))return{token:o.token};let m,d=!1;if(BM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ZT(yO(t,yield jM()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),d=!0);const w=yield r.exchangeTokenPromise;return yield UM(t,w),na(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?X_.warn(w.message):X_.error(w),u=w}return o?(m={token:o.token},na(t,Object.assign(Object.assign({},r),{token:o})),yield UM(t,o)):m=xO(u),d&&$M(t,m),m}),tA.apply(this,arguments)}function rA(n,e){const t=yi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),na(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function HM(n){const{app:e}=n,t=yi(e);let r=t.tokenRefresher;r||(r=function MO(n){const{app:e}=n;return new dO((0,Ae.Z)(function*(){let r;if(r=yi(e).token?yield QI(n,!0):yield QI(n),r.error)throw r.error}),()=>!0,()=>{const t=yi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),na(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function $M(n,e){const t=yi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function JI(n){return n.expireTimeMillis-Date.now()>0}function xO(n){return{token:SO(AO),error:n}}class RO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=yi(this.app);for(const t of e)rA(this.app,t.next);return Promise.resolve()}}const QM="app-check-internal";!function qO(){(0,qa._registerComponent)(new Nh.wA("app-check",n=>function NO(n,e){return new RO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(QM).initialize()})),(0,qa._registerComponent)(new Nh.wA(QM,n=>function OO(n){return{getToken:e=>QI(n,e),addTokenListener:e=>function nA(n,e,t,r){const{app:o}=n,u=yi(o),d={next:t,error:r,type:e};if(na(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&JI(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),HM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>HM(n))}(n,"INTERNAL",e),removeTokenListener:e=>rA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,qa.registerVersion)("@firebase/app-check","0.5.8")}();class aA{constructor(){return(0,hn.vb)("app-check")}}"undefined"!=typeof window&&window;var eb=x(127);const XM=new h.OlP("angularfire2.auth.use-emulator"),ex=new h.OlP("angularfire2.auth.settings"),tx=new h.OlP("angularfire2.auth.tenant-id"),nx=new h.OlP("angularfire2.auth.langugage-code"),rx=new h.OlP("angularfire2.auth.use-device-language"),ix=new h.OlP("angularfire.auth.persistence"),sx=(n,e,t,r,o,u,d,m)=>(0,fr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[b,A]of Object.entries(d))w.settings[b]=A;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let lA=(()=>{class n{constructor(t,r,o,u,d,m,w,b,A,M,L,G){const ee=new Qr.x,Re=Et(void 0).pipe((0,Y_.Q)(d.outsideAngular),Nn(()=>u.runOutsideAngular(()=>Promise.resolve().then(x.bind(x,7092)))),(0,Dt.U)(()=>(0,fr.on)(t,u,r)),(0,Dt.U)(Ze=>sx(Ze,u,m,b,A,M,w,L)),$T({bufferSize:1,refCount:!1}));if(Gi(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Et(null);else{Re.pipe(va()).subscribe();const vt=Re.pipe(Nn(Lt=>Lt.getRedirectResult().then(Qt=>Qt,()=>null)),hn.iC,$T({bufferSize:1,refCount:!1})),Mt=Re.pipe(Nn(Lt=>new Wn.y(Qt=>({unsubscribe:u.runOutsideAngular(()=>Lt.onAuthStateChanged(yn=>Qt.next(yn),yn=>Qt.error(yn),()=>Qt.complete()))})))),Yt=Re.pipe(Nn(Lt=>new Wn.y(Qt=>({unsubscribe:u.runOutsideAngular(()=>Lt.onIdTokenChanged(yn=>Qt.next(yn),yn=>Qt.error(yn),()=>Qt.complete()))}))));this.authState=vt.pipe(MM(Mt),(0,GT.R)(d.outsideAngular),(0,Y_.Q)(d.insideAngular)),this.user=vt.pipe(MM(Yt),(0,GT.R)(d.outsideAngular),(0,Y_.Q)(d.insideAngular)),this.idToken=this.user.pipe(Nn(Lt=>Lt?(0,Rn.D)(Lt.getIdToken()):Et(null))),this.idTokenResult=this.user.pipe(Nn(Lt=>Lt?(0,Rn.D)(Lt.getIdTokenResult()):Et(null))),this.credential=(0,QN.T)(vt,ee,this.authState.pipe(Tr(Lt=>!Lt))).pipe((0,Dt.U)(Lt=>(null==Lt?void 0:Lt.user)?Lt:null),(0,GT.R)(d.outsideAngular),(0,Y_.Q)(d.insideAngular))}return(0,fr.pX)(this,Re,u,{spy:{apply:(Ze,vt,Mt)=>{(Ze.startsWith("signIn")||Ze.startsWith("createUser"))&&Mt.then(Yt=>ee.next(Yt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fr.Dh),h.LFG(fr.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(hn.HU),h.LFG(XM,8),h.LFG(ex,8),h.LFG(tx,8),h.LFG(nx,8),h.LFG(rx,8),h.LFG(ix,8),h.LFG(aA,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function ox(n,e){return function QO(n,e=Fc.z){return new Wn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function cA(n,e){return ox(n,e).pipe((0,Dt.U)(t=>({payload:t,type:"query"})))}function tb(n,e){return cA(n,e).pipe(eo(void 0),zo(),(0,Dt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(A=>A.doc.ref.isEqual(d.ref)),b=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function ax(n,e,t){return tb(n,t).pipe(gs((r,o)=>function XO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function eP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return dA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return dA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),nl(),(0,Dt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function dA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function ux(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class lx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=tb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Dt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(eo(void 0),zo(),Tr(([r,o])=>o.length>0||!r),(0,Dt.U)(([r,o])=>o),hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(gs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ux(e);return ax(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return cA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),hn.iC)}get(e){return(0,Rn.D)(this.query.get(e)).pipe(hn.iC)}add(e){return this.ref.add(e)}doc(e){return new cx(this.ref.doc(e),this.afs)}}class cx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=fx(r,t);return new lx(o,u,this.afs)}snapshotChanges(){return function JO(n,e){return ox(n,e).pipe(eo(void 0),zo(),(0,Dt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Rn.D)(this.ref.get(e)).pipe(hn.iC)}}class tP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?tb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Tr(t=>t.length>0),hn.iC):tb(this.query,this.afs.schedulers.outsideAngular).pipe(hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(gs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ux(e);return ax(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return cA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),hn.iC)}get(e){return(0,Rn.D)(this.query.get(e)).pipe(hn.iC)}}const dx=new h.OlP("angularfire2.enableFirestorePersistence"),hx=new h.OlP("angularfire2.firestore.persistenceSettings"),nP=new h.OlP("angularfire2.firestore.settings"),rP=new h.OlP("angularfire2.firestore.use-emulator");function fx(n,e=(t=>t)){return{query:e(n),ref:n}}let px=(()=>{class n{constructor(t,r,o,u,d,m,w,b,A,M,L,G,ee,Re,Ze,vt,Mt){this.schedulers=w;const Yt=(0,fr.on)(t,m,r),Lt=A;M&&sx(Yt,m,L,ee,Re,Ze,G,vt),[this.firestore,this.persistenceEnabled$]=(0,fr.cc)(`${Yt.name}.firestore`,"AngularFirestore",Yt.name,()=>{const Qt=m.runOutsideAngular(()=>Yt.firestore());if(u&&Qt.settings(u),Lt&&Qt.useEmulator(...Lt),o&&!Gi(d)){const yn=()=>{try{return(0,Rn.D)(Qt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Bi){return"undefined"!=typeof console&&console.warn(Bi),Et(!1)}};return[Qt,m.runOutsideAngular(yn)]}return[Qt,Et(!1)]},[u,Lt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=fx(o,r),m=this.schedulers.ngZone.run(()=>u);return new lx(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new tP(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new cx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fr.Dh),h.LFG(fr.xv,8),h.LFG(dx,8),h.LFG(nP,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(hn.HU),h.LFG(hx,8),h.LFG(rP,8),h.LFG(lA,8),h.LFG(XM,8),h.LFG(ex,8),h.LFG(tx,8),h.LFG(nx,8),h.LFG(rx,8),h.LFG(ix,8),h.LFG(aA,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),iP=(()=>{class n{constructor(){eb.Z.registerVersion("angularfire",hn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:dx,useValue:!0},{provide:hx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[px]}),n})(),gx=(()=>{class n{constructor(t){this.firestore=t}guardarUsuario(t){return this.firestore.collection("actor").add(Object.assign({},t))}guardarPais(t){return this.firestore.collection("pais").add(Object.assign({},t))}getAllActor(){return this.firestore.collection("actor",t=>t).snapshotChanges().pipe((0,Dt.U)(t=>t.map(r=>{var o=r.payload.doc.data();return{id:r.payload.doc.id,data:{nombre:o.nombre,apellido:o.apellido,email:o.email,nacionalidad:o.nacionalidad}}})))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(px))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sP(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"ul",4),h.NdJ("click",function(){const u=h.CHM(t).$implicit;return h.oxw().devolverPais(u)}),h.TgZ(1,"li",5)(2,"div")(3,"h6",6),h._uU(4),h.qZA(),h.TgZ(5,"small",7),h._uU(6),h.qZA()(),h._UZ(7,"img",8),h.qZA()()}if(2&n){const t=e.$implicit;h.xp6(4),h.Oqu(t.nombre),h.xp6(2),h.Oqu(t.descripcion),h.xp6(1),h.s9C("src",t.foto,h.LSH)}}let oP=(()=>{class n{constructor(t){this.paisesService=t,this.onSelectedPais=new h.vpe}ngOnInit(){}devolverPais(t){this.onSelectedPais.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ga))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-tabla-paises"]],inputs:{paises:"paises"},outputs:{onSelectedPais:"onSelectedPais"},decls:5,vars:1,consts:[[1,"box-lista-paises"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-primary"],["class","list-group mb-3",3,"click",4,"ngFor","ngForOf"],[1,"list-group","mb-3",3,"click"],[1,"list-group-item","d-flex","justify-content-between","lh-sm"],[1,"my-0"],[1,"text-muted"],[1,"imagen-bandera",3,"src"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"h4",1)(2,"span",2),h._uU(3,"Seleccion pais"),h.qZA()(),h.YNc(4,sP,8,3,"ul",3),h.qZA()),2&t&&(h.xp6(4),h.Q6J("ngForOf",r.paises))},directives:[Gn],styles:[".imagen-bandera[_ngcontent-%COMP%]{width:30px;height:20px}.box-lista-paises[_ngcontent-%COMP%]{height:500px;overflow-y:scroll}"]}),n})();function aP(n,e){1&n&&(h.TgZ(0,"div",27),h._uU(1," Por favor ingresar un nombre "),h.qZA())}function uP(n,e){1&n&&(h.TgZ(0,"div",27),h._uU(1," Por favor ingresar un apellido "),h.qZA())}function lP(n,e){1&n&&(h.TgZ(0,"div",27),h._uU(1," Por favor ingresar un email "),h.qZA())}function cP(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"input",28),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.s9C("value",t.pais.nombre)}}function dP(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"input",28),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.s9C("value",t.pais.descripcion)}}function hP(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"img",29),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.s9C("src",t.pais.foto,h.LSH)}}let fP=(()=>{class n{constructor(t,r,o){this.fb=t,this.paisesService=r,this.actorService=o,this.paisIsSelected=!1,this.paises=[]}ngOnInit(){this.registroFormulario=this.fb.group({nombre:["",{validators:[Np.required]}],apellido:["",{validators:[Np.required]}],email:["",{validators:[Np.required,Np.email]}]}),this.paisesService.listarPaises().subscribe(t=>{console.log(t);for(var r=0;r<11;r++){var o=new pE;o.nombre=t[r].name.common,o.descripcion=t[r].name.official,o.foto=t[r].flags.png,this.paises.push(o)}})}registrar(){var t=new Zy;t.nombre=this.nombre(),t.apellido=this.apellido(),t.email=this.email(),t.nacionalidad=this.pais.nombre,this.actorService.guardarUsuario(t).then(r=>{console.log({success:r})}).catch(r=>console.log(r))}nombre(){return this.registroFormulario.controls.nombre.value}apellido(){return this.registroFormulario.controls.apellido.value}email(){return this.registroFormulario.controls.email.value}mostrarPais(t){this.paisIsSelected=!0,console.log(t),this.pais=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(fE),h.Y36(Ga),h.Y36(gx))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-alta-actor"]],decls:43,vars:9,consts:[[1,"container","box-actor"],[1,"row","g-5"],[1,"col-md-5","col-lg-4","order-md-last"],[3,"paises","onSelectedPais"],[1,"col-md-7","col-lg-8"],[1,"mb-3"],["novalidate","",1,"needs-validation",3,"formGroup"],[1,"row","g-3"],[1,"col-sm-6"],["for","firstName",1,"form-label"],["type","text","placeholder","Ingrese el  nombre","formControlName","nombre","required","",1,"form-control"],["class","d-flex justify-content-center error",4,"ngIf"],["for","lastName",1,"form-label"],["type","text","placeholder","Ingrese el  apellido","formControlName","apellido","required","",1,"form-control"],[1,"col-12"],["for","email",1,"form-label"],[1,"text-muted"],["type","email","formControlName","email","placeholder","you@example.com",1,"form-control"],[1,"col-md-3"],["for","country",1,"form-label"],[4,"ngIf"],[1,"col-md-5"],["for","state",1,"form-label"],[1,"col-md-4"],["for","zip",1,"form-label"],[3,"disabled","click"],[1,"my-4"],[1,"d-flex","justify-content-center","error"],["type","text",1,"form-control",3,"value"],[1,"imagen",3,"src"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-tabla-paises",3),h.NdJ("onSelectedPais",function(u){return r.mostrarPais(u)}),h.qZA()(),h.TgZ(4,"div",4)(5,"h4",5),h._uU(6,"Alta Actor"),h.qZA(),h.TgZ(7,"form",6)(8,"div",7)(9,"div",8)(10,"label",9),h._uU(11,"First name"),h.qZA(),h._UZ(12,"input",10),h.YNc(13,aP,2,0,"div",11),h.qZA(),h.TgZ(14,"div",8)(15,"label",12),h._uU(16,"Last name"),h.qZA(),h._UZ(17,"input",13),h.YNc(18,uP,2,0,"div",11),h.qZA(),h.TgZ(19,"div",14)(20,"label",15),h._uU(21,"Email "),h.TgZ(22,"span",16),h._uU(23,"(Optional)"),h.qZA()(),h._UZ(24,"input",17),h.YNc(25,lP,2,0,"div",11),h.qZA(),h.TgZ(26,"div",18)(27,"label",19),h._uU(28,"Pais"),h.qZA(),h.YNc(29,cP,2,1,"div",20),h.qZA(),h.TgZ(30,"div",21)(31,"label",22),h._uU(32,"Descripci\xf3n"),h.qZA(),h.YNc(33,dP,2,1,"div",20),h.qZA(),h.TgZ(34,"div",23)(35,"label",24),h._uU(36,"Bandera"),h.qZA(),h.YNc(37,hP,2,1,"div",20),h.qZA()(),h.TgZ(38,"button",25),h.NdJ("click",function(){return r.registrar()}),h._uU(39,"registrar"),h.qZA(),h._UZ(40,"hr",26)(41,"hr",26)(42,"hr",26),h.qZA()()()()),2&t&&(h.xp6(3),h.Q6J("paises",r.paises),h.xp6(4),h.Q6J("formGroup",r.registroFormulario),h.xp6(6),h.Q6J("ngIf",(null==r.registroFormulario.controls.nombre.errors?null:r.registroFormulario.controls.nombre.errors.required)&&r.registroFormulario.controls.nombre.touched),h.xp6(5),h.Q6J("ngIf",(null==r.registroFormulario.controls.apellido.errors?null:r.registroFormulario.controls.apellido.errors.required)&&r.registroFormulario.controls.apellido.touched),h.xp6(7),h.Q6J("ngIf",(null==r.registroFormulario.controls.email.errors?null:r.registroFormulario.controls.email.errors.required)&&r.registroFormulario.controls.email.touched),h.xp6(4),h.Q6J("ngIf",r.pais),h.xp6(4),h.Q6J("ngIf",r.pais),h.xp6(4),h.Q6J("ngIf",r.pais),h.xp6(1),h.Q6J("disabled",r.registroFormulario.invalid||!r.paisIsSelected))},directives:[oP,jy,Cy,Zu,xc,Dy,Pc,Yu,qn],styles:[".box-actor[_ngcontent-%COMP%]{padding:4%;display:flex;align-items:center}.imagen[_ngcontent-%COMP%]{width:50px;height:40px}.error[_ngcontent-%COMP%]{color:red}"]}),n})();function pP(n,e){1&n&&(h.TgZ(0,"div",28),h._uU(1," Por favor ingresar un t\xedtulo "),h.qZA())}function gP(n,e){1&n&&(h.TgZ(0,"div",28),h._uU(1," Por favor ingresar un tipo "),h.qZA())}function mP(n,e){1&n&&(h.TgZ(0,"div",28),h._uU(1," Por favor ingresar una fecha de estreno "),h.qZA())}function yP(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"img",29),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.s9C("src",t.pais.foto,h.LSH)}}let vP=(()=>{class n{constructor(t,r,o){this.fb=t,this.paisesService=r,this.actorService=o,this.paisIsSelected=!1,this.actores=[]}ngOnInit(){}registrar(){}nombre(){return this.registroFormulario.controls.nombre.value}apellido(){return this.registroFormulario.controls.apellido.value}email(){return this.registroFormulario.controls.email.value}mostrarPais(t){this.paisIsSelected=!0,console.log(t),this.pais=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(fE),h.Y36(Ga),h.Y36(gx))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-alta-pelicula"]],decls:44,vars:5,consts:[[1,"container","box-actor"],[1,"row","g-5"],[1,"col-md-5","col-lg-4","order-md-last"],[1,"col-md-7","col-lg-8"],[1,"mb-3"],["novalidate","",1,"needs-validation",3,"formGroup"],[1,"row","g-3"],[1,"col-sm-6"],["for","firstName",1,"form-label"],["type","text","placeholder","Ingrese el  nombre","formControlName","nombre","required","",1,"form-control"],["class","d-flex justify-content-center error",4,"ngIf"],["for","lastName",1,"form-label"],["type","text","placeholder","Ingrese el  tipo","formControlName","tipo","required","",1,"form-control"],[1,"col-12"],["for","fecha",1,"form-label"],[1,"text-muted"],["type","fecha","formControlName","fecha","placeholder","you@example.com",1,"form-control"],[1,"col-md-3"],["for","country",1,"form-label"],["type","datetime-local","formControlName","fecha",1,"form-control"],[1,"col-md-5"],["for","state",1,"form-label"],["type","number","formControlName","cantidad",1,"form-control"],["type","number","formControlName","foto",1,"form-control"],[1,"col-md-4"],["for","zip",1,"form-label"],[4,"ngIf"],[1,"my-4"],[1,"d-flex","justify-content-center","error"],[1,"imagen",3,"src"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1),h._UZ(2,"div",2),h.TgZ(3,"div",3)(4,"h4",4),h._uU(5,"Alta Actor"),h.qZA(),h.TgZ(6,"form",5)(7,"div",6)(8,"div",7)(9,"label",8),h._uU(10,"First name"),h.qZA(),h._UZ(11,"input",9),h.YNc(12,pP,2,0,"div",10),h.qZA(),h.TgZ(13,"div",7)(14,"label",11),h._uU(15,"Last name"),h.qZA(),h._UZ(16,"input",12),h.YNc(17,gP,2,0,"div",10),h.qZA(),h.TgZ(18,"div",13)(19,"label",14),h._uU(20,"fecha "),h.TgZ(21,"span",15),h._uU(22,"(Optional)"),h.qZA()(),h._UZ(23,"input",16),h.YNc(24,mP,2,0,"div",10),h.qZA(),h.TgZ(25,"div",17)(26,"label",18),h._uU(27,"Fecha"),h.qZA(),h._UZ(28,"input",19),h.qZA(),h.TgZ(29,"div",20)(30,"label",21),h._uU(31,"Cantidad"),h.qZA(),h._UZ(32,"input",22),h.qZA(),h.TgZ(33,"div",20)(34,"label",21),h._uU(35,"foto"),h.qZA(),h._UZ(36,"input",23),h.qZA(),h.TgZ(37,"div",24)(38,"label",25),h._uU(39,"Bandera"),h.qZA(),h.YNc(40,yP,2,1,"div",26),h.qZA()(),h._UZ(41,"hr",27)(42,"hr",27)(43,"hr",27),h.qZA()()()()),2&t&&(h.xp6(6),h.Q6J("formGroup",r.registroFormulario),h.xp6(6),h.Q6J("ngIf",(null==r.registroFormulario.controls.nombre.errors?null:r.registroFormulario.controls.nombre.errors.required)&&r.registroFormulario.controls.nombre.touched),h.xp6(5),h.Q6J("ngIf",(null==r.registroFormulario.controls.tipo.errors?null:r.registroFormulario.controls.tipo.errors.required)&&r.registroFormulario.controls.tipo.touched),h.xp6(7),h.Q6J("ngIf",(null==r.registroFormulario.controls.fecha.errors?null:r.registroFormulario.controls.fecha.errors.required)&&r.registroFormulario.controls.fecha.touched),h.xp6(16),h.Q6J("ngIf",r.pais))},directives:[jy,Cy,Zu,xc,Dy,Pc,Yu,qn,qp],styles:[""]}),n})();class hA{}function _P(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr",3),h.NdJ("click",function(){const u=h.CHM(t).$implicit;return h.oxw().enviarPelicula(u)}),h.TgZ(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td"),h._uU(6),h.qZA(),h.TgZ(7,"td"),h._uU(8),h.qZA(),h._UZ(9,"td"),h.qZA()}if(2&n){const t=e.$implicit;h.xp6(2),h.Oqu(t.nombre),h.xp6(2),h.Oqu(t.tipo),h.xp6(2),h.Oqu(t.fechaEstreno),h.xp6(2),h.Oqu(t.cantidadPublico)}}let EP=(()=>{class n{constructor(){this.onSelectedPelicula=new h.vpe}ngOnInit(){}enviarPelicula(t){this.onSelectedPelicula.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-tabla-pelicula"]],inputs:{peliculasInPeliComponent:"peliculasInPeliComponent"},outputs:{onSelectedPelicula:"onSelectedPelicula"},decls:13,vars:1,consts:[[1,"table"],["scope","col"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),h._uU(4,"Nombre"),h.qZA(),h.TgZ(5,"th",1),h._uU(6,"Tipo"),h.qZA(),h.TgZ(7,"th",1),h._uU(8,"Fecha estreno"),h.qZA(),h.TgZ(9,"th",1),h._uU(10,"Cantidad p\xfablico"),h.qZA()()(),h.TgZ(11,"tbody"),h.YNc(12,_P,10,4,"tr",2),h.qZA()()),2&t&&(h.xp6(12),h.Q6J("ngForOf",r.peliculasInPeliComponent))},directives:[Gn],styles:[""]}),n})();function wP(n,e){if(1&n&&(h.TgZ(0,"div")(1,"ul")(2,"li"),h._uU(3),h.qZA(),h.TgZ(4,"li"),h._uU(5),h.qZA(),h.TgZ(6,"li"),h._uU(7),h.qZA()()()),2&n){const t=h.oxw();h.xp6(3),h.hij(" ",t.peliculaSelected.nombre,""),h.xp6(2),h.hij(" ",t.peliculaSelected.tipo,""),h.xp6(2),h.hij(" ",t.peliculaSelected.fechaEstreno,"")}}let IP=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-detalle-pelicula"]],inputs:{peliculaSelected:"peliculaSelected"},decls:3,vars:1,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(h.TgZ(0,"h2"),h._uU(1,"Detalle"),h.qZA(),h.YNc(2,wP,8,3,"div",0)),2&t&&(h.xp6(2),h.Q6J("ngIf",r.peliculaSelected))},directives:[qn],styles:[""]}),n})();const bP=[{path:"busqueda",component:(()=>{class n{constructor(){}ngOnInit(){var t=new hA;t.nombre="Zombie land",t.fechaEstreno="20/04/2020",t.cantidadPublico=15,t.tipo="Comedia",t.foto="../../fotos/av.PNG";var r=new hA;r.nombre="Orgulllo y prejuicio",r.fechaEstreno="20/04/2020",r.cantidadPublico=15,r.tipo="Romance";var o=new hA;o.nombre="Avengers",o.fechaEstreno="20/04/2020",o.cantidadPublico=15,o.tipo="Fantasia",this.peliculasFromBusqueda=[t,r,o]}mostrarPelicula(t){this.peliculaSelected=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-busqueda"]],decls:31,vars:2,consts:[[1,"container"],["role","main"],[1,"jumbotron"],[1,"display-3"],[3,"peliculasInPeliComponent","onSelectedPelicula"],["href","#","role","button",1,"btn","btn-primary","btn-lg"],[1,"row"],[1,"col-md-4"],["href","#","role","button",1,"btn","btn-secondary"],[3,"peliculaSelected"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",0)(4,"h1",3),h._uU(5,"Tabla peliculas"),h.qZA(),h.TgZ(6,"app-tabla-pelicula",4),h.NdJ("onSelectedPelicula",function(u){return r.mostrarPelicula(u)}),h.qZA(),h.TgZ(7,"p")(8,"a",5),h._uU(9,"Learn more \xbb"),h.qZA()()()(),h.TgZ(10,"div",0)(11,"div",6)(12,"div",7)(13,"h2"),h._uU(14,"Eliminar"),h.qZA(),h.TgZ(15,"p"),h._uU(16,"Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. "),h.qZA(),h.TgZ(17,"p")(18,"a",8),h._uU(19,"View details \xbb"),h.qZA()()(),h.TgZ(20,"div",7),h._UZ(21,"app-detalle-pelicula",9),h.qZA(),h.TgZ(22,"div",7)(23,"h2"),h._uU(24,"Modificar "),h.qZA(),h.TgZ(25,"p"),h._uU(26,"Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus."),h.qZA(),h.TgZ(27,"p")(28,"a",8),h._uU(29,"View details \xbb"),h.qZA()()()(),h._UZ(30,"hr"),h.qZA()()()),2&t&&(h.xp6(6),h.Q6J("peliculasInPeliComponent",r.peliculasFromBusqueda),h.xp6(15),h.Q6J("peliculaSelected",r.peliculaSelected))},directives:[EP,IP],styles:[""]}),n})()},{path:"actor/alta-actor",component:fP},{path:"pelicula/alta-pelicula",component:vP}];let DP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[C0.forRoot(bP)],C0]}),n})(),CP=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-menu"]],decls:14,vars:0,consts:[[1,"navbar","navbar-expand","navbar-dark","bg-dark"],["routerLink","busqueda",1,"navbar-brand"],["routerLink","actor/alta-actor",1,"navbar-brand"],["routerLink","pelicula/alta-pelicula",1,"navbar-brand"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","login",1,"nav-link"],["routerLink","backoffice",1,"nav-link"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0)(1,"a",1),h._uU(2,"Busqueda"),h.qZA(),h.TgZ(3,"a",2),h._uU(4,"Actor"),h.qZA(),h.TgZ(5,"a",3),h._uU(6,"Pelicula"),h.qZA(),h.TgZ(7,"div",4)(8,"li",5)(9,"a",6),h._uU(10,"login"),h.qZA()(),h.TgZ(11,"li",5)(12,"a",7),h._uU(13,"backoffice"),h.qZA()()()())},directives:[Fa],styles:[""]}),n})(),TP=(()=>{class n{constructor(){this.title="Parciales"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"contenedor"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"app-menu")(2,"router-outlet"),h.qZA())},directives:[CP,Uu],styles:[""]}),n})();const mx_firebase={apiKey:"AIzaSyBwLarx1Ah1zcHHKBnFGNNM0QfzcHArpwI",authDomain:"laboratorio-1d6f1.firebaseapp.com",databaseURL:"https://laboratorio-1d6f1.firebaseio.com",projectId:"laboratorio-1d6f1",storageBucket:"laboratorio-1d6f1.appspot.com",messagingSenderId:"551715701399",appId:"1:551715701399:web:5c8439b8b01f2a4db09fd2",measurementId:"G-H3RY56ESRN"};var yx=x(655),AP=x(7982);const _x="firebase_screen_id",pA="outlet",e0="screen_class",Ex="screen_name";let BP=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const gA={},jP=n=>{const e=[n[e0],n[pA]].join("#");if(gA.hasOwnProperty(e))return gA[e];{const t=BP++;return gA[e]=t,t}},WP=new h.OlP("angularfire2.analytics.analyticsCollectionEnabled"),ZP=new h.OlP("angularfire2.analytics.appVersion"),KP=new h.OlP("angularfire2.analytics.appName"),YP=new h.OlP("angularfire2.analytics.debugMode"),QP=new h.OlP("angularfire2.analytics.config"),nb="dataLayer";let t0=(()=>{class n{constructor(t,r,o,u,d,m,w,b,A){if(this.analyticsInitialized=new Promise(()=>{}),function Dr(n){return n===Ai}(w)){window[nb]=window[nb]||[];const L=(...Re)=>"config"===Re[0]&&"firebase"===Re[2].origin&&(this.measurementId=Re[1],!0),G=Re=>{window.gtag=(...Ze)=>{Re&&Re(...Ze),"event"===Ze[0]&&Ze[2].send_to===this.measurementId&&(u&&(Ze[2].app_name=u),o&&(Ze[2].app_version=o)),d&&"undefined"!=typeof console&&console.info(...Ze),function(...vt){window[nb].push(arguments)}(...Ze)}};window[nb].some(L)?(this.analyticsInitialized=Promise.resolve(),G()):this.analyticsInitialized=new Promise(Re=>{G((...Ze)=>{L(...Ze)&&Re()})}),m&&this.updateConfig(m),d&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const M=Et(void 0).pipe((0,Y_.Q)(A.outsideAngular),Nn(AP.Gb),Nn(L=>L?b.runOutsideAngular(()=>x.e(643).then(x.bind(x,8643))):ps.E),(0,Dt.U)(()=>(0,fr.cc)("analytics","AngularFireAnalytics",t.name,()=>{const L=t.analytics();return!1===r&&L.setAnalyticsCollectionEnabled(!1),L},[t,r,m,d])),$T({bufferSize:1,refCount:!1}));return(0,fr.pX)(this,M,b)}updateConfig(t){return(0,yx.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fr.Ot),h.LFG(WP,8),h.LFG(ZP,8),h.LFG(KP,8),h.LFG(YP,8),h.LFG(QP,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(hn.HU))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ix=(()=>{class n{constructor(t,r,o,u){if(this.disposables=[],eb.Z.registerVersion("angularfire",hn.q4.full,"compat-user-tracking"),Gi(r))this.initialized=Promise.resolve();else{let d;this.initialized=u.runOutsideAngular(()=>new Promise(m=>d=m)),this.disposables=[o.authState.subscribe(m=>{t.setUserId(null==m?void 0:m.uid),d()}),o.credential.subscribe(m=>{if(m){const w=m.user.isAnonymous?"anonymous":m.additionalUserInfo.providerId;m.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:w}),t.logEvent("login",{method:w})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(t0),h.LFG(h.Lbi),h.LFG(lA),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),s1=(()=>{class n{constructor(t,r,o,u,d,m){if(eb.Z.registerVersion("angularfire",hn.q4.full,"compat-screen-tracking"),!r||!t)return this;d.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(Tr(o=>o instanceof no)).pipe(Nn(o=>{var u;const m=(null===(u=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,G=>G.replace("://",":///"))).root.children[o.snapshot.outlet])||void 0===u?void 0:u.toString())||"",w=n.routerState.root.children.map(G=>G).find(G=>G.outlet===o.snapshot.outlet);if(!w)return Et(null);let b=w;for(;b.firstChild;)b=b.firstChild;const A=b.pathFromRoot.map(G=>{var ee;return null===(ee=G.routeConfig)||void 0===ee?void 0:ee.path}).filter(G=>G).join("/")||"/",M={[Ex]:A,page_path:`/${m}`,firebase_event_origin:"auto",firebase_screen:A,[pA]:o.snapshot.outlet};e&&(M.page_title=e.getTitle());let L=w.component;if(L){if(L===rh){let G=o.snapshot;for(;G.firstChild;)G=G.firstChild;L=G.component}}else L=o.snapshot.component;if("string"==typeof L)return Et(Object.assign(Object.assign({},M),{[e0]:L}));if(L){const G=t.resolveComponentFactory(L);return Et(Object.assign(Object.assign({},M),{[e0]:G.selector}))}return Et(null)}),Tr(o=>!!o),(0,Dt.U)(o=>Object.assign({firebase_screen_class:o[e0],[_x]:jP(o)},o)),function SP(n,e,t,r){return(0,Jr.e)((o,u)=>{let d;e&&"function"!=typeof e?({duration:t,element:d,connector:r}=e):d=e;const m=new Map,w=ee=>{m.forEach(ee),ee(u)},b=ee=>w(Re=>Re.error(ee));let A=0,M=!1;const L=new Ur.Q(u,ee=>{try{const Re=n(ee);let Ze=m.get(Re);if(!Ze){m.set(Re,Ze=r?r():new Qr.x);const vt=function G(ee,Re){const Ze=new Wn.y(vt=>{A++;const Mt=Re.subscribe(vt);return()=>{Mt.unsubscribe(),0==--A&&M&&L.unsubscribe()}});return Ze.key=ee,Ze}(Re,Ze);if(u.next(vt),t){const Mt=(0,Ur.x)(Ze,()=>{Ze.complete(),null==Mt||Mt.unsubscribe()},void 0,void 0,()=>m.delete(Re));L.add((0,bu.Xf)(t(vt)).subscribe(Mt))}}Ze.next(d?d(ee):ee)}catch(Re){b(Re)}},()=>w(ee=>ee.complete()),b,()=>m.clear(),()=>(M=!0,0===A));o.subscribe(L)})}(o=>o[pA]),(0,tr.z)(o=>o.pipe(nl((u,d)=>JSON.stringify(u)===JSON.stringify(d)),eo(void 0),zo(),(0,Dt.U)(([u,d])=>u?Object.assign({firebase_previous_class:u[e0],firebase_previous_screen:u[Ex],firebase_previous_id:u[_x]},d):d)))))(r,o,u).pipe(Nn(w=>(0,yx.mG)(this,void 0,void 0,function*(){return m&&(yield m.initialized),yield t.logEvent("screen_view",w)}))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(t0),h.LFG(Sr,8),h.LFG(ql,8),h.LFG(h._Vd),h.LFG(h.R0b),h.LFG(Ix,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),o1=(()=>{class n{constructor(t,r,o){eb.Z.registerVersion("angularfire",hn.q4.full,"analytics-compat"),t.app.then(()=>{})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(t0),h.LFG(s1,8),h.LFG(Ix,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[t0]}),n})(),a1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[TP]}),n.\u0275inj=h.cJS({providers:[],imports:[[_u,DP,hE,rg,Pb,fr.hO.initializeApp(mx_firebase),o1,iP]]}),n})();Ud().bootstrapModule(a1).catch(n=>console.error(n))},7982:(nt,Ee,x)=>{x.d(Ee,{Gb:()=>h.Gb});var h=x(579)},5867:(nt,Ee,x)=>{x.d(Ee,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=x(9681);(0,h.registerVersion)("firebase","9.8.1","app")},127:(nt,Ee,x)=>{x.d(Ee,{Z:()=>h.Z});var h=x(3942);h.Z.registerVersion("firebase","9.8.1","app-compat")},7092:(nt,Ee,x)=>{x.r(Ee);var h=x(5861),Y=x(3942),P=x(2090),se=x(9681),le=x(655),ve=x(1877),oe=x(4859);const ke=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Be=function we(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),et=new ve.Yd("@firebase/auth");function Ye(y,...f){et.logLevel<=ve.in.ERROR&&et.error(`Auth (${se.SDK_VERSION}): ${y}`,...f)}function Se(y,...f){throw Fe(y,...f)}function be(y,...f){return Fe(y,...f)}function De(y,f,g){const _=Object.assign(Object.assign({},Be()),{[f]:g});return new P.LL("auth","Firebase",_).create(f,{appName:y.name})}function We(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Se(y,"argument-error"),De(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fe(y,...f){if("string"!=typeof y){const g=f[0],_=[...f.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(g,..._)}return he.create(y,...f)}function B(y,f,...g){if(!y)throw Fe(f,...g)}function Ce(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ye(f),new Error(f)}function K(y,f){y||Ce(f)}const re=new Map;function ne(y){K(y instanceof Function,"Expected a class definition");let f=re.get(y);return f?(K(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,re.set(y,f),f)}function Le(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function dt(){return"http:"===Ut()||"https:"===Ut()}function Ut(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Wt{constructor(f,g){this.shortDelay=f,this.longDelay=g,K(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function At(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dt()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fn(y,f){K(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class fn{static initialize(f,g,_){this.fetchImpl=f,g&&(this.headersImpl=g),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},jn=new Wt(3e4,6e4);function Ct(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Tt(y,f,g,_){return wn.apply(this,arguments)}function wn(){return(wn=(0,h.Z)(function*(y,f,g,_,D={}){return vi(y,D,(0,h.Z)(function*(){let S={},Z={};_&&("GET"===f?Z=_:S={body:JSON.stringify(_)});const ye=(0,P.xO)(Object.assign({key:y.config.apiKey},Z)).slice(1),qe=yield y._getAdditionalHeaders();return qe["Content-Type"]="application/json",y.languageCode&&(qe["X-Firebase-Locale"]=y.languageCode),fn.fetch()(vr(y,y.config.apiHost,g,ye),Object.assign({method:f,headers:qe,referrerPolicy:"no-referrer"},S))}))})).apply(this,arguments)}function vi(y,f,g){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,h.Z)(function*(y,f,g){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},$t),f);try{const D=new ar(y),S=yield Promise.race([g(),D.promise]);D.clearNetworkTimeout();const Z=yield S.json();if("needConfirmation"in Z)throw Hn(y,"account-exists-with-different-credential",Z);if(S.ok&&!("errorMessage"in Z))return Z;{const ye=S.ok?Z.errorMessage:Z.error.message,[qe,rt]=ye.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===qe)throw Hn(y,"credential-already-in-use",Z);if("EMAIL_EXISTS"===qe)throw Hn(y,"email-already-in-use",Z);const mt=_[qe]||qe.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw De(y,mt,rt);Se(y,mt)}}catch(D){if(D instanceof P.ZR)throw D;Se(y,"network-request-failed")}})).apply(this,arguments)}function ln(y,f,g,_){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,h.Z)(function*(y,f,g,_,D={}){const S=yield Tt(y,f,g,_,D);return"mfaPendingCredential"in S&&Se(y,"multi-factor-auth-required",{_serverResponse:S}),S})).apply(this,arguments)}function vr(y,f,g,_){const D=`${f}${g}?${_}`;return y.config.emulator?Fn(y.config,D):`${y.config.apiScheme}://${D}`}class ar{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,_)=>{this.timer=setTimeout(()=>_(be(this.auth,"network-request-failed")),jn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hn(y,f,g){const _={appName:y.name};g.email&&(_.email=g.email),g.phoneNumber&&(_.phoneNumber=g.phoneNumber);const D=be(y,f,_);return D.customData._tokenResponse=g,D}function er(){return(er=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Jt(y,f){return vn.apply(this,arguments)}function vn(){return(vn=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Kr(y,f){return _r.apply(this,arguments)}function _r(){return(_r=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Cn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function ii(){return(ii=(0,h.Z)(function*(y,f=!1){const g=(0,P.m9)(y),_=yield g.getIdToken(f),D=st(_);B(D&&D.exp&&D.auth_time&&D.iat,g.auth,"internal-error");const S="object"==typeof D.firebase?D.firebase:void 0,Z=null==S?void 0:S.sign_in_provider;return{claims:D,token:_,authTime:Cn(Vt(D.auth_time)),issuedAtTime:Cn(Vt(D.iat)),expirationTime:Cn(Vt(D.exp)),signInProvider:Z||null,signInSecondFactor:(null==S?void 0:S.sign_in_second_factor)||null}})).apply(this,arguments)}function Vt(y){return 1e3*Number(y)}function st(y){const[f,g,_]=y.split(".");if(void 0===f||void 0===g||void 0===_)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,P.tV)(g);return D?JSON.parse(D):(Ye("Failed to decode base64 JWT payload"),null)}catch(D){return Ye("Caught error parsing JWT payload as JSON",D),null}}function sn(y,f){return kr.apply(this,arguments)}function kr(){return(kr=(0,h.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(_){throw _ instanceof P.ZR&&Ot(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function Ot({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Fr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const D=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const _=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),_)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class xn{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cn(this.lastLoginAt),this.creationTime=Cn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Tn(y){return k.apply(this,arguments)}function k(){return(k=(0,h.Z)(function*(y){var f;const g=y.auth,_=yield y.getIdToken(),D=yield sn(y,Kr(g,{idToken:_}));B(null==D?void 0:D.users.length,g,"internal-error");const S=D.users[0];y._notifyReloadListener(S);const Z=(null===(f=S.providerUserInfo)||void 0===f?void 0:f.length)?V(S.providerUserInfo):[],ye=Te(y.providerData,Z),mt=!!y.isAnonymous&&!(y.email&&S.passwordHash||(null==ye?void 0:ye.length)),gt={uid:S.localId,displayName:S.displayName||null,photoURL:S.photoUrl||null,email:S.email||null,emailVerified:S.emailVerified||!1,phoneNumber:S.phoneNumber||null,tenantId:S.tenantId||null,providerData:ye,metadata:new xn(S.createdAt,S.lastLoginAt),isAnonymous:mt};Object.assign(y,gt)})).apply(this,arguments)}function z(){return(z=(0,h.Z)(function*(y){const f=(0,P.m9)(y);yield Tn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Te(y,f){return[...y.filter(_=>!f.some(D=>D.providerId===_.providerId)),...f]}function V(y){return y.map(f=>{var{providerId:g}=f,_=(0,le._T)(f,["providerId"]);return{providerId:g,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function U(){return(U=(0,h.Z)(function*(y,f){const g=yield vi(y,{},(0,h.Z)(function*(){const _=(0,P.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:D,apiKey:S}=y.config,Z=vr(y,D,"/v1/token",`key=${S}`),ye=yield y._getAdditionalHeaders();return ye["Content-Type"]="application/x-www-form-urlencoded",fn.fetch()(Z,{method:"POST",headers:ye,body:_})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class X{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){B(f.idToken,"internal-error"),B(void 0!==f.idToken,"internal-error"),B(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function ht(y){const f=st(y);return B(f,"internal-error"),B(void 0!==f.exp,"internal-error"),B(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var _=this;return(0,h.Z)(function*(){return B(!_.accessToken||_.refreshToken,f,"user-token-expired"),g||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(f,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var _=this;return(0,h.Z)(function*(){const{accessToken:D,refreshToken:S,expiresIn:Z}=yield function J(y,f){return U.apply(this,arguments)}(f,g);_.updateTokensAndExpiration(D,S,Number(Z))})()}updateTokensAndExpiration(f,g,_){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(f,g){const{refreshToken:_,accessToken:D,expirationTime:S}=g,Z=new X;return _&&(B("string"==typeof _,"internal-error",{appName:f}),Z.refreshToken=_),D&&(B("string"==typeof D,"internal-error",{appName:f}),Z.accessToken=D),S&&(B("number"==typeof S,"internal-error",{appName:f}),Z.expirationTime=S),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new X,this.toJSON())}_performRefresh(){return Ce("not implemented")}}function me(y,f){B("string"==typeof y||void 0===y,"internal-error",{appName:f})}class xe{constructor(f){var{uid:g,auth:_,stsTokenManager:D}=f,S=(0,le._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=_,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=S.displayName||null,this.email=S.email||null,this.emailVerified=S.emailVerified||!1,this.phoneNumber=S.phoneNumber||null,this.photoURL=S.photoURL||null,this.isAnonymous=S.isAnonymous||!1,this.tenantId=S.tenantId||null,this.providerData=S.providerData?[...S.providerData]:[],this.metadata=new xn(S.createdAt||void 0,S.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,h.Z)(function*(){const _=yield sn(g,g.stsTokenManager.getToken(g.auth,f));return B(_,g.auth,"internal-error"),g.accessToken!==_&&(g.accessToken=_,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),_})()}getIdTokenResult(f){return function Er(y){return ii.apply(this,arguments)}(this,f)}reload(){return function q(y){return z.apply(this,arguments)}(this)}_assign(f){this!==f&&(B(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new xe(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var _=this;return(0,h.Z)(function*(){let D=!1;f.idToken&&f.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(f),D=!0),g&&(yield Tn(_)),yield _.auth._persistUserIfCurrent(_),D&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var f=this;return(0,h.Z)(function*(){const g=yield f.getIdToken();return yield sn(f,function ft(y,f){return er.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var _,D,S,Z,ye,qe,rt,mt;const gt=null!==(_=g.displayName)&&void 0!==_?_:void 0,Pn=null!==(D=g.email)&&void 0!==D?D:void 0,di=null!==(S=g.phoneNumber)&&void 0!==S?S:void 0,ka=null!==(Z=g.photoURL)&&void 0!==Z?Z:void 0,hh=null!==(ye=g.tenantId)&&void 0!==ye?ye:void 0,Cp=null!==(qe=g._redirectEventId)&&void 0!==qe?qe:void 0,Ho=null!==(rt=g.createdAt)&&void 0!==rt?rt:void 0,qu=null!==(mt=g.lastLoginAt)&&void 0!==mt?mt:void 0,{uid:Sc,emailVerified:Tp,isAnonymous:Sr,providerData:fh,stsTokenManager:ph}=g;B(Sc&&ph,f,"internal-error");const gh=X.fromJSON(this.name,ph);B("string"==typeof Sc,f,"internal-error"),me(gt,f.name),me(Pn,f.name),B("boolean"==typeof Tp,f,"internal-error"),B("boolean"==typeof Sr,f,"internal-error"),me(di,f.name),me(ka,f.name),me(hh,f.name),me(Cp,f.name),me(Ho,f.name),me(qu,f.name);const Fa=new xe({uid:Sc,auth:f,email:Pn,emailVerified:Tp,displayName:gt,isAnonymous:Sr,photoURL:ka,phoneNumber:di,tenantId:hh,stsTokenManager:gh,createdAt:Ho,lastLoginAt:qu});return fh&&Array.isArray(fh)&&(Fa.providerData=fh.map(La=>Object.assign({},La))),Cp&&(Fa._redirectEventId=Cp),Fa}static _fromIdTokenResponse(f,g,_=!1){return(0,h.Z)(function*(){const D=new X;D.updateFromServerResponse(g);const S=new xe({uid:g.localId,auth:f,stsTokenManager:D,isAnonymous:_});return yield Tn(S),S})()}}const Ve=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,_){var D=this;return(0,h.Z)(function*(){D.storage[g]=_})()}_get(g){var _=this;return(0,h.Z)(function*(){const D=_.storage[g];return void 0===D?null:D})()}_remove(g){var _=this;return(0,h.Z)(function*(){delete _.storage[g]})()}_addListener(g,_){}_removeListener(g,_){}}return y.type="NONE",y})();function lt(y,f,g){return`firebase:${y}:${f}:${g}`}class It{constructor(f,g,_){this.persistence=f,this.auth=g,this.userKey=_;const{config:D,name:S}=this.auth;this.fullUserKey=lt(this.userKey,D.apiKey,S),this.fullPersistenceKey=lt("persistence",D.apiKey,S),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?xe._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,h.Z)(function*(){if(g.persistence===f)return;const _=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,_?g.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,_="authUser"){return(0,h.Z)(function*(){if(!g.length)return new It(ne(Ve),f,_);const D=(yield Promise.all(g.map(function(){var rt=(0,h.Z)(function*(mt){if(yield mt._isAvailable())return mt});return function(mt){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let S=D[0]||ne(Ve);const Z=lt(_,f.config.apiKey,f.name);let ye=null;for(const rt of g)try{const mt=yield rt._get(Z);if(mt){const gt=xe._fromJSON(f,mt);rt!==S&&(ye=gt),S=rt;break}}catch(mt){}const qe=D.filter(rt=>rt._shouldAllowMigration);return S._shouldAllowMigration&&qe.length?(S=qe[0],ye&&(yield S._set(Z,ye.toJSON())),yield Promise.all(g.map(function(){var rt=(0,h.Z)(function*(mt){if(mt!==S)try{yield mt._remove(Z)}catch(gt){}});return function(mt){return rt.apply(this,arguments)}}())),new It(S,f,_)):new It(S,f,_)})()}}function rn(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(on(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Zt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(_i(f))return"Blackberry";if(bn(f))return"Webos";if(wr(f))return"Safari";if((f.includes("chrome/")||si(f))&&!f.includes("edge/"))return"Chrome";if(pn(f))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==_?void 0:_.length))return _[1]}return"Other"}function Zt(y=(0,P.z$)()){return/firefox\//i.test(y)}function wr(y=(0,P.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function si(y=(0,P.z$)()){return/crios\//i.test(y)}function on(y=(0,P.z$)()){return/iemobile/i.test(y)}function pn(y=(0,P.z$)()){return/android/i.test(y)}function _i(y=(0,P.z$)()){return/blackberry/i.test(y)}function bn(y=(0,P.z$)()){return/webos/i.test(y)}function ur(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)}function oi(y=(0,P.z$)()){return ur(y)||pn(y)||bn(y)||_i(y)||/windows phone/i.test(y)||on(y)}function ss(y,f=[]){let g;switch(y){case"Browser":g=rn((0,P.z$)());break;case"Worker":g=`${rn((0,P.z$)())}-${y}`;break;default:g=y}const _=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${_}`}class Ir{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const _=S=>new Promise((Z,ye)=>{try{Z(f(S))}catch(qe){ye(qe)}});_.onAbort=g,this.queue.push(_);const D=this.queue.length-1;return()=>{this.queue[D]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,h.Z)(function*(){if(g.auth.currentUser===f)return;const _=[];try{for(const D of g.queue)yield D(f),D.onAbort&&_.push(D.onAbort)}catch(D){_.reverse();for(const S of _)try{S()}catch(Z){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:D.message})}})()}}class Xe{constructor(f,g,_){this.app=f,this.heartbeatServiceProvider=g,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ie(this),this.idTokenSubscription=new ie(this),this.beforeStateQueue=new Ir(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(f,g){var _=this;return g&&(this._popupRedirectResolver=ne(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var D,S;if(!_._deleted&&(_.persistenceManager=yield It.create(_,f),!_._deleted)){if(null===(D=_._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch(Z){}yield _.initializeCurrentUser(g),_.lastNotifiedUid=(null===(S=_.currentUser)||void 0===S?void 0:S.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,h.Z)(function*(){var _;const D=yield g.assertedPersistence.getCurrentUser();let S=D,Z=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ye=null===(_=g.redirectUser)||void 0===_?void 0:_._redirectEventId,qe=null==S?void 0:S._redirectEventId,rt=yield g.tryRedirectSignIn(f);(!ye||ye===qe)&&(null==rt?void 0:rt.user)&&(S=rt.user,Z=!0)}if(!S)return g.directlySetCurrentUser(null);if(!S._redirectEventId){if(Z)try{yield g.beforeStateQueue.runMiddleware(S)}catch(ye){S=D,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ye))}return S?g.reloadAndSetCurrentUserOrClear(S):g.directlySetCurrentUser(null)}return B(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===S._redirectEventId?g.directlySetCurrentUser(S):g.reloadAndSetCurrentUserOrClear(S)})()}tryRedirectSignIn(f){var g=this;return(0,h.Z)(function*(){let _=null;try{_=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(D){yield g._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,h.Z)(function*(){try{yield Tn(f)}catch(_){if("auth/network-request-failed"!==_.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ke(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,h.Z)(function*(){const _=f?(0,P.m9)(f):null;return _&&B(_.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(_&&_._clone(g))})()}_updateCurrentUser(f,g=!1){var _=this;return(0,h.Z)(function*(){if(!_._deleted)return f&&B(_.tenantId===f.tenantId,_,"tenant-id-mismatch"),g||(yield _.beforeStateQueue.runMiddleware(f)),_.queue((0,h.Z)(function*(){yield _.directlySetCurrentUser(f),_.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(ne(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new P.LL("auth","Firebase",f())}onAuthStateChanged(f,g,_){return this.registerStateListener(this.authStateSubscription,f,g,_)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,_){return this.registerStateListener(this.idTokenSubscription,f,g,_)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var _=this;return(0,h.Z)(function*(){const D=yield _.getOrInitRedirectPersistenceManager(g);return null===f?D.removeCurrentUser():D.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const _=f&&ne(f)||g._popupRedirectResolver;B(_,g,"argument-error"),g.redirectPersistenceManager=yield It.create(g,[ne(_._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,h.Z)(function*(){var _,D;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(_=g._currentUser)||void 0===_?void 0:_._redirectEventId)===f?g._currentUser:(null===(D=g.redirectUser)||void 0===D?void 0:D._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,h.Z)(function*(){if(f===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,_,D){if(this._deleted)return()=>{};const S="function"==typeof g?g:g.next.bind(g),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return B(Z,this,"internal-error"),Z.then(()=>S(this.currentUser)),"function"==typeof g?f.addObserver(g,_,D):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ss(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var g;const _={"X-Client-Version":f.clientVersion};f.app.options.appId&&(_["X-Firebase-gmpid"]=f.app.options.appId);const D=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return D&&(_["X-Firebase-Client"]=D),_})()}}function F(y){return(0,P.m9)(y)}class ie{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,P.ne)(g=>this.observer=g)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ot(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Bt(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class cn{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return Ce("not implemented")}_getIdTokenResponse(f){return Ce("not implemented")}_linkToIdToken(f,g){return Ce("not implemented")}_getReauthenticationResolver(f){return Ce("not implemented")}}function br(y,f){return pt.apply(this,arguments)}function pt(){return(pt=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:resetPassword",Ct(y,f))})).apply(this,arguments)}function os(y,f){return as.apply(this,arguments)}function as(){return(as=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ra(y,f){return us.apply(this,arguments)}function us(){return(us=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:update",Ct(y,f))})).apply(this,arguments)}function ls(){return(ls=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:signInWithPassword",Ct(y,f))})).apply(this,arguments)}function Hi(y,f){return qn.apply(this,arguments)}function qn(){return(qn=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:sendOobCode",Ct(y,f))})).apply(this,arguments)}function dn(y,f){return zs.apply(this,arguments)}function zs(){return(zs=(0,h.Z)(function*(y,f){return Hi(y,f)})).apply(this,arguments)}function cu(y,f){return lr.apply(this,arguments)}function lr(){return(lr=(0,h.Z)(function*(y,f){return Hi(y,f)})).apply(this,arguments)}function ai(y,f){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,h.Z)(function*(y,f){return Hi(y,f)})).apply(this,arguments)}function du(y,f){return $i.apply(this,arguments)}function $i(){return($i=(0,h.Z)(function*(y,f){return Hi(y,f)})).apply(this,arguments)}function hu(){return(hu=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:signInWithEmailLink",Ct(y,f))})).apply(this,arguments)}function fu(){return(fu=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:signInWithEmailLink",Ct(y,f))})).apply(this,arguments)}class cr extends cn{constructor(f,g,_,D=null){super("password",_),this._email=f,this._password=g,this._tenantId=D}static _fromEmailAndPassword(f,g){return new cr(f,g,"password")}static _fromEmailAndCode(f,g,_=null){return new cr(f,g,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,h.Z)(function*(){switch(g.signInMethod){case"password":return function Gn(y,f){return ls.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function wi(y,f){return hu.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Se(f,"internal-error")}})()}_linkToIdToken(f,g){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return os(f,{idToken:g,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Rl(y,f){return fu.apply(this,arguments)}(f,{idToken:g,email:_._email,oobCode:_._password});default:Se(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function cs(y,f){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:signInWithIdp",Ct(y,f))})).apply(this,arguments)}class Ci extends cn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Ci(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Se("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:D}=g,S=(0,le._T)(g,["providerId","signInMethod"]);if(!_||!D)return null;const Z=new Ci(_,D);return Z.idToken=S.idToken||void 0,Z.accessToken=S.accessToken||void 0,Z.secret=S.secret,Z.nonce=S.nonce,Z.pendingToken=S.pendingToken||null,Z}_getIdTokenResponse(f){return cs(f,this.buildRequest())}_linkToIdToken(f,g){const _=this.buildRequest();return _.idToken=g,cs(f,_)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,cs(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,P.xO)(g)}return f}}function Ol(y,f){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:sendVerificationCode",Ct(y,f))})).apply(this,arguments)}function Fl(){return(Fl=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:signInWithPhoneNumber",Ct(y,f))})).apply(this,arguments)}function Nd(){return(Nd=(0,h.Z)(function*(y,f){const g=yield ln(y,"POST","/v1/accounts:signInWithPhoneNumber",Ct(y,f));if(g.temporaryProof)throw Hn(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Ll={USER_NOT_FOUND:"user-not-found"};function Od(){return(Od=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:signInWithPhoneNumber",Ct(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Ll)})).apply(this,arguments)}class Ws extends cn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Ws({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Ws({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function kl(y,f){return Fl.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Om(y,f){return Nd.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Pm(y,f){return Od.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:_,verificationCode:D}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:_,code:D}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:_,phoneNumber:D,temporaryProof:S}=f;return _||g||D||S?new Ws({verificationId:g,verificationCode:_,phoneNumber:D,temporaryProof:S}):null}}class ia{constructor(f){var g,_,D,S,Z,ye;const qe=(0,P.zd)((0,P.pd)(f)),rt=null!==(g=qe.apiKey)&&void 0!==g?g:null,mt=null!==(_=qe.oobCode)&&void 0!==_?_:null,gt=function Vl(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=qe.mode)&&void 0!==D?D:null);B(rt&&mt&&gt,"argument-error"),this.apiKey=rt,this.operation=gt,this.code=mt,this.continueUrl=null!==(S=qe.continueUrl)&&void 0!==S?S:null,this.languageCode=null!==(Z=qe.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(ye=qe.tenantId)&&void 0!==ye?ye:null}static parseLink(f){const g=function pu(y){const f=(0,P.zd)((0,P.pd)(y)).link,g=f?(0,P.zd)((0,P.pd)(f)).deep_link_id:null,_=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(_?(0,P.zd)((0,P.pd)(_)).link:null)||_||g||f||y}(f);try{return new ia(g)}catch(_){return null}}}let Ul=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,_){return cr._fromEmailAndPassword(g,_)}static credentialWithLink(g,_){const D=ia.parseLink(_);return B(D,"argument-error"),cr._fromEmailAndCode(g,D.code,D.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Lr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Zs extends Lr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ti extends Zs{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return B("providerId"in g&&"signInMethod"in g,"argument-error"),Ci._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return B(f.idToken||f.accessToken,"argument-error"),Ci._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ti.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ti.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:_,oauthTokenSecret:D,pendingToken:S,nonce:Z,providerId:ye}=f;if(!_&&!D&&!g&&!S||!ye)return null;try{return new Ti(ye)._credential({idToken:g,accessToken:_,nonce:Z,pendingToken:S})}catch(qe){return null}}}let Eo=(()=>{class y extends Zs{constructor(){super("facebook.com")}static credential(g){return Ci._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(_){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Bl=(()=>{class y extends Zs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,_){return Ci._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:D}=g;if(!_&&!D)return null;try{return y.credential(_,D)}catch(S){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Pd=(()=>{class y extends Zs{constructor(){super("github.com")}static credential(g){return Ci._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(_){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ai extends cn{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return cs(f,this.buildRequest())}_linkToIdToken(f,g){const _=this.buildRequest();return _.idToken=g,cs(f,_)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,cs(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:D,pendingToken:S}=g;return _&&D&&S&&_===D?new Ai(_,S):null}static _create(f,g){return new Ai(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ds extends Lr{constructor(f){B(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ds.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ds.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Ai.fromJSON(f);return B(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:_}=f;if(!g||!_)return null;try{return Ai._create(_,g)}catch(D){return null}}}let oa=(()=>{class y extends Zs{constructor(){super("twitter.com")}static credential(g,_){return Ci._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:_,oauthTokenSecret:D}=g;if(!_||!D)return null;try{return y.credential(_,D)}catch(S){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Dr(y,f){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:signUp",Ct(y,f))})).apply(this,arguments)}class Si{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,_,D=!1){return(0,h.Z)(function*(){const S=yield xe._fromIdTokenResponse(f,_,D),Z=jl(_);return new Si({user:S,providerId:Z,_tokenResponse:_,operationType:g})})()}static _forOperation(f,g,_){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(_,!0);const D=jl(_);return new Si({user:f,providerId:D,_tokenResponse:_,operationType:g})})()}}function jl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function mu(){return(mu=(0,h.Z)(function*(y){var f;const g=F(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new Si({user:g.currentUser,providerId:null,operationType:"signIn"});const _=yield Dr(g,{returnSecureToken:!0}),D=yield Si._fromIdTokenResponse(g,"signIn",_,!0);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class Ks extends P.ZR{constructor(f,g,_,D){var S;super(g.code,g.message),this.operationType=_,this.user=D,Object.setPrototypeOf(this,Ks.prototype),this.customData={appName:f.name,tenantId:null!==(S=f.tenantId)&&void 0!==S?S:void 0,_serverResponse:g.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(f,g,_,D){return new Ks(f,g,_,D)}}function hs(y,f,g,_){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(S=>{throw"auth/multi-factor-auth-required"===S.code?Ks._fromErrorAndOperation(y,S,f,_):S})}function wo(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function gn(){return(gn=(0,h.Z)(function*(y,f){const g=(0,P.m9)(y);yield Kt(!0,g,f);const{providerUserInfo:_}=yield Jt(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),D=wo(_||[]);return g.providerData=g.providerData.filter(S=>D.has(S.providerId)),D.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Mi(y,f){return Io.apply(this,arguments)}function Io(){return(Io=(0,h.Z)(function*(y,f,g=!1){const _=yield sn(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return Si._forOperation(y,"link",_)})).apply(this,arguments)}function Kt(y,f,g){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,h.Z)(function*(y,f,g){yield Tn(f);const D=!1===y?"provider-already-linked":"no-such-provider";B(wo(f.providerData).has(g)===y,f.auth,D)})).apply(this,arguments)}function yu(y,f){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,h.Z)(function*(y,f,g=!1){const{auth:_}=y,D="reauthenticate";try{const S=yield sn(y,hs(_,D,f,y),g);B(S.idToken,_,"internal-error");const Z=st(S.idToken);B(Z,_,"internal-error");const{sub:ye}=Z;return B(y.uid===ye,_,"user-mismatch"),Si._forOperation(y,D,S)}catch(S){throw"auth/user-not-found"===(null==S?void 0:S.code)&&Se(_,"user-mismatch"),S}})).apply(this,arguments)}function Vr(y,f){return vu.apply(this,arguments)}function vu(){return(vu=(0,h.Z)(function*(y,f,g=!1){const _="signIn",D=yield hs(y,_,f),S=yield Si._fromIdTokenResponse(y,_,D);return g||(yield y._updateCurrentUser(S.user)),S})).apply(this,arguments)}function bo(y,f){return N.apply(this,arguments)}function N(){return(N=(0,h.Z)(function*(y,f){return Vr(F(y),f)})).apply(this,arguments)}function R(y,f){return W.apply(this,arguments)}function W(){return(W=(0,h.Z)(function*(y,f){const g=(0,P.m9)(y);return yield Kt(!1,g,f.providerId),Mi(g,f)})).apply(this,arguments)}function ue(y,f){return je.apply(this,arguments)}function je(){return(je=(0,h.Z)(function*(y,f){return yu((0,P.m9)(y),f)})).apply(this,arguments)}function ze(y,f){return _t.apply(this,arguments)}function _t(){return(_t=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:signInWithCustomToken",Ct(y,f))})).apply(this,arguments)}function it(){return(it=(0,h.Z)(function*(y,f){const g=F(y),_=yield ze(g,{token:f,returnSecureToken:!0}),D=yield Si._fromIdTokenResponse(g,"signIn",_);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class an{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?mn._fromServerResponse(f,g):Se(f,"internal-error")}}class mn extends an{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new mn(g)}}function xt(y,f,g){var _;B((null===(_=g.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),B(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(B(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(B(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function xi(){return(xi=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y),D={requestType:"PASSWORD_RESET",email:f};g&&xt(_,D,g),yield cu(_,D)})).apply(this,arguments)}function Co(){return(Co=(0,h.Z)(function*(y,f,g){yield br((0,P.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Me(){return(Me=(0,h.Z)(function*(y,f){yield ra((0,P.m9)(y),{oobCode:f})})).apply(this,arguments)}function kt(y,f){return As.apply(this,arguments)}function As(){return(As=(0,h.Z)(function*(y,f){const g=(0,P.m9)(y),_=yield br(g,{oobCode:f}),D=_.requestType;switch(B(D,g,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(_.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(_.mfaInfo,g,"internal-error");default:B(_.email,g,"internal-error")}let S=null;return _.mfaInfo&&(S=an._fromServerResponse(F(g),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:S},operation:D}})).apply(this,arguments)}function $l(){return($l=(0,h.Z)(function*(y,f){const{data:g}=yield kt((0,P.m9)(y),f);return g.email})).apply(this,arguments)}function Ri(){return(Ri=(0,h.Z)(function*(y,f,g){const _=F(y),D=yield Dr(_,{returnSecureToken:!0,email:f,password:g}),S=yield Si._fromIdTokenResponse(_,"signIn",D);return yield _._updateCurrentUser(S.user),S})).apply(this,arguments)}function Ld(){return(Ld=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y),D={requestType:"EMAIL_SIGNIN",email:f};B(g.handleCodeInApp,_,"argument-error"),g&&xt(_,D,g),yield ai(_,D)})).apply(this,arguments)}function To(){return(To=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y),D=Ul.credentialWithLink(f,g||Le());return B(D._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),bo(_,D)})).apply(this,arguments)}function Yr(y,f){return qi.apply(this,arguments)}function qi(){return(qi=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:createAuthUri",Ct(y,f))})).apply(this,arguments)}function Ys(){return(Ys=(0,h.Z)(function*(y,f){const _={identifier:f,continueUri:dt()?Le():"http://localhost"},{signinMethods:D}=yield Yr((0,P.m9)(y),_);return D||[]})).apply(this,arguments)}function Vd(){return(Vd=(0,h.Z)(function*(y,f){const g=(0,P.m9)(y),D={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&xt(g.auth,D,f);const{email:S}=yield dn(g.auth,D);S!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ud(){return(Ud=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y),S={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&xt(_.auth,S,g);const{email:Z}=yield du(_.auth,S);Z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Lm(y,f){return _u.apply(this,arguments)}function _u(){return(_u=(0,h.Z)(function*(y,f){return Tt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Gl(){return(Gl=(0,h.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const _=(0,P.m9)(y),S={idToken:yield _.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},Z=yield sn(_,Lm(_.auth,S));_.displayName=Z.displayName||null,_.photoURL=Z.photoUrl||null;const ye=_.providerData.find(({providerId:qe})=>"password"===qe);ye&&(ye.displayName=_.displayName,ye.photoURL=_.photoURL),yield _._updateTokensIfNecessary(Z)})).apply(this,arguments)}function ql(y,f,g){return ua.apply(this,arguments)}function ua(){return(ua=(0,h.Z)(function*(y,f,g){const{auth:_}=y,S={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(S.email=f),g&&(S.password=g);const Z=yield sn(y,os(_,S));yield y._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class la{constructor(f,g,_={}){this.isNewUser=f,this.providerId=g,this.profile=_}}class Zf extends la{constructor(f,g,_,D){super(f,g,_),this.username=D}}class Bd extends la{constructor(f,g){super(f,"facebook.com",g)}}class zi extends Zf{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Um extends la{constructor(f,g){super(f,"google.com",g)}}class Bm extends Zf{constructor(f,g,_){super(f,"twitter.com",g,_)}}function Cr(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Wf(y){var f,g;if(!y)return null;const{providerId:_}=y,D=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},S=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&(null==y?void 0:y.idToken)){const Z=null===(g=null===(f=st(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(Z)return new la(S,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!_)return null;switch(_){case"facebook.com":return new Bd(S,D);case"github.com":return new zi(S,D);case"google.com":return new Um(S,D);case"twitter.com":return new Bm(S,D,y.screenName||null);case"custom":case"anonymous":return new la(S,null);default:return new la(S,_,D)}}(g)}class Ms{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new Ms("enroll",f)}static _fromMfaPendingCredential(f){return new Ms("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,_;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Ms._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(_=f.multiFactorSession)||void 0===_?void 0:_.idToken)return Ms._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ca{constructor(f,g,_){this.session=f,this.hints=g,this.signInResolver=_}static _fromError(f,g){const _=F(f),D=g.customData._serverResponse,S=(D.mfaInfo||[]).map(ye=>an._fromServerResponse(_,ye));B(D.mfaPendingCredential,_,"internal-error");const Z=Ms._fromMfaPendingCredential(D.mfaPendingCredential);return new ca(Z,S,function(){var ye=(0,h.Z)(function*(qe){const rt=yield qe._process(_,Z);delete D.mfaInfo,delete D.mfaPendingCredential;const mt=Object.assign(Object.assign({},D),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(g.operationType){case"signIn":const gt=yield Si._fromIdTokenResponse(_,g.operationType,mt);return yield _._updateCurrentUser(gt.user),gt;case"reauthenticate":return B(g.user,_,"internal-error"),Si._forOperation(g.user,g.operationType,mt);default:Se(_,"internal-error")}});return function(qe){return ye.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,h.Z)(function*(){return g.signInResolver(f)})()}}function jm(y,f){return Tt(y,"POST","/v2/accounts/mfaEnrollment:start",Ct(y,f))}class da{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(_=>an._fromServerResponse(f.auth,_)))})}static _fromUser(f){return new da(f)}getSession(){var f=this;return(0,h.Z)(function*(){return Ms._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var _=this;return(0,h.Z)(function*(){const D=f,S=yield _.getSession(),Z=yield sn(_.user,D._process(_.user.auth,S,g));return yield _.user._updateTokensIfNecessary(Z),_.user.reload()})()}unenroll(f){var g=this;return(0,h.Z)(function*(){const _="string"==typeof f?f:f.uid,D=yield g.user.getIdToken(),S=yield sn(g.user,function Ao(y,f){return Tt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ct(y,f))}(g.user.auth,{idToken:D,mfaEnrollmentId:_}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Z})=>Z!==_),yield g.user._updateTokensIfNecessary(S);try{yield g.user.reload()}catch(Z){if("auth/user-token-expired"!==Z.code)throw Z}})()}}const Yf=new WeakMap,So="__sak";class zl{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(So,"1"),this.storage.removeItem(So),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Qr=(()=>{class y extends zl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,_)=>this.onStorageEvent(g,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function l0(){const y=(0,P.z$)();return wr(y)||ur(y)}()&&function $n(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=oi(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const _ of Object.keys(this.listeners)){const D=this.storage.getItem(_),S=this.localCache[_];D!==S&&g(_,S,D)}}onStorageEvent(g,_=!1){if(!g.key)return void this.forAllChangedKeys((ye,qe,rt)=>{this.notifyListeners(ye,rt)});const D=g.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ye=this.storage.getItem(D);if(g.newValue!==ye)null!==g.newValue?this.storage.setItem(D,g.newValue):this.storage.removeItem(D);else if(this.localCache[D]===g.newValue&&!_)return}const S=()=>{const ye=this.storage.getItem(D);!_&&this.localCache[D]===ye||this.notifyListeners(D,ye)},Z=this.storage.getItem(D);!function Ei(){return(0,P.w1)()&&10===document.documentMode}()||Z===g.newValue||g.newValue===g.oldValue?S():setTimeout(S,10)}notifyListeners(g,_){this.localCache[g]=_;const D=this.listeners[g];if(D)for(const S of Array.from(D))S(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,_,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:_,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,_){var D=()=>super._set,S=this;return(0,h.Z)(function*(){yield D().call(S,g,_),S.localCache[g]=JSON.stringify(_)})()}_get(g){var _=()=>super._get,D=this;return(0,h.Z)(function*(){const S=yield _().call(D,g);return D.localCache[g]=JSON.stringify(S),S})()}_remove(g){var _=()=>super._remove,D=this;return(0,h.Z)(function*(){yield _().call(D,g),delete D.localCache[g]})()}}return y.type="LOCAL",y})(),Wn=(()=>{class y extends zl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,_){}_removeListener(g,_){}}return y.type="SESSION",y})();let Qf=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const _=this.receivers.find(S=>S.isListeningto(g));if(_)return _;const D=new y(g);return this.receivers.push(D),D}isListeningto(g){return this.eventTarget===g}handleEvent(g){var _=this;return(0,h.Z)(function*(){const D=g,{eventId:S,eventType:Z,data:ye}=D.data,qe=_.handlersMap[Z];if(!(null==qe?void 0:qe.size))return;D.ports[0].postMessage({status:"ack",eventId:S,eventType:Z});const rt=Array.from(qe).map(function(){var gt=(0,h.Z)(function*(Pn){return Pn(D.origin,ye)});return function(Pn){return gt.apply(this,arguments)}}()),mt=yield function Wl(y){return Promise.all(y.map(function(){var f=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(_){return{fulfilled:!1,reason:_}}});return function(g){return f.apply(this,arguments)}}()))}(rt);D.ports[0].postMessage({status:"done",eventId:S,eventType:Z,response:mt})})()}_subscribe(g,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(_)}_unsubscribe(g,_){this.handlersMap[g]&&_&&this.handlersMap[g].delete(_),(!_||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ha(y="",f=10){let g="";for(let _=0;_<f;_++)g+=Math.floor(10*Math.random());return y+g}class fa{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,_=50){var D=this;return(0,h.Z)(function*(){const S="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!S)throw new Error("connection_unavailable");let Z,ye;return new Promise((qe,rt)=>{const mt=ha("",20);S.port1.start();const gt=setTimeout(()=>{rt(new Error("unsupported_event"))},_);ye={messageChannel:S,onMessage(Pn){const di=Pn;if(di.data.eventId===mt)switch(di.data.status){case"ack":clearTimeout(gt),Z=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),qe(di.data.response);break;default:clearTimeout(gt),clearTimeout(Z),rt(new Error("invalid_response"))}}},D.handlers.add(ye),S.port1.addEventListener("message",ye.onMessage),D.target.postMessage({eventType:f,eventId:mt,data:g},[S.port2])}).finally(()=>{ye&&D.removeMessageHandler(ye)})})()}}function Zn(){return window}function xs(){return void 0!==Zn().WorkerGlobalScope&&"function"==typeof Zn().importScripts}function Jf(){return(Jf=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Hd="firebaseLocalStorageDb",Js="firebaseLocalStorage",Zl="fbase_key";class Mo{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Xs(y,f){return y.transaction([Js],f?"readwrite":"readonly").objectStore(Js)}function ma(){const y=indexedDB.open(Hd,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Js,{keyPath:Zl})}catch(D){g(D)}}),y.addEventListener("success",(0,h.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Js)?f(_):(_.close(),yield function ga(){const y=indexedDB.deleteDatabase(Hd);return new Mo(y).toPromise()}(),f(yield ma()))}))})}function $d(y,f,g){return xo.apply(this,arguments)}function xo(){return(xo=(0,h.Z)(function*(y,f,g){const _=Xs(y,!0).put({[Zl]:f,value:g});return new Mo(_).toPromise()})).apply(this,arguments)}function Kl(){return(Kl=(0,h.Z)(function*(y,f){const g=Xs(y,!1).get(f),_=yield new Mo(g).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Yl(y,f){const g=Xs(y,!0).delete(f);return new Mo(g).toPromise()}const Ro=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield ma()),g.db})()}_withRetries(g){var _=this;return(0,h.Z)(function*(){let D=0;for(;;)try{const S=yield _._openDb();return yield g(S)}catch(S){if(D++>3)throw S;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return xs()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=Qf._getInstance(function jd(){return xs()?self:null}()),g.receiver._subscribe("keyChanged",function(){var _=(0,h.Z)(function*(D,S){return{keyProcessed:(yield g._poll()).includes(S.key)}});return function(D,S){return _.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var _=(0,h.Z)(function*(D,S){return["keyChanged"]});return function(D,S){return _.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var _,D;if(g.activeServiceWorker=yield function Dt(){return Jf.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new fa(g.activeServiceWorker);const S=yield g.sender._send("ping",{},800);!S||(null===(_=S[0])||void 0===_?void 0:_.fulfilled)&&(null===(D=S[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var _=this;return(0,h.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Xf(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:g},_.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ma();return yield $d(g,So,"1"),yield Yl(g,So),!0}catch(g){}return!1})()}_withPendingWrite(g){var _=this;return(0,h.Z)(function*(){_.pendingWrites++;try{yield g()}finally{_.pendingWrites--}})()}_set(g,_){var D=this;return(0,h.Z)(function*(){return D._withPendingWrite((0,h.Z)(function*(){return yield D._withRetries(S=>$d(S,g,_)),D.localCache[g]=_,D.notifyServiceWorker(g)}))})()}_get(g){var _=this;return(0,h.Z)(function*(){const D=yield _._withRetries(S=>function Iu(y,f){return Kl.apply(this,arguments)}(S,g));return _.localCache[g]=D,D})()}_remove(g){var _=this;return(0,h.Z)(function*(){return _._withPendingWrite((0,h.Z)(function*(){return yield _._withRetries(D=>Yl(D,g)),delete _.localCache[g],_.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const _=yield g._withRetries(Z=>{const ye=Xs(Z,!1).getAll();return new Mo(ye).toPromise()});if(!_)return[];if(0!==g.pendingWrites)return[];const D=[],S=new Set;for(const{fbase_key:Z,value:ye}of _)S.add(Z),JSON.stringify(g.localCache[Z])!==JSON.stringify(ye)&&(g.notifyListeners(Z,ye),D.push(Z));for(const Z of Object.keys(g.localCache))g.localCache[Z]&&!S.has(Z)&&(g.notifyListeners(Z,null),D.push(Z));return D})()}notifyListeners(g,_){this.localCache[g]=_;const D=this.listeners[g];if(D)for(const S of Array.from(D))S(_)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Jr(y,f){return Tt(y,"POST","/v2/accounts/mfaSignIn:start",Ct(y,f))}function Nn(){return(Nn=(0,h.Z)(function*(y){return(yield Tt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function eo(y){return new Promise((f,g)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=f,_.onerror=D=>{const S=be("internal-error");S.customData=D,g(S)},_.type="text/javascript",_.charset="UTF-8",function Cu(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(_)})}function No(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ni=1e12;class tr{constructor(f){this.auth=f,this.counter=Ni,this._widgets=new Map}render(f,g){const _=this.counter;return this._widgets.set(_,new Zi(f,this.auth.name,g||{})),this.counter++,_}reset(f){var g;const _=f||Ni;null===(g=this._widgets.get(_))||void 0===g||g.delete(),this._widgets.delete(_)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Ni))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,h.Z)(function*(){var _;return null===(_=g._widgets.get(f||Ni))||void 0===_||_.execute(),""})()}}class Zi{constructor(f,g,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof f?document.getElementById(f):f;B(D,"argument-error",{appName:g}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ep(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(_){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(_){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ql=No("rcb"),On=new Wt(3e4,6e4);class c0{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Zn().grecaptcha}load(f,g=""){return B(function va(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Zn().grecaptcha):new Promise((_,D)=>{const S=Zn().setTimeout(()=>{D(be(f,"network-request-failed"))},On.get());Zn()[Ql]=()=>{Zn().clearTimeout(S),delete Zn()[Ql];const ye=Zn().grecaptcha;if(!ye)return void D(be(f,"internal-error"));const qe=ye.render;ye.render=(rt,mt)=>{const gt=qe(rt,mt);return this.counter++,gt},this.hostLanguage=g,_(ye)},eo(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Ql,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(S),D(be(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!Zn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Oi{load(f){return(0,h.Z)(function*(){return new tr(f)})()}clearedOneInstance(){}}const Hm="recaptcha",to={theme:"light",type:"image"};class np{constructor(f,g=Object.assign({},to),_){this.parameters=g,this.type=Hm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=F(_),this.isInvisible="invisible"===this.parameters.size,B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof f?document.getElementById(f):f;B(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Oi:new c0,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),_=f.getAssertedRecaptcha();return _.getResponse(g)||new Promise(S=>{const Z=ye=>{!ye||(f.tokenChangeListeners.delete(Z),S(ye))};f.tokenChangeListeners.add(Z),f.isInvisible&&_.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(_=>_(g)),"function"==typeof f)f(g);else if("string"==typeof f){const _=Zn()[f];"function"==typeof _&&_(g)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const _=document.createElement("div");g.appendChild(_),g=_}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){B(dt()&&!xs(),f.auth,"internal-error"),yield function Rs(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function ya(y){return Nn.apply(this,arguments)}(f.auth);B(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qd{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Ws._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Tu(){return(Tu=(0,h.Z)(function*(y,f,g){const _=F(y),D=yield li(_,f,(0,P.m9)(g));return new qd(D,S=>bo(_,S))})).apply(this,arguments)}function rp(){return(rp=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y);yield Kt(!1,_,"phone");const D=yield li(_.auth,f,(0,P.m9)(g));return new qd(D,S=>R(_,S))})).apply(this,arguments)}function ui(){return(ui=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y),D=yield li(_.auth,f,(0,P.m9)(g));return new qd(D,S=>ue(_,S))})).apply(this,arguments)}function li(y,f,g){return Su.apply(this,arguments)}function Su(){return(Su=(0,h.Z)(function*(y,f,g){var _;const D=yield g.verify();try{let S;if(B("string"==typeof D,y,"argument-error"),B(g.type===Hm,y,"argument-error"),S="string"==typeof f?{phoneNumber:f}:f,"session"in S){const Z=S.session;if("phoneNumber"in S)return B("enroll"===Z.type,y,"internal-error"),(yield jm(y,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:S.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{B("signin"===Z.type,y,"internal-error");const ye=(null===(_=S.multiFactorHint)||void 0===_?void 0:_.uid)||S.multiFactorUid;return B(ye,y,"missing-multi-factor-info"),(yield Jr(y,{mfaPendingCredential:Z.credential,mfaEnrollmentId:ye,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield Ol(y,{phoneNumber:S.phoneNumber,recaptchaToken:D});return Z}}finally{g._reset()}})).apply(this,arguments)}function Oo(){return(Oo=(0,h.Z)(function*(y,f){yield Mi((0,P.m9)(y),f)})).apply(this,arguments)}let _a=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=F(g)}verifyPhoneNumber(g,_){return li(this.auth,g,(0,P.m9)(_))}static credential(g,_){return Ws._fromVerification(g,_)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:_,temporaryProof:D}=g;return _&&D?Ws._fromTokenResponse(_,D):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function no(y,f){return f?ne(f):(B(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Xl extends cn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return cs(f,this._buildIdpRequest())}_linkToIdToken(f,g){return cs(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return cs(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Gt(y){return Vr(y.auth,new Xl(y),y.bypassAuthState)}function d0(y){const{auth:f,user:g}=y;return B(g,f,"internal-error"),yu(g,new Xl(y),y.bypassAuthState)}function Po(y){return Br.apply(this,arguments)}function Br(){return(Br=(0,h.Z)(function*(y){const{auth:f,user:g}=y;return B(g,f,"internal-error"),Mi(g,new Xl(y),y.bypassAuthState)})).apply(this,arguments)}class Ea{constructor(f,g,_,D,S=!1){this.auth=f,this.resolver=_,this.user=D,this.bypassAuthState=S,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,h.Z)(function*(_,D){f.pendingPromise={resolve:_,reject:D};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(S){f.reject(S)}});return function(_,D){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,h.Z)(function*(){const{urlResponse:_,sessionId:D,postBody:S,tenantId:Z,error:ye,type:qe}=f;if(ye)return void g.reject(ye);const rt={auth:g.auth,requestUri:_,sessionId:D,tenantId:Z||void 0,postBody:S||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(qe)(rt))}catch(mt){g.reject(mt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Gt;case"linkViaPopup":case"linkViaRedirect":return Po;case"reauthViaPopup":case"reauthViaRedirect":return d0;default:Se(this.auth,"internal-error")}}resolve(f){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wa=new Wt(2e3,1e4);function ec(){return(ec=(0,h.Z)(function*(y,f,g){const _=F(y);We(y,f,Lr);const D=no(_,g);return new sp(_,"signInViaPopup",f,D).executeNotNull()})).apply(this,arguments)}function tc(){return(tc=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y);We(_.auth,f,Lr);const D=no(_.auth,g);return new sp(_.auth,"reauthViaPopup",f,D,_).executeNotNull()})).apply(this,arguments)}function nc(){return(nc=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y);We(_.auth,f,Lr);const D=no(_.auth,g);return new sp(_.auth,"linkViaPopup",f,D,_).executeNotNull()})).apply(this,arguments)}let sp=(()=>{class y extends Ea{constructor(g,_,D,S,Z){super(g,_,S,Z),this.provider=D,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const _=yield g.execute();return B(_,g.auth,"internal-error"),_})()}onExecution(){var g=this;return(0,h.Z)(function*(){K(1===g.filter.length,"Popup operations only handle one event");const _=ha();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],_),g.authWindow.associatedEvent=_,g.resolver._originValidation(g.auth).catch(D=>{g.reject(D)}),g.resolver._isIframeWebStorageSupported(g.auth,D=>{D||g.reject(be(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var _,D;this.pollId=(null===(D=null===(_=this.authWindow)||void 0===_?void 0:_.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,wa.get())};g()}}return y.currentPopupAction=null,y})();const jr=new Map;class rc extends Ea{constructor(f,g,_=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,_),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,h.Z)(function*(){let _=jr.get(g.auth._key());if(!_){try{const S=(yield function f0(y,f){return ro.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;_=()=>Promise.resolve(S)}catch(D){_=()=>Promise.reject(D)}jr.set(g.auth._key(),_)}return g.bypassAuthState||jr.set(g.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,_=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(_,f);if("unknown"!==f.type){if(f.eventId){const D=yield _.auth._redirectUserForId(f.eventId);if(D)return _.user=D,g().call(_,f);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function ro(){return(ro=(0,h.Z)(function*(y,f){const g=ic(f),_=Wd(y);if(!(yield _._isAvailable()))return!1;const D="true"===(yield _._get(g));return yield _._remove(g),D})).apply(this,arguments)}function Ia(y,f){return ba.apply(this,arguments)}function ba(){return(ba=(0,h.Z)(function*(y,f){return Wd(y)._set(ic(f),"true")})).apply(this,arguments)}function zd(y,f){jr.set(y._key(),f)}function Wd(y){return ne(y._redirectPersistence)}function ic(y){return lt("pendingRedirect",y.config.apiKey,y.name)}function Ht(){return(Ht=(0,h.Z)(function*(y,f,g){const _=F(y);We(y,f,Lr);const D=no(_,g);return yield Ia(D,_),D._openRedirect(_,f,"signInViaRedirect")})).apply(this,arguments)}function ys(){return(ys=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y);We(_.auth,f,Lr);const D=no(_.auth,g);yield Ia(D,_.auth);const S=yield Ns(_);return D._openRedirect(_.auth,f,"reauthViaRedirect",S)})).apply(this,arguments)}function io(){return(io=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y);We(_.auth,f,Lr);const D=no(_.auth,g);yield Kt(!1,_,f.providerId),yield Ia(D,_.auth);const S=yield Ns(_);return D._openRedirect(_.auth,f,"linkViaRedirect",S)})).apply(this,arguments)}function Da(){return(Da=(0,h.Z)(function*(y,f){return yield F(y)._initializationPromise,so(y,f,!1)})).apply(this,arguments)}function so(y,f){return ko.apply(this,arguments)}function ko(){return(ko=(0,h.Z)(function*(y,f,g=!1){const _=F(y),D=no(_,f),Z=yield new rc(_,D,g).execute();return Z&&!g&&(delete Z.user._redirectEventId,yield _._persistUserIfCurrent(Z.user),yield _._setRedirectUser(null,f)),Z})).apply(this,arguments)}function Ns(y){return ac.apply(this,arguments)}function ac(){return(ac=(0,h.Z)(function*(y){const f=ha(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class xu{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(f,_)&&(g=!0,this.sendToConsumer(f,_),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function lc(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ru(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var _;if(f.error&&!Ru(f)){const D=(null===(_=f.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";g.onError(be(this.auth,D))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const _=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&_}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(uc(f))}saveEventToCache(f){this.cachedEventUids.add(uc(f)),this.lastProcessedEventTime=Date.now()}}function uc(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Ru({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Zd(y){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,h.Z)(function*(y,f={}){return Tt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const cc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ca=/^https?/;function Yd(){return(Yd=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Zd(y);for(const g of f)try{if(p0(g))return}catch(_){}Se(y,"unauthorized-domain")})).apply(this,arguments)}function p0(y){const f=Le(),{protocol:g,hostname:_}=new URL(f);if(y.startsWith("chrome-extension://")){const Z=new URL(y);return""===Z.hostname&&""===_?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&Z.hostname===_}if(!Ca.test(g))return!1;if(cc.test(y))return _===y;const D=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(_)}const ap=new Wt(3e4,6e4);function Qd(){const y=Zn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Ta=null;function Os(y){return Ta=Ta||function up(y){return new Promise((f,g)=>{var _,D,S;function Z(){Qd(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Qd(),g(be(y,"network-request-failed"))},timeout:ap.get()})}if(null===(D=null===(_=Zn().gapi)||void 0===_?void 0:_.iframes)||void 0===D?void 0:D.Iframe)f(gapi.iframes.getContext());else{if(!(null===(S=Zn().gapi)||void 0===S?void 0:S.load)){const ye=No("iframefcb");return Zn()[ye]=()=>{gapi.load?Z():g(be(y,"network-request-failed"))},eo(`https://apis.google.com/js/api.js?onload=${ye}`).catch(qe=>g(qe))}Z()}}).catch(f=>{throw Ta=null,f})}(y),Ta}const Aa=new Wt(5e3,15e3),Sa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ma=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lp(y){const f=y.config;B(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?Fn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:f.apiKey,appName:y.name,v:se.SDK_VERSION},D=Ma.get(y.config.apiHost);D&&(_.eid=D);const S=y._getFrameworks();return S.length&&(_.fw=S.join(",")),`${g}?${(0,P.xO)(_).slice(1)}`}function Ps(){return Ps=(0,h.Z)(function*(y){const f=yield Os(y),g=Zn().gapi;return B(g,y,"internal-error"),f.open({where:document.body,url:lp(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sa,dontclear:!0},_=>new Promise(function(){var D=(0,h.Z)(function*(S,Z){yield _.restyle({setHideOnLeave:!1});const ye=be(y,"network-request-failed"),qe=Zn().setTimeout(()=>{Z(ye)},Aa.get());function rt(){Zn().clearTimeout(qe),S(_)}_.ping(rt).then(rt,()=>{Z(ye)})});return function(S,Z){return D.apply(this,arguments)}}()))}),Ps.apply(this,arguments)}const hc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class cp{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Ii(y,f,g,_,D,S){B(y.config.authDomain,y,"auth-domain-config-required"),B(y.config.apiKey,y,"invalid-api-key");const Z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:_,v:se.SDK_VERSION,eventId:D};if(f instanceof Lr){f.setDefaultLanguage(y.languageCode),Z.providerId=f.providerId||"",(0,P.xb)(f.getCustomParameters())||(Z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[qe,rt]of Object.entries(S||{}))Z[qe]=rt}if(f instanceof Zs){const qe=f.getScopes().filter(rt=>""!==rt);qe.length>0&&(Z.scopes=qe.join(","))}y.tenantId&&(Z.tid=y.tenantId);const ye=Z;for(const qe of Object.keys(ye))void 0===ye[qe]&&delete ye[qe];return`${function ks({config:y}){return y.emulator?Fn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(ye).slice(1)}`}const ku="webStorageSupport";class mc extends class m0{constructor(f){this.factorId=f}_process(f,g,_){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,_);case"signin":return this._finalizeSignIn(f,g.credential);default:return Ce("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new mc(f)}_finalizeEnroll(f,g,_){return function a0(y,f){return Tt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ct(y,f))}(f,{idToken:g,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Gd(y,f){return Tt(y,"POST","/v2/accounts/mfaSignIn:finalize",Ct(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let y0=(()=>{class y{constructor(){}static assertion(g){return mc._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Xd="@firebase/auth";class fp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(_=>{var D;f((null===(D=_)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Lo(){return window}function Pi(){return(Pi=(0,h.Z)(function*(y,f,g){var _;const{BuildInfo:D}=Lo();K(f.sessionId,"AuthEvent did not contain a session ID");const S=yield v0(f.sessionId),Z={};return ur()?Z.ibi=D.packageName:pn()?Z.apn=D.packageName:Se(y,"operation-not-supported-in-this-environment"),D.displayName&&(Z.appDisplayName=D.displayName),Z.sessionId=S,Ii(y,g,f.type,void 0,null!==(_=f.eventId)&&void 0!==_?_:void 0,Z)})).apply(this,arguments)}function vc(){return(vc=(0,h.Z)(function*(y){const{BuildInfo:f}=Lo(),g={};ur()?g.iosBundleId=f.packageName:pn()?g.androidPackageName=f.packageName:Se(y,"operation-not-supported-in-this-environment"),yield Zd(y,g)})).apply(this,arguments)}function pp(){return(pp=(0,h.Z)(function*(y,f,g){const{cordova:_}=Lo();let D=()=>{};try{yield new Promise((S,Z)=>{let ye=null;function qe(){var gt;S();const Pn=null===(gt=_.plugins.browsertab)||void 0===gt?void 0:gt.close;"function"==typeof Pn&&Pn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function rt(){ye||(ye=window.setTimeout(()=>{Z(be(y,"redirect-cancelled-by-user"))},2e3))}function mt(){"visible"===(null==document?void 0:document.visibilityState)&&rt()}f.addPassiveListener(qe),document.addEventListener("resume",rt,!1),pn()&&document.addEventListener("visibilitychange",mt,!1),D=()=>{f.removePassiveListener(qe),document.removeEventListener("resume",rt,!1),document.removeEventListener("visibilitychange",mt,!1),ye&&window.clearTimeout(ye)}})}finally{D()}})).apply(this,arguments)}function v0(y){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,h.Z)(function*(y){const f=th(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function th(y){if(K(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let _=0;_<y.length;_++)g[_]=y.charCodeAt(_);return g}!function Ym(y){(0,se._registerComponent)(new oe.wA("auth",(f,{options:g})=>{const _=f.getProvider("app").getImmediate(),D=f.getProvider("heartbeat"),{apiKey:S,authDomain:Z}=_.options;return((ye,qe)=>{B(S&&!S.includes(":"),"invalid-api-key",{appName:ye.name}),B(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:ye.name});const rt={apiKey:S,authDomain:Z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ss(y)},mt=new Xe(ye,qe,rt);return function ae(y,f){const g=(null==f?void 0:f.persistence)||[],_=(Array.isArray(g)?g:[g]).map(ne);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(_,null==f?void 0:f.popupRedirectResolver)}(mt,g),mt})(_,D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,_)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new oe.wA("auth-internal",f=>{const g=F(f.getProvider("auth").getImmediate());return new fp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(Xd,"0.20.1",function yc(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(Xd,"0.20.1","esm2017")}("Browser");class Ec extends xu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function Ra(y){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,h.Z)(function*(y){const f=yield Bu()._get(Na(y));return f&&(yield Bu()._remove(Na(y))),f})).apply(this,arguments)}function rh(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const _=Math.floor(Math.random()*f.length);y.push(f.charAt(_))}return y.join("")}function Bu(){return ne(Qr)}function Na(y){return lt("authEvent",y.config.apiKey,y.name)}function Xr(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,P.zd)(g.join("?"))}function Vo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:be("no-auth-event")}}function Uo(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function _p(y=(0,P.z$)()){return!("file:"!==Uo()&&"ionic:"!==Uo()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function sh(){try{const y=self.localStorage,f=ha();if(y)return y.setItem(f,"1"),y.removeItem(f),!function bc(y=(0,P.z$)()){return function Oa(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function rr(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch(y){return Dc()&&(0,P.hl)()}return!1}function Dc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function hr(){return(function vp(){return"http:"===Uo()||"https:"===Uo()}()||(0,P.ru)()||_p())&&!function ih(){return(0,P.b$)()||(0,P.UG)()}()&&sh()&&!Dc()}function Pa(){return _p()&&"undefined"!=typeof document}function Hu(){return(Hu=(0,h.Z)(function*(){return!!Pa()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const ei={LOCAL:"local",NONE:"none",SESSION:"session"},oo=B,ah="persistence";function Bo(y){return uh.apply(this,arguments)}function uh(){return(uh=(0,h.Z)(function*(y){yield y._initializationPromise;const f=Cc(),g=lt(ah,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Cc(){var y;try{return(null===(y=function ry(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const sy=B;class ki{constructor(){this.browserResolver=ne(class Km{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wn,this._completeRedirectFn=so,this._overrideRedirectResult=zd}_openPopup(f,g,_,D){var S=this;return(0,h.Z)(function*(){var Z;K(null===(Z=S.eventManagers[f._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const ye=Ii(f,g,_,Le(),D);return function Pu(y,f,g,_=500,D=600){const S=Math.max((window.screen.availHeight-D)/2,0).toString(),Z=Math.max((window.screen.availWidth-_)/2,0).toString();let ye="";const qe=Object.assign(Object.assign({},hc),{width:_.toString(),height:D.toString(),top:S,left:Z}),rt=(0,P.z$)().toLowerCase();g&&(ye=si(rt)?"_blank":g),Zt(rt)&&(f=f||"http://localhost",qe.scrollbars="yes");const mt=Object.entries(qe).reduce((Pn,[di,ka])=>`${Pn}${di}=${ka},`,"");if(function ji(y=(0,P.z$)()){var f;return ur(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(rt)&&"_self"!==ye)return function zm(y,f){const g=document.createElement("a");g.href=y,g.target=f;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(_)}(f||"",ye),new cp(null);const gt=window.open(f||"",ye,mt);B(gt,y,"popup-blocked");try{gt.focus()}catch(Pn){}return new cp(gt)}(f,ye,ha())})()}_openRedirect(f,g,_,D){var S=this;return(0,h.Z)(function*(){return yield S._originValidation(f),function pa(y){Zn().location.href=y}(Ii(f,g,_,Le(),D)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:D,promise:S}=this.eventManagers[g];return D?Promise.resolve(D):(K(S,"If manager is not set, promise should be"),S)}const _=this.initAndGetManager(f);return this.eventManagers[g]={promise:_},_.catch(()=>{delete this.eventManagers[g]}),_}initAndGetManager(f){var g=this;return(0,h.Z)(function*(){const _=yield function g0(y){return Ps.apply(this,arguments)}(f),D=new xu(f);return _.register("authEvent",S=>(B(null==S?void 0:S.authEvent,f,"invalid-auth-event"),{status:D.onEvent(S.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:D},g.iframes[f._key()]=_,D})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(ku,{type:ku},D=>{var S;const Z=null===(S=null==D?void 0:D[0])||void 0===S?void 0:S[ku];void 0!==Z&&g(!!Z),Se(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Nu(y){return Yd.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return oi()||wr()||ur()}}),this.cordovaResolver=ne(class mp{constructor(){this._redirectPersistence=Wn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=so,this._overrideRedirectResult=zd}_initialize(f){var g=this;return(0,h.Z)(function*(){const _=f._key();let D=g.eventManagers.get(_);return D||(D=new Ec(f),g.eventManagers.set(_,D),g.attachCallbackListeners(f,D)),D})()}_openPopup(f){Se(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,_,D){var S=this;return(0,h.Z)(function*(){!function xa(y){var f,g,_,D,S,Z,ye,qe,rt,mt;const gt=Lo();B("function"==typeof(null===(f=null==gt?void 0:gt.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),B(void 0!==(null===(g=null==gt?void 0:gt.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),B("function"==typeof(null===(S=null===(D=null===(_=null==gt?void 0:gt.cordova)||void 0===_?void 0:_.plugins)||void 0===D?void 0:D.browsertab)||void 0===S?void 0:S.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(qe=null===(ye=null===(Z=null==gt?void 0:gt.cordova)||void 0===Z?void 0:Z.plugins)||void 0===ye?void 0:ye.browsertab)||void 0===qe?void 0:qe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(mt=null===(rt=null==gt?void 0:gt.cordova)||void 0===rt?void 0:rt.InAppBrowser)||void 0===mt?void 0:mt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Z=yield S._initialize(f);yield Z.initialized(),Z.resetRedirect(),function op(){jr.clear()}(),yield S._originValidation(f);const ye=function wc(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:rh(),postBody:null,tenantId:y.tenantId,error:be(y,"no-auth-event")}}(f,_,D);yield function gp(y,f){return Bu()._set(Na(y),f)}(f,ye);const qe=yield function eh(y,f,g){return Pi.apply(this,arguments)}(f,ye,g),rt=yield function _c(y){const{cordova:f}=Lo();return new Promise(g=>{f.plugins.browsertab.isAvailable(_=>{let D=null;_?f.plugins.browsertab.openUrl(y):D=f.InAppBrowser.open(y,function qs(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(D)})})}(qe);return function Fs(y,f,g){return pp.apply(this,arguments)}(f,Z,rt)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Lu(y){return vc.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:_,handleOpenURL:D,BuildInfo:S}=Lo(),Z=setTimeout((0,h.Z)(function*(){yield Ra(f),g.onEvent(Vo())}),500),ye=function(){var mt=(0,h.Z)(function*(gt){clearTimeout(Z);const Pn=yield Ra(f);let di=null;Pn&&(null==gt?void 0:gt.url)&&(di=function Jm(y,f){var g,_;const D=function ju(y){const f=Xr(y),g=f.link?decodeURIComponent(f.link):void 0,_=Xr(g).link,D=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Xr(D).link||D||_||g||y}(f);if(D.includes("/__/auth/callback")){const S=Xr(D),Z=S.firebaseError?function Xm(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(S.firebaseError)):null,ye=null===(_=null===(g=null==Z?void 0:Z.code)||void 0===g?void 0:g.split("auth/"))||void 0===_?void 0:_[1],qe=ye?be(ye):null;return qe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:qe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:D,postBody:null}}return null}(Pn,gt.url)),g.onEvent(di||Vo())});return function(Pn){return mt.apply(this,arguments)}}();void 0!==_&&"function"==typeof _.subscribe&&_.subscribe(null,ye);const qe=D,rt=`${S.packageName.toLowerCase()}://`;Lo().handleOpenURL=function(){var mt=(0,h.Z)(function*(gt){if(gt.toLowerCase().startsWith(rt)&&ye({url:gt}),"function"==typeof qe)try{qe(gt)}catch(Pn){console.error(Pn)}});return function(gt){return mt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Wn,this._completeRedirectFn=so,this._overrideRedirectResult=zd}_initialize(f){var g=this;return(0,h.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,_,D){var S=this;return(0,h.Z)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._openPopup(f,g,_,D)})()}_openRedirect(f,g,_,D){var S=this;return(0,h.Z)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._openRedirect(f,g,_,D)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Pa()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return sy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const g=yield function oh(){return Hu.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Tc(y){return y.unwrap()}function ay(y){return Ep(y)}function Ep(y){const{_tokenResponse:f}=y instanceof P.ZR?y.customData:y;if(!f)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return _a.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let _;switch(g){case"google.com":_=Bl;break;case"facebook.com":_=Eo;break;case"github.com":_=Pd;break;case"twitter.com":_=oa;break;default:const{oauthIdToken:D,oauthAccessToken:S,oauthTokenSecret:Z,pendingToken:ye,nonce:qe}=f;return S||Z||D||ye?ye?g.startsWith("saml.")?Ai._create(g,ye):Ci._fromParams({providerId:g,signInMethod:g,pendingToken:ye,idToken:D,accessToken:S}):new Ti(g).credential({idToken:D,accessToken:S,rawNonce:qe}):null}return y instanceof P.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function ci(y,f){return f.catch(g=>{throw g instanceof P.ZR&&function Ac(y,f){var g;const _=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new uy(y,function Kf(y,f){var g;const _=(0,P.m9)(y),D=f;return B(f.customData.operationType,_,"argument-error"),B(null===(g=D.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,_,"argument-error"),ca._fromError(_,D)}(y,f));else if(_){const D=Ep(f),S=f;D&&(S.credential=D,S.tenantId=_.tenantId||void 0,S.email=_.email||void 0,S.phoneNumber=_.phoneNumber||void 0)}}(y,g),g}).then(g=>{const D=g.user;return{operationType:g.operationType,credential:ay(g),additionalUserInfo:Cr(g),user:Yi.getOrCreate(D)}})}function lh(y,f){return ch.apply(this,arguments)}function ch(){return(ch=(0,h.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:_=>ci(y,g.confirm(_))}})).apply(this,arguments)}class uy{constructor(f,g){this.resolver=g,this.auth=function oy(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ci(Tc(this.auth),this.resolver.resolveSignIn(f))}}class Yi{constructor(f){this._delegate=f,this.multiFactor=function u0(y){const f=(0,P.m9)(y);return Yf.has(f)||Yf.set(f,da._fromUser(f)),Yf.get(f)}(f)}static getOrCreate(f){return Yi.USER_MAP.has(f)||Yi.USER_MAP.set(f,new Yi(f)),Yi.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,h.Z)(function*(){return ci(g.auth,R(g._delegate,f))})()}linkWithPhoneNumber(f,g){var _=this;return(0,h.Z)(function*(){return lh(_.auth,function Au(y,f,g){return rp.apply(this,arguments)}(_._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,h.Z)(function*(){return ci(g.auth,function ip(y,f,g){return nc.apply(this,arguments)}(g._delegate,f,ki))})()}linkWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Bo(F(g.auth)),function Gm(y,f,g){return function oc(y,f,g){return io.apply(this,arguments)}(y,f,g)}(g._delegate,f,ki)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,h.Z)(function*(){return ci(g.auth,ue(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return lh(this.auth,function $m(y,f,g){return ui.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return ci(this.auth,function ms(y,f,g){return tc.apply(this,arguments)}(this._delegate,f,ki))}reauthenticateWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Bo(F(g.auth)),function Mu(y,f,g){return function Ar(y,f,g){return ys.apply(this,arguments)}(y,f,g)}(g._delegate,f,ki)})()}sendEmailVerification(f){return function Ss(y,f){return Vd.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,h.Z)(function*(){return yield function km(y,f){return gn.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function zf(y,f){return ql((0,P.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Vm(y,f){return ql((0,P.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Jl(y,f){return Oo.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function qf(y,f){return Gl.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Gf(y,f,g){return Ud.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Yi.USER_MAP=new WeakMap;const Gu=B;let wp=(()=>{class y{constructor(g,_){if(this.app=g,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=g.options;Gu(D,"invalid-api-key",{appName:g.name}),Gu(D,"invalid-api-key",{appName:g.name});const S="undefined"!=typeof window?ki:void 0;this._delegate=_.initialize({options:{persistence:ly(D,g.name),popupRedirectResolver:S}}),this._delegate._updateErrorMap(ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Yi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,_){!function Oe(y,f,g){const _=F(y);B(_._canInitEmulator,_,"emulator-config-failed"),B(/^https?:\/\//.test(f),_,"invalid-emulator-scheme");const D=!!(null==g?void 0:g.disableWarnings),S=ot(f),{host:Z,port:ye}=function Pt(y){const f=ot(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const _=g[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(_);if(D){const S=D[1];return{host:S,port:Bt(_.substr(S.length+1))}}{const[S,Z]=_.split(":");return{host:S,port:Bt(Z)}}}(f);_.config.emulator={url:`${S}//${Z}${null===ye?"":`:${ye}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:Z,port:ye,protocol:S.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function jt(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,_)}applyActionCode(g){return function fs(y,f){return Me.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return kt(this._delegate,g)}confirmPasswordReset(g,_){return function Do(y,f,g){return Co.apply(this,arguments)}(this._delegate,g,_)}createUserWithEmailAndPassword(g,_){var D=this;return(0,h.Z)(function*(){return ci(D._delegate,function aa(y,f,g){return Ri.apply(this,arguments)}(D._delegate,g,_))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function $f(y,f){return Ys.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Fm(y,f){const g=ia.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,h.Z)(function*(){Gu(hr(),g._delegate,"operation-not-supported-in-this-environment");const _=yield function qm(y,f){return Da.apply(this,arguments)}(g._delegate,ki);return _?ci(g._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function yp(y,f){F(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,_,D){const{next:S,error:Z,complete:ye}=Ip(g,_,D);return this._delegate.onAuthStateChanged(S,Z,ye)}onIdTokenChanged(g,_,D){const{next:S,error:Z,complete:ye}=Ip(g,_,D);return this._delegate.onIdTokenChanged(S,Z,ye)}sendSignInLinkToEmail(g,_){return function Fd(y,f,g){return Ld.apply(this,arguments)}(this._delegate,g,_)}sendPasswordResetEmail(g,_){return function Ts(y,f,g){return xi.apply(this,arguments)}(this._delegate,g,_||void 0)}setPersistence(g){var _=this;return(0,h.Z)(function*(){let D;switch(function iy(y,f){oo(Object.values(ei).includes(f),y,"invalid-persistence-type"),(0,P.b$)()?oo(f!==ei.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?oo(f===ei.NONE,y,"unsupported-persistence-type"):Dc()?oo(f===ei.NONE||f===ei.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):oo(f===ei.NONE||sh(),y,"unsupported-persistence-type")}(_._delegate,g),g){case ei.SESSION:D=Wn;break;case ei.LOCAL:D=(yield ne(Ro)._isAvailable())?Ro:Qr;break;case ei.NONE:D=Ve;break;default:return Se("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ci(this._delegate,function Hf(y){return mu.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ci(this._delegate,bo(this._delegate,g))}signInWithCustomToken(g){return ci(this._delegate,function _n(y,f){return it.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,_){return ci(this._delegate,function kd(y,f,g){return bo((0,P.m9)(y),Ul.credential(f,g))}(this._delegate,g,_))}signInWithEmailLink(g,_){return ci(this._delegate,function r0(y,f,g){return To.apply(this,arguments)}(this._delegate,g,_))}signInWithPhoneNumber(g,_){return lh(this._delegate,function nr(y,f,g){return Tu.apply(this,arguments)}(this._delegate,g,_))}signInWithPopup(g){var _=this;return(0,h.Z)(function*(){return Gu(hr(),_._delegate,"operation-not-supported-in-this-environment"),ci(_._delegate,function h0(y,f,g){return ec.apply(this,arguments)}(_._delegate,g,ki))})()}signInWithRedirect(g){var _=this;return(0,h.Z)(function*(){return Gu(hr(),_._delegate,"operation-not-supported-in-this-environment"),yield Bo(_._delegate),function sc(y,f,g){return function Ki(y,f,g){return Ht.apply(this,arguments)}(y,f,g)}(_._delegate,g,ki)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Vn(y,f){return $l.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ei,y})();function Ip(y,f,g){let _=y;"function"!=typeof y&&({next:_,error:f,complete:g}=y);const D=_;return{next:Z=>D(Z&&Yi.getOrCreate(Z)),error:f,complete:g}}function ly(y,f){const g=function $u(y,f){const g=Cc();if(!g)return[];const _=lt(ah,y,f);switch(g.getItem(_)){case ei.NONE:return[Ve];case ei.LOCAL:return[Ro,Wn];case ei.SESSION:return[Wn];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(Ro)&&g.push(Ro),"undefined"!=typeof window)for(const _ of[Qr,Wn])g.includes(_)||g.push(_);return g.includes(Ve)||g.push(Ve),g}class dh{constructor(){this.providerId="phone",this._delegate=new _a(Tc(Y.Z.auth()))}static credential(f,g){return _a.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}dh.PHONE_SIGN_IN_METHOD=_a.PHONE_SIGN_IN_METHOD,dh.PROVIDER_ID=_a.PROVIDER_ID;const bp=B;class _0{constructor(f,g,_=Y.Z.app()){var D;bp(null===(D=_.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new np(f,g,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function jo(y){y.INTERNAL.registerComponent(new oe.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),_=f.getProvider("auth");return new wp(g,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ul,FacebookAuthProvider:Eo,GithubAuthProvider:Pd,GoogleAuthProvider:Bl,OAuthProvider:Ti,SAMLAuthProvider:ds,PhoneAuthProvider:dh,PhoneMultiFactorGenerator:y0,RecaptchaVerifier:_0,TwitterAuthProvider:oa,Auth:wp,AuthCredential:cn,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.14")}(Y.Z)},8306:(nt,Ee,x)=>{x.d(Ee,{y:()=>$});var h=x(2961),Y=x(727),P=x(8822),se=x(4671);var oe=x(2416),ce=x(576),de=x(2806);let $=(()=>{class we{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const he=new we;return he.source=this,he.operator=Be,he}subscribe(Be,he,Ie){const et=function Ue(we){return we&&we instanceof h.Lv||function te(we){return we&&(0,ce.m)(we.next)&&(0,ce.m)(we.error)&&(0,ce.m)(we.complete)}(we)&&(0,Y.Nn)(we)}(Be)?Be:new h.Hp(Be,he,Ie);return(0,de.x)(()=>{const{operator:Ye,source:Se}=this;et.add(Ye?Ye.call(et,Se):Se?this._subscribe(et):this._trySubscribe(et))}),et}_trySubscribe(Be){try{return this._subscribe(Be)}catch(he){Be.error(he)}}forEach(Be,he){return new(he=j(he))((Ie,et)=>{const Ye=new h.Hp({next:Se=>{try{Be(Se)}catch(be){et(be),Ye.unsubscribe()}},error:et,complete:Ie});this.subscribe(Ye)})}_subscribe(Be){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Be)}[P.L](){return this}pipe(...Be){return function ve(we){return 0===we.length?se.y:1===we.length?we[0]:function(Be){return we.reduce((he,Ie)=>Ie(he),Be)}}(Be)(this)}toPromise(Be){return new(Be=j(Be))((he,Ie)=>{let et;this.subscribe(Ye=>et=Ye,Ye=>Ie(Ye),()=>he(et))})}}return we.create=ke=>new we(ke),we})();function j(we){var ke;return null!==(ke=null!=we?we:oe.v.Promise)&&void 0!==ke?ke:Promise}},7579:(nt,Ee,x)=>{x.d(Ee,{x:()=>oe});var h=x(8306),Y=x(727);const se=(0,x(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=x(8737),ve=x(2806);let oe=(()=>{class de extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const te=new ce(this,this);return te.operator=j,te}_throwIfClosed(){if(this.closed)throw new se}next(j){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(j)}})}error(j){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:te}=this;for(;te.length;)te.shift().error(j)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:te,isStopped:Ue,observers:we}=this;return te||Ue?Y.Lc:(this.currentObservers=null,we.push(j),new Y.w0(()=>{this.currentObservers=null,(0,le.P)(we,j)}))}_checkFinalizedStatuses(j){const{hasError:te,thrownError:Ue,isStopped:we}=this;te?j.error(Ue):we&&j.complete()}asObservable(){const j=new h.y;return j.source=this,j}}return de.create=($,j)=>new ce($,j),de})();class ce extends oe{constructor($,j){super(),this.destination=$,this.source=j}next($){var j,te;null===(te=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===te||te.call(j,$)}error($){var j,te;null===(te=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===te||te.call(j,$)}complete(){var $,j;null===(j=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===j||j.call($)}_subscribe($){var j,te;return null!==(te=null===(j=this.source)||void 0===j?void 0:j.subscribe($))&&void 0!==te?te:Y.Lc}}},2961:(nt,Ee,x)=>{x.d(Ee,{Hp:()=>Be,Lv:()=>te});var h=x(576),Y=x(727),P=x(2416),se=x(7849);function le(){}const ve=de("C",void 0,void 0);function de(Se,be,De){return{kind:Se,value:be,error:De}}var $=x(3410),j=x(2806);class te extends Y.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,Y.Nn)(be)&&be.add(this)):this.destination=Ye}static create(be,De,We){return new Be(be,De,We)}next(be){this.isStopped?et(function ce(Se){return de("N",Se,void 0)}(be),this):this._next(be)}error(be){this.isStopped?et(function oe(Se){return de("E",void 0,Se)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?et(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function we(Se,be){return Ue.call(Se,be)}class ke{constructor(be){this.partialObserver=be}next(be){const{partialObserver:De}=this;if(De.next)try{De.next(be)}catch(We){he(We)}}error(be){const{partialObserver:De}=this;if(De.error)try{De.error(be)}catch(We){he(We)}else he(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(De){he(De)}}}class Be extends te{constructor(be,De,We){let Fe;if(super(),(0,h.m)(be)||!be)Fe={next:null!=be?be:void 0,error:null!=De?De:void 0,complete:null!=We?We:void 0};else{let B;this&&P.v.useDeprecatedNextContext?(B=Object.create(be),B.unsubscribe=()=>this.unsubscribe(),Fe={next:be.next&&we(be.next,B),error:be.error&&we(be.error,B),complete:be.complete&&we(be.complete,B)}):Fe=be}this.destination=new ke(Fe)}}function he(Se){P.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Se):(0,se.h)(Se)}function et(Se,be){const{onStoppedNotification:De}=P.v;De&&$.z.setTimeout(()=>De(Se,be))}const Ye={closed:!0,next:le,error:function Ie(Se){throw Se},complete:le}},727:(nt,Ee,x)=>{x.d(Ee,{Lc:()=>ve,w0:()=>le,Nn:()=>oe});var h=x(576);const P=(0,x(3888).d)(de=>function(j){de(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((te,Ue)=>`${Ue+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var se=x(8737);class le{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const we of j)we.remove(this);else j.remove(this);const{initialTeardown:te}=this;if((0,h.m)(te))try{te()}catch(we){$=we instanceof P?we.errors:[we]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const we of Ue)try{ce(we)}catch(ke){$=null!=$?$:[],ke instanceof P?$=[...$,...ke.errors]:$.push(ke)}}if($)throw new P($)}}add($){var j;if($&&$!==this)if(this.closed)ce($);else{if($ instanceof le){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push($)}}_hasParent($){const{_parentage:j}=this;return j===$||Array.isArray(j)&&j.includes($)}_addParent($){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push($),j):j?[j,$]:$}_removeParent($){const{_parentage:j}=this;j===$?this._parentage=null:Array.isArray(j)&&(0,se.P)(j,$)}remove($){const{_finalizers:j}=this;j&&(0,se.P)(j,$),$ instanceof le&&$._removeParent(this)}}le.EMPTY=(()=>{const de=new le;return de.closed=!0,de})();const ve=le.EMPTY;function oe(de){return de instanceof le||de&&"closed"in de&&(0,h.m)(de.remove)&&(0,h.m)(de.add)&&(0,h.m)(de.unsubscribe)}function ce(de){(0,h.m)(de)?de():de.unsubscribe()}},2416:(nt,Ee,x)=>{x.d(Ee,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(nt,Ee,x)=>{x.d(Ee,{E:()=>Y});const Y=new(x(8306).y)(le=>le.complete())},8996:(nt,Ee,x)=>{x.d(Ee,{D:()=>be});var h=x(8421),Y=x(5363),P=x(9468),ve=x(8306),ce=x(2202),de=x(576),$=x(9672);function te(De,We){if(!De)throw new Error("Iterable cannot be null");return new ve.y(Fe=>{(0,$.f)(Fe,We,()=>{const B=De[Symbol.asyncIterator]();(0,$.f)(Fe,We,()=>{B.next().then(Ce=>{Ce.done?Fe.complete():Fe.next(Ce.value)})},0,!0)})})}var Ue=x(3670),we=x(8239),ke=x(1144),Be=x(6495),he=x(2206),Ie=x(4532),et=x(3260);function be(De,We){return We?function Se(De,We){if(null!=De){if((0,Ue.c)(De))return function se(De,We){return(0,h.Xf)(De).pipe((0,P.R)(We),(0,Y.Q)(We))}(De,We);if((0,ke.z)(De))return function oe(De,We){return new ve.y(Fe=>{let B=0;return We.schedule(function(){B===De.length?Fe.complete():(Fe.next(De[B++]),Fe.closed||this.schedule())})})}(De,We);if((0,we.t)(De))return function le(De,We){return(0,h.Xf)(De).pipe((0,P.R)(We),(0,Y.Q)(We))}(De,We);if((0,he.D)(De))return te(De,We);if((0,Be.T)(De))return function j(De,We){return new ve.y(Fe=>{let B;return(0,$.f)(Fe,We,()=>{B=De[ce.h](),(0,$.f)(Fe,We,()=>{let Ce,K;try{({value:Ce,done:K}=B.next())}catch(re){return void Fe.error(re)}K?Fe.complete():Fe.next(Ce)},0,!0)}),()=>(0,de.m)(null==B?void 0:B.return)&&B.return()})}(De,We);if((0,et.L)(De))return function Ye(De,We){return te((0,et.Q)(De),We)}(De,We)}throw(0,Ie.z)(De)}(De,We):(0,h.Xf)(De)}},8421:(nt,Ee,x)=>{x.d(Ee,{Xf:()=>Ue});var h=x(655),Y=x(1144),P=x(8239),se=x(8306),le=x(3670),ve=x(2206),oe=x(4532),ce=x(6495),de=x(3260),$=x(576),j=x(7849),te=x(8822);function Ue(Se){if(Se instanceof se.y)return Se;if(null!=Se){if((0,le.c)(Se))return function we(Se){return new se.y(be=>{const De=Se[te.L]();if((0,$.m)(De.subscribe))return De.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,Y.z)(Se))return function ke(Se){return new se.y(be=>{for(let De=0;De<Se.length&&!be.closed;De++)be.next(Se[De]);be.complete()})}(Se);if((0,P.t)(Se))return function Be(Se){return new se.y(be=>{Se.then(De=>{be.closed||(be.next(De),be.complete())},De=>be.error(De)).then(null,j.h)})}(Se);if((0,ve.D)(Se))return Ie(Se);if((0,ce.T)(Se))return function he(Se){return new se.y(be=>{for(const De of Se)if(be.next(De),be.closed)return;be.complete()})}(Se);if((0,de.L)(Se))return function et(Se){return Ie((0,de.Q)(Se))}(Se)}throw(0,oe.z)(Se)}function Ie(Se){return new se.y(be=>{(function Ye(Se,be){var De,We,Fe,B;return(0,h.mG)(this,void 0,void 0,function*(){try{for(De=(0,h.KL)(Se);!(We=yield De.next()).done;)if(be.next(We.value),be.closed)return}catch(Ce){Fe={error:Ce}}finally{try{We&&!We.done&&(B=De.return)&&(yield B.call(De))}finally{if(Fe)throw Fe.error}}be.complete()})})(Se,be).catch(De=>be.error(De))})}},6451:(nt,Ee,x)=>{x.d(Ee,{T:()=>ve});var h=x(8189),Y=x(8421),P=x(515),se=x(7669),le=x(8996);function ve(...oe){const ce=(0,se.yG)(oe),de=(0,se._6)(oe,1/0),$=oe;return $.length?1===$.length?(0,Y.Xf)($[0]):(0,h.J)(de)((0,le.D)($,ce)):P.E}},5403:(nt,Ee,x)=>{x.d(Ee,{Q:()=>P,x:()=>Y});var h=x(2961);function Y(se,le,ve,oe,ce){return new P(se,le,ve,oe,ce)}class P extends h.Lv{constructor(le,ve,oe,ce,de,$){super(le),this.onFinalize=de,this.shouldUnsubscribe=$,this._next=ve?function(j){try{ve(j)}catch(te){le.error(te)}}:super._next,this._error=ce?function(j){try{ce(j)}catch(te){le.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch(j){le.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(nt,Ee,x)=>{x.d(Ee,{U:()=>P});var h=x(4482),Y=x(5403);function P(se,le){return(0,h.e)((ve,oe)=>{let ce=0;ve.subscribe((0,Y.x)(oe,de=>{oe.next(se.call(le,de,ce++))}))})}},8189:(nt,Ee,x)=>{x.d(Ee,{J:()=>P});var h=x(5577),Y=x(4671);function P(se=1/0){return(0,h.z)(Y.y,se)}},5577:(nt,Ee,x)=>{x.d(Ee,{z:()=>ce});var h=x(4004),Y=x(8421),P=x(4482),se=x(9672),le=x(5403),oe=x(576);function ce(de,$,j=1/0){return(0,oe.m)($)?ce((te,Ue)=>(0,h.U)((we,ke)=>$(te,we,Ue,ke))((0,Y.Xf)(de(te,Ue))),j):("number"==typeof $&&(j=$),(0,P.e)((te,Ue)=>function ve(de,$,j,te,Ue,we,ke,Be){const he=[];let Ie=0,et=0,Ye=!1;const Se=()=>{Ye&&!he.length&&!Ie&&$.complete()},be=We=>Ie<te?De(We):he.push(We),De=We=>{we&&$.next(We),Ie++;let Fe=!1;(0,Y.Xf)(j(We,et++)).subscribe((0,le.x)($,B=>{null==Ue||Ue(B),we?be(B):$.next(B)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(Ie--;he.length&&Ie<te;){const B=he.shift();ke?(0,se.f)($,ke,()=>De(B)):De(B)}Se()}catch(B){$.error(B)}}))};return de.subscribe((0,le.x)($,be,()=>{Ye=!0,Se()})),()=>{null==Be||Be()}}(te,Ue,de,j)))}},5363:(nt,Ee,x)=>{x.d(Ee,{Q:()=>se});var h=x(9672),Y=x(4482),P=x(5403);function se(le,ve=0){return(0,Y.e)((oe,ce)=>{oe.subscribe((0,P.x)(ce,de=>(0,h.f)(ce,le,()=>ce.next(de),ve),()=>(0,h.f)(ce,le,()=>ce.complete(),ve),de=>(0,h.f)(ce,le,()=>ce.error(de),ve)))})}},3099:(nt,Ee,x)=>{x.d(Ee,{B:()=>ve});var h=x(8996),Y=x(5698),P=x(7579),se=x(2961),le=x(4482);function ve(ce={}){const{connector:de=(()=>new P.x),resetOnError:$=!0,resetOnComplete:j=!0,resetOnRefCountZero:te=!0}=ce;return Ue=>{let we=null,ke=null,Be=null,he=0,Ie=!1,et=!1;const Ye=()=>{null==ke||ke.unsubscribe(),ke=null},Se=()=>{Ye(),we=Be=null,Ie=et=!1},be=()=>{const De=we;Se(),null==De||De.unsubscribe()};return(0,le.e)((De,We)=>{he++,!et&&!Ie&&Ye();const Fe=Be=null!=Be?Be:de();We.add(()=>{he--,0===he&&!et&&!Ie&&(ke=oe(be,te))}),Fe.subscribe(We),we||(we=new se.Hp({next:B=>Fe.next(B),error:B=>{et=!0,Ye(),ke=oe(Se,$,B),Fe.error(B)},complete:()=>{Ie=!0,Ye(),ke=oe(Se,j),Fe.complete()}}),(0,h.D)(De).subscribe(we))})(Ue)}}function oe(ce,de,...$){return!0===de?(ce(),null):!1===de?null:de(...$).pipe((0,Y.q)(1)).subscribe(()=>ce())}},9468:(nt,Ee,x)=>{x.d(Ee,{R:()=>Y});var h=x(4482);function Y(P,se=0){return(0,h.e)((le,ve)=>{ve.add(P.schedule(()=>le.subscribe(ve),se))})}},5698:(nt,Ee,x)=>{x.d(Ee,{q:()=>se});var h=x(515),Y=x(4482),P=x(5403);function se(le){return le<=0?()=>h.E:(0,Y.e)((ve,oe)=>{let ce=0;ve.subscribe((0,P.x)(oe,de=>{++ce<=le&&(oe.next(de),le<=ce&&oe.complete())}))})}},8505:(nt,Ee,x)=>{x.d(Ee,{b:()=>le});var h=x(576),Y=x(4482),P=x(5403),se=x(4671);function le(ve,oe,ce){const de=(0,h.m)(ve)||oe||ce?{next:ve,error:oe,complete:ce}:ve;return de?(0,Y.e)(($,j)=>{var te;null===(te=de.subscribe)||void 0===te||te.call(de);let Ue=!0;$.subscribe((0,P.x)(j,we=>{var ke;null===(ke=de.next)||void 0===ke||ke.call(de,we),j.next(we)},()=>{var we;Ue=!1,null===(we=de.complete)||void 0===we||we.call(de),j.complete()},we=>{var ke;Ue=!1,null===(ke=de.error)||void 0===ke||ke.call(de,we),j.error(we)},()=>{var we,ke;Ue&&(null===(we=de.unsubscribe)||void 0===we||we.call(de)),null===(ke=de.finalize)||void 0===ke||ke.call(de)}))}):se.y}},4408:(nt,Ee,x)=>{x.d(Ee,{o:()=>le});var h=x(727);class Y extends h.w0{constructor(oe,ce){super()}schedule(oe,ce=0){return this}}const P={setInterval(ve,oe,...ce){const{delegate:de}=P;return(null==de?void 0:de.setInterval)?de.setInterval(ve,oe,...ce):setInterval(ve,oe,...ce)},clearInterval(ve){const{delegate:oe}=P;return((null==oe?void 0:oe.clearInterval)||clearInterval)(ve)},delegate:void 0};var se=x(8737);class le extends Y{constructor(oe,ce){super(oe,ce),this.scheduler=oe,this.work=ce,this.pending=!1}schedule(oe,ce=0){if(this.closed)return this;this.state=oe;const de=this.id,$=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId($,de,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId($,this.id,ce),this}requestAsyncId(oe,ce,de=0){return P.setInterval(oe.flush.bind(oe,this),de)}recycleAsyncId(oe,ce,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return ce;P.clearInterval(ce)}execute(oe,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(oe,ce);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,ce){let $,de=!1;try{this.work(oe)}catch(j){de=!0,$=j||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:oe,scheduler:ce}=this,{actions:de}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(de,this),null!=oe&&(this.id=this.recycleAsyncId(ce,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(nt,Ee,x)=>{x.d(Ee,{v:()=>P});var h=x(6063);class Y{constructor(le,ve=Y.now){this.schedulerActionCtor=le,this.now=ve}schedule(le,ve=0,oe){return new this.schedulerActionCtor(this,le).schedule(oe,ve)}}Y.now=h.l.now;class P extends Y{constructor(le,ve=Y.now){super(le,ve),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:ve}=this;if(this._active)return void ve.push(le);let oe;this._active=!0;do{if(oe=le.execute(le.state,le.delay))break}while(le=ve.shift());if(this._active=!1,oe){for(;le=ve.shift();)le.unsubscribe();throw oe}}}},4986:(nt,Ee,x)=>{x.d(Ee,{z:()=>P});var h=x(4408);const P=new(x(7565).v)(h.o)},6063:(nt,Ee,x)=>{x.d(Ee,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(nt,Ee,x)=>{x.d(Ee,{z:()=>h});const h={setTimeout(Y,P,...se){const{delegate:le}=h;return(null==le?void 0:le.setTimeout)?le.setTimeout(Y,P,...se):setTimeout(Y,P,...se)},clearTimeout(Y){const{delegate:P}=h;return((null==P?void 0:P.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(nt,Ee,x)=>{x.d(Ee,{h:()=>Y});const Y=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(nt,Ee,x)=>{x.d(Ee,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(nt,Ee,x)=>{x.d(Ee,{_6:()=>ve,jO:()=>se,yG:()=>le});var h=x(576);function P(oe){return oe[oe.length-1]}function se(oe){return(0,h.m)(P(oe))?oe.pop():void 0}function le(oe){return function Y(oe){return oe&&(0,h.m)(oe.schedule)}(P(oe))?oe.pop():void 0}function ve(oe,ce){return"number"==typeof P(oe)?oe.pop():ce}},8737:(nt,Ee,x)=>{function h(Y,P){if(Y){const se=Y.indexOf(P);0<=se&&Y.splice(se,1)}}x.d(Ee,{P:()=>h})},3888:(nt,Ee,x)=>{function h(Y){const se=Y(le=>{Error.call(le),le.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}x.d(Ee,{d:()=>h})},2806:(nt,Ee,x)=>{x.d(Ee,{O:()=>se,x:()=>P});var h=x(2416);let Y=null;function P(le){if(h.v.useDeprecatedSynchronousErrorHandling){const ve=!Y;if(ve&&(Y={errorThrown:!1,error:null}),le(),ve){const{errorThrown:oe,error:ce}=Y;if(Y=null,oe)throw ce}}else le()}function se(le){h.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=le)}},9672:(nt,Ee,x)=>{function h(Y,P,se,le=0,ve=!1){const oe=P.schedule(function(){se(),ve?Y.add(this.schedule(null,le)):this.unsubscribe()},le);if(Y.add(oe),!ve)return oe}x.d(Ee,{f:()=>h})},4671:(nt,Ee,x)=>{function h(Y){return Y}x.d(Ee,{y:()=>h})},1144:(nt,Ee,x)=>{x.d(Ee,{z:()=>h});const h=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(nt,Ee,x)=>{x.d(Ee,{D:()=>Y});var h=x(576);function Y(P){return Symbol.asyncIterator&&(0,h.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(nt,Ee,x)=>{function h(Y){return"function"==typeof Y}x.d(Ee,{m:()=>h})},3670:(nt,Ee,x)=>{x.d(Ee,{c:()=>P});var h=x(8822),Y=x(576);function P(se){return(0,Y.m)(se[h.L])}},6495:(nt,Ee,x)=>{x.d(Ee,{T:()=>P});var h=x(2202),Y=x(576);function P(se){return(0,Y.m)(null==se?void 0:se[h.h])}},8239:(nt,Ee,x)=>{x.d(Ee,{t:()=>Y});var h=x(576);function Y(P){return(0,h.m)(null==P?void 0:P.then)}},3260:(nt,Ee,x)=>{x.d(Ee,{L:()=>se,Q:()=>P});var h=x(655),Y=x(576);function P(le){return(0,h.FC)(this,arguments,function*(){const oe=le.getReader();try{for(;;){const{value:ce,done:de}=yield(0,h.qq)(oe.read());if(de)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ce)}}finally{oe.releaseLock()}})}function se(le){return(0,Y.m)(null==le?void 0:le.getReader)}},4482:(nt,Ee,x)=>{x.d(Ee,{A:()=>Y,e:()=>P});var h=x(576);function Y(se){return(0,h.m)(null==se?void 0:se.lift)}function P(se){return le=>{if(Y(le))return le.lift(function(ve){try{return se(ve,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(nt,Ee,x)=>{x.d(Ee,{h:()=>P});var h=x(2416),Y=x(3410);function P(se){Y.z.setTimeout(()=>{const{onUnhandledError:le}=h.v;if(!le)throw se;le(se)})}},4532:(nt,Ee,x)=>{function h(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}x.d(Ee,{z:()=>h})},655:(nt,Ee,x)=>{function se(K,re){var ne={};for(var pe in K)Object.prototype.hasOwnProperty.call(K,pe)&&re.indexOf(pe)<0&&(ne[pe]=K[pe]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var ae=0;for(pe=Object.getOwnPropertySymbols(K);ae<pe.length;ae++)re.indexOf(pe[ae])<0&&Object.prototype.propertyIsEnumerable.call(K,pe[ae])&&(ne[pe[ae]]=K[pe[ae]])}return ne}function ce(K,re,ne,pe){return new(ne||(ne=Promise))(function(Le,dt){function Ut(Wt){try{Ke(pe.next(Wt))}catch(Fn){dt(Fn)}}function At(Wt){try{Ke(pe.throw(Wt))}catch(Fn){dt(Fn)}}function Ke(Wt){Wt.done?Le(Wt.value):function ae(Le){return Le instanceof ne?Le:new ne(function(dt){dt(Le)})}(Wt.value).then(Ut,At)}Ke((pe=pe.apply(K,re||[])).next())})}function he(K){return this instanceof he?(this.v=K,this):new he(K)}function Ie(K,re,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,pe=ne.apply(K,re||[]),Le=[];return ae={},dt("next"),dt("throw"),dt("return"),ae[Symbol.asyncIterator]=function(){return this},ae;function dt(fn){pe[fn]&&(ae[fn]=function($t){return new Promise(function(jn,Ct){Le.push([fn,$t,jn,Ct])>1||Ut(fn,$t)})})}function Ut(fn,$t){try{!function At(fn){fn.value instanceof he?Promise.resolve(fn.value.v).then(Ke,Wt):Fn(Le[0][2],fn)}(pe[fn]($t))}catch(jn){Fn(Le[0][3],jn)}}function Ke(fn){Ut("next",fn)}function Wt(fn){Ut("throw",fn)}function Fn(fn,$t){fn($t),Le.shift(),Le.length&&Ut(Le[0][0],Le[0][1])}}function Ye(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,re=K[Symbol.asyncIterator];return re?re.call(K):(K=function te(K){var re="function"==typeof Symbol&&Symbol.iterator,ne=re&&K[re],pe=0;if(ne)return ne.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&pe>=K.length&&(K=void 0),{value:K&&K[pe++],done:!K}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ne={},pe("next"),pe("throw"),pe("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function pe(Le){ne[Le]=K[Le]&&function(dt){return new Promise(function(Ut,At){!function ae(Le,dt,Ut,At){Promise.resolve(At).then(function(Ke){Le({value:Ke,done:Ut})},dt)}(Ut,At,(dt=K[Le](dt)).done,dt.value)})}}}x.d(Ee,{FC:()=>Ie,KL:()=>Ye,_T:()=>se,mG:()=>ce,qq:()=>he})},5e3:(nt,Ee,x)=>{x.d(Ee,{$8M:()=>eo,$Z:()=>fv,AFp:()=>y_,AaK:()=>ce,CHM:()=>As,CRH:()=>l_,CZH:()=>vf,CqO:()=>mv,EJc:()=>wf,EpF:()=>dg,F4k:()=>hg,FYo:()=>jg,FiY:()=>Ns,G48:()=>Dl,GfV:()=>ad,Gpc:()=>j,JOm:()=>S,LFG:()=>Ar,LSH:()=>Vo,Lbi:()=>Ef,NdJ:()=>fg,OlP:()=>On,Oqu:()=>Cg,PXZ:()=>tC,Q6J:()=>pv,QGY:()=>Uh,Qsj:()=>Pw,R0b:()=>pi,RDi:()=>hs,Rgc:()=>sf,SBq:()=>Es,Sil:()=>oI,Suo:()=>u_,TTD:()=>Ti,TgZ:()=>za,VLi:()=>JD,X6Q:()=>If,XFs:()=>ft,Xpm:()=>me,Y36:()=>il,YKP:()=>Xv,YNc:()=>Oh,Yjl:()=>si,Yz7:()=>$t,ZZ4:()=>Tf,_Bn:()=>Xa,_UZ:()=>sl,_Vd:()=>Bg,_c5:()=>Vi,_uU:()=>Dg,aQg:()=>gm,c2e:()=>rI,cJS:()=>Ct,cg1:()=>Vv,dDg:()=>D_,deG:()=>tp,dqk:()=>Ot,eFA:()=>hI,ekj:()=>Eg,g9A:()=>v_,h0i:()=>mo,hGG:()=>TI,hij:()=>qh,iGM:()=>a_,ifc:()=>Vt,ip1:()=>Pr,kL8:()=>Uv,lG2:()=>wr,n5z:()=>Nn,oAB:()=>It,oxw:()=>kE,q4F:()=>ud,qLn:()=>Ac,qOj:()=>EE,qZA:()=>lg,s9C:()=>gr,sBO:()=>M_,sIi:()=>el,s_b:()=>Yg,soG:()=>E_,tBr:()=>ko,tb:()=>__,tp0:()=>Fo,uIk:()=>bE,vHH:()=>ke,vpe:()=>Dn,wAp:()=>wt,xp6:()=>vy,z2F:()=>um,zSh:()=>Qp,zs3:()=>Go});var h=x(7579),Y=x(727),P=x(8306),se=x(6451),le=x(3099);function ve(i){for(let s in i)if(i[s]===ve)return s;throw Error("Could not find renamed property on target object.")}function oe(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function de(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=ve({__forward_ref__:ve});function j(i){return i.__forward_ref__=j,i.toString=function(){return ce(this())},i}function te(i){return Ue(i)?i():i}function Ue(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===j}class ke extends Error{constructor(s,a){super(function Be(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function Ie(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function be(i,s){const a=s?` in ${s}`:"";throw new ke(-201,`No provider for ${Ie(i)} found${a}`)}function At(i,s){null==i&&function Ke(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function $t(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ct(i){return{providers:i.providers||[],imports:i.imports||[]}}function Tt(i){return wn(i,Xn)||wn(i,ar)}function wn(i,s){return i.hasOwnProperty(s)?i[s]:null}function ln(i){return i&&(i.hasOwnProperty(vr)||i.hasOwnProperty(Hn))?i[vr]:null}const Xn=ve({\u0275prov:ve}),vr=ve({\u0275inj:ve}),ar=ve({ngInjectableDef:ve}),Hn=ve({ngInjectorDef:ve});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let er;function vn(i){const s=er;return er=i,s}function Kr(i,s,a){const l=Tt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ft.Optional?null:void 0!==s?s:void be(ce(i),"Injector")}function Cn(i){return{toString:i}.toString()}var In=(()=>((In=In||{})[In.OnPush=0]="OnPush",In[In.Default=1]="Default",In))(),Vt=(()=>{return(i=Vt||(Vt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Vt;var i})();const st="undefined"!=typeof globalThis&&globalThis,ht="undefined"!=typeof window&&window,sn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ot=st||"undefined"!=typeof global&&global||ht||sn,Tn={},k=[],q=ve({\u0275cmp:ve}),z=ve({\u0275dir:ve}),Te=ve({\u0275pipe:ve}),V=ve({\u0275mod:ve}),J=ve({\u0275fac:ve}),U=ve({__NG_ELEMENT_ID__:ve});let X=0;function me(i){return Cn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===In.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||k,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Vt.Emulated,id:"c",styles:i.styles||k,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,p=i.features,v=i.pipes;return l.id+=X++,l.inputs=Zt(i.inputs,a),l.outputs=Zt(i.outputs),p&&p.forEach(E=>E(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(He):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(Ve):null,l})}function He(i){return on(i)||function pn(i){return i[z]||null}(i)}function Ve(i){return function _i(i){return i[Te]||null}(i)}const lt={};function It(i){return Cn(()=>{const s={type:i.type,bootstrap:i.bootstrap||k,declarations:i.declarations||k,imports:i.imports||k,exports:i.exports||k,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(lt[i.id]=i.type),s})}function Zt(i,s){if(null==i)return Tn;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=l,s&&(s[c]=p)}return a}const wr=me;function si(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function on(i){return i[q]||null}function bn(i,s){const a=i[V]||null;if(!a&&!0===s)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function lr(i){return Array.isArray(i)&&"object"==typeof i[1]}function ai(i){return Array.isArray(i)&&!0===i[1]}function Ds(i){return 0!=(8&i.flags)}function du(i){return 2==(2&i.flags)}function $i(i){return 1==(1&i.flags)}function wi(i){return null!==i.template}function hu(i){return 0!=(512&i[2])}function Lr(i,s){return i.hasOwnProperty(J)?i[J]:null}class Zs{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ti(){return Eo}function Eo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Pd),Bl}function Bl(){const i=Ai(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===Tn)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Pd(i,s,a,l){const c=Ai(i)||function gu(i,s){return i[sa]=s}(i,{previous:Tn,current:null}),p=c.current||(c.current={}),v=c.previous,E=this.declaredInputs[a],I=v[E];p[E]=new Zs(I&&I.currentValue,s,v===Tn),i[l]=s}Ti.ngInherit=!0;const sa="__ngSimpleChanges__";function Ai(i){return i[sa]||null}let Ks;function hs(i){Ks=i}function gn(i){return!!i.listen}const Mi={createRenderer:(i,s)=>function wo(){return void 0!==Ks?Ks:"undefined"!=typeof document?document:void 0}()};function Kt(i){for(;Array.isArray(i);)i=i[0];return i}function Cs(i,s){return Kt(s[i])}function Vr(i,s){return Kt(s[i.index])}function bo(i,s){return i.data[s]}function R(i,s){const a=s[i];return lr(a)?a:a[0]}function W(i){return 4==(4&i[2])}function ue(i){return 128==(128&i[2])}function ze(i,s){return null==s?null:i[s]}function _t(i){i[18]=0}function _n(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const it={lFrame:la(null),bindingsEnabled:!0};function Do(){return it.bindingsEnabled}function Me(){return it.lFrame.lView}function kt(){return it.lFrame.tView}function As(i){return it.lFrame.contextLView=i,i[8]}function Vn(){let i=$l();for(;null!==i&&64===i.type;)i=i.parent;return i}function $l(){return it.lFrame.currentTNode}function Ri(i,s){const a=it.lFrame;a.currentTNode=i,a.isParent=s}function kd(){return it.lFrame.isParent}function Ys(){return it.lFrame.bindingIndex++}function Ud(i,s){const a=it.lFrame;a.bindingIndex=a.bindingRootIndex=i,_u(s)}function _u(i){it.lFrame.currentDirectiveIndex=i}function Gl(){return it.lFrame.currentQueryIndex}function zf(i){it.lFrame.currentQueryIndex=i}function Vm(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function ql(i,s,a){if(a&ft.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&ft.Host||(c=Vm(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const l=it.lFrame=Wf();return l.currentTNode=s,l.lView=i,!0}function ua(i){const s=Wf(),a=i[1];it.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Wf(){const i=it.lFrame,s=null===i?null:i.child;return null===s?la(i):s}function la(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Zf(){const i=it.lFrame;return it.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Bd=Zf;function zi(){const i=Zf();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Cr(){return it.lFrame.selectedIndex}function Qs(i){it.lFrame.selectedIndex=i}function zn(){const i=it.lFrame;return bo(i.tView,i.selectedIndex)}function Eu(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:C,ngOnDestroy:T}=p;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),C&&((i.viewHooks||(i.viewHooks=[])).push(a,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,C)),null!=T&&(i.destroyHooks||(i.destroyHooks=[])).push(a,T)}}function Ms(i,s,a){jm(i,s,3,a)}function ca(i,s,a,l){(3&i[2])===a&&jm(i,s,a,l)}function Kf(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function jm(i,s,a,l){const p=null!=l?l:-1,v=s.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<v;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=l&&E>=l)break}else s[I]<0&&(i[18]+=65536),(E<p||-1==p)&&(a0(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function a0(i,s,a,l){const c=a[l]<0,p=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class da{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Qr(i,s,a){const l=gn(i);let c=0;for(;c<a.length;){const p=a[c];if("number"==typeof p){if(0!==p)break;c++;const v=a[c++],E=a[c++],I=a[c++];l?i.setAttribute(s,E,I,v):s.setAttributeNS(v,E,I)}else{const v=p,E=a[++c];Wn(v)?l&&i.setProperty(s,v,E):l?i.setAttribute(s,v,E):s.setAttribute(v,E),c++}}return c}function Wi(i){return 3===i||4===i||6===i}function Wn(i){return 64===i.charCodeAt(0)}function Wl(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||Qf(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function Qf(i,s,a,l,c){let p=0,v=i.length;if(-1===s)v=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===s){v=-1;break}if(E>s){v=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[p+1]=c));if(l===i[p+1])return void(i[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==v&&(i.splice(v,0,s),p=v+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==c&&i.splice(p++,0,c)}function ha(i){return-1!==i}function fa(i){return 32767&i}function pa(i,s){let a=function Zn(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let xs=!0;function Dt(i){const s=xs;return xs=i,s}let Hd=0;function Js(i,s){const a=Mo(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Zl(l.data,i),Zl(s,null),Zl(l.blueprint,null));const c=Xs(i,s),p=i.injectorIndex;if(ha(c)){const v=fa(c),E=pa(c,s),I=E[1].data;for(let C=0;C<8;C++)s[p+C]=E[v+C]|I[v+C]}return s[p+8]=c,p}function Zl(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Mo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Xs(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const p=c[1],v=p.type;if(l=2===v?p.declTNode:1===v?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ga(i,s,a){!function Ur(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(U)&&(l=a[U]),null==l&&(l=a[U]=Hd++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function $d(i,s,a){if(a&ft.Optional)return i;be(s,"NodeInjector")}function xo(i,s,a,l){if(a&ft.Optional&&void 0===l&&(l=null),0==(a&(ft.Self|ft.Host))){const c=i[9],p=vn(void 0);try{return c?c.get(s,l,a&ft.Optional):Kr(s,l,a&ft.Optional)}finally{vn(p)}}return $d(l,s,a)}function Iu(i,s,a,l=ft.Default,c){if(null!==i){const p=function Ro(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(U)?i[U]:void 0;return"number"==typeof s?s>=0?255&s:Yl:s}(a);if("function"==typeof p){if(!ql(s,i,l))return l&ft.Host?$d(c,a,l):xo(s,a,l,c);try{const v=p(l);if(null!=v||l&ft.Optional)return v;be(a)}finally{Bd()}}else if("number"==typeof p){let v=null,E=Mo(i,s),I=-1,C=l&ft.Host?s[16][6]:null;for((-1===E||l&ft.SkipSelf)&&(I=-1===E?Xs(i,s):s[E+8],-1!==I&&Gd(l,!1)?(v=s[1],E=fa(I),s=pa(I,s)):E=-1);-1!==E;){const T=s[1];if(Jr(p,E,T.data)){const O=bu(E,s,a,v,l,C);if(O!==Kl)return O}I=s[E+8],-1!==I&&Gd(l,s[1].data[E+8]===C)&&Jr(p,E,s)?(v=T,E=fa(I),s=pa(I,s)):E=-1}}}return xo(s,a,l,c)}const Kl={};function Yl(){return new ya(Vn(),Me())}function bu(i,s,a,l,c,p){const v=s[1],E=v.data[i+8],T=Du(E,v,a,null==l?du(E)&&xs:l!=v&&0!=(3&E.type),c&ft.Host&&p===E);return null!==T?ps(s,v,T,E):Kl}function Du(i,s,a,l,c){const p=i.providerIndexes,v=s.data,E=1048575&p,I=i.directiveStart,T=p>>20,H=c?E+T:i.directiveEnd;for(let Q=l?E:E+T;Q<H;Q++){const _e=v[Q];if(Q<I&&a===_e||Q>=I&&_e.type===a)return Q}if(c){const Q=v[I];if(Q&&wi(Q)&&Q.type===a)return I}return null}function ps(i,s,a,l){let c=i[a];const p=s.data;if(function Yf(i){return i instanceof da}(c)){const v=c;v.resolving&&function et(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new ke(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ie(p[a]));const E=Dt(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?vn(v.injectImpl):null;ql(i,l,ft.Default);try{c=i[a]=v.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function ob(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(l){const v=Eo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==I&&vn(I),Dt(E),v.resolving=!1,Bd()}}return c}function Jr(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Gd(i,s){return!(i&ft.Self||i&ft.Host&&s)}class ya{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Iu(this._tNode,this._lView,s,l,a)}}function Nn(i){return Cn(()=>{const s=i.prototype.constructor,a=s[J]||Cu(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const p=c[J]||Cu(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function Cu(i){return Ue(i)?()=>{const s=Cu(te(i));return s&&s()}:Lr(i)}function eo(i){return function ma(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const p=a[c];if(Wi(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(Vn(),i)}const gs="__parameters__";function Zi(i,s,a){return Cn(()=>{const l=function tr(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...p){if(this instanceof c)return l.apply(this,p),this;const v=new c(...p);return E.annotation=v,E;function E(I,C,T){const O=I.hasOwnProperty(gs)?I[gs]:Object.defineProperty(I,gs,{value:[]})[gs];for(;O.length<=T;)O.push(null);return(O[T]=O[T]||[]).push(v),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class On{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=$t({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const tp=new On("AnalyzeForEntryComponents");function ui(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),ui(l,s)):s!==i&&s.push(l)}return s}function li(i,s){i.forEach(a=>Array.isArray(a)?li(a,s):s(a))}function Su(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Jl(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Br(i,s,a){let l=wa(i,s);return l>=0?i[1|l]=a:(l=~l,function Xl(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Ea(i,s){const a=wa(i,s);if(a>=0)return i[1|a]}function wa(i,s){return function ec(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const p=l+(c-l>>1),v=i[p<<a];if(s===v)return p<<a;v>s?c=p:l=p+1}return~(c<<a)}(i,s,1)}const ro={},Ia="__NG_DI_FLAG__",ba="ngTempTokenPath",zd=/\n/gm,ic="__source",sc=ve({provide:String,useValue:ve});let Ki;function Ht(i){const s=Ki;return Ki=i,s}function Mu(i,s=ft.Default){if(void 0===Ki)throw new ke(203,"");return null===Ki?Kr(i,void 0,s):Ki.get(i,s&ft.Optional?null:void 0,s)}function Ar(i,s=ft.Default){return(function Jt(){return er}()||Mu)(te(i),s)}const Gm=Ar;function oc(i){const s=[];for(let a=0;a<i.length;a++){const l=te(i[a]);if(Array.isArray(l)){if(0===l.length)throw new ke(900,"");let c,p=ft.Default;for(let v=0;v<l.length;v++){const E=l[v],I=qm(E);"number"==typeof I?-1===I?c=E.token:p|=I:c=E}s.push(Ar(c,p))}else s.push(Ar(l))}return s}function io(i,s){return i[Ia]=s,i.prototype[Ia]=s,i}function qm(i){return i[Ia]}const ko=io(Zi("Inject",i=>({token:i})),-1),Ns=io(Zi("Optional"),8),Fo=io(Zi("SkipSelf"),4);class gc{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ii(i){return i instanceof gc?i.changingThisBreaksApplicationSecurity:i}const Ym=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Lo=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Un=(()=>((Un=Un||{})[Un.NONE=0]="NONE",Un[Un.HTML=1]="HTML",Un[Un.STYLE=2]="STYLE",Un[Un.SCRIPT=3]="SCRIPT",Un[Un.URL=4]="URL",Un[Un.RESOURCE_URL=5]="RESOURCE_URL",Un))();function Vo(i){const s=function Oa(){const i=Me();return i&&i[12]}();return s?s.sanitize(Un.URL,i)||"":function ks(i,s){const a=function ku(i){return i instanceof gc&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Ii(i):function Fu(i){return(i=String(i)).match(Ym)||i.match(Lo)?i:"unsafe:"+i}(he(i))}const Dc="__ngContext__";function hr(i,s){i[Dc]=s}function oh(i){const s=function Pa(i){return i[Dc]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Tc(i){return i.ngOriginalError}function ay(i,...s){i.error(...s)}class Ac{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function oy(i){return i&&i.ngErrorLogger||ay}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Tc(s);for(;a&&Tc(a);)a=Tc(a);return a||null}}const dh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ot))();function y(i){return i instanceof Function?i():i}var S=(()=>((S=S||{})[S.Important=1]="Important",S[S.DashCase=2]="DashCase",S))();function ye(i,s){return undefined(i,s)}function mt(i){const s=i[3];return ai(s)?s[3]:s}function di(i){return hh(i[13])}function ka(i){return hh(i[4])}function hh(i){for(;null!==i&&!ai(i);)i=i[4];return i}function Ho(i,s,a,l,c){if(null!=l){let p,v=!1;ai(l)?p=l:lr(l)&&(v=!0,l=l[0]);const E=Kt(l);0===i&&null!==a?null==c?b0(s,a,E):Ua(s,a,E,c||null,!0):1===i&&null!==a?Ua(s,a,E,c||null,!0):2===i?function x0(i,s,a){const l=Mp(i,s);l&&function C0(i,s,a,l){gn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,v):3===i&&s.destroyNode(E),null!=p&&function ao(i,s,a,l,c){const p=a[7];p!==Kt(a)&&Ho(s,i,l,p,c);for(let E=10;E<a.length;E++){const I=a[E];mh(I[1],I,i,s,l,p)}}(s,i,p,a,c)}}function Sr(i,s,a){if(gn(i))return i.createElement(s,a);{const l=null!==a?function mu(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function E0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,_n(c,-1)),a.splice(l,1)}function Ap(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&E0(c,l),s>0&&(i[a-1][4]=l[4]);const p=Jl(i,10+s);!function fh(i,s){mh(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const v=p[19];null!==v&&v.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function w0(i,s){if(!(256&s[2])){const a=s[11];gn(a)&&a.destroyNode&&mh(i,s,a,3,null,null),function Fa(i){let s=i[13];if(!s)return Sp(i[1],i);for(;s;){let a=null;if(lr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)lr(s)&&Sp(s[1],s),s=s[3];null===s&&(s=i),lr(s)&&Sp(s[1],s),a=s&&s[4]}s=a}}(s)}}function Sp(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function cy(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof da)){const p=a[l+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const E=c[p[v]],I=p[v+1];try{I.call(E)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function I0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+1],E="function"==typeof v?v(s):Kt(s[v]),I=l[c=a[p+2]],C=a[p+3];"boolean"==typeof C?E.removeEventListener(a[p],I,C):C>=0?l[c=C]():l[c=-C].unsubscribe(),p+=2}else{const v=l[c=a[p+1]];a[p].call(v)}if(null!==l){for(let p=c+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&gn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&ai(s[3])){a!==s[3]&&E0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function ub(i,s,a){return function Va(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Vt.None||c===Vt.Emulated)return null}return Vr(l,a)}(i,s.parent,a)}function Ua(i,s,a,l,c){gn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function b0(i,s,a){gn(i)?i.appendChild(s,a):s.appendChild(a)}function D0(i,s,a,l,c){null!==l?Ua(i,s,a,l,c):b0(i,s,a)}function Mp(i,s){return gn(i)?i.parentNode(s):s.parentNode}let A0=function dy(i,s,a){return 40&i.type?Vr(i,a):null};function Mc(i,s,a,l){const c=ub(i,l,s),p=s[11],E=function T0(i,s,a){return A0(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)D0(p,c,a[I],E,!1);else D0(p,c,a,E,!1)}function xp(i,s){if(null!==s){const a=s.type;if(3&a)return Vr(s,i);if(4&a)return Rp(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return xp(i,l);{const c=i[s.index];return ai(c)?Rp(-1,c):Kt(c)}}if(32&a)return ye(s,i)()||Kt(i[s.index]);{const l=M0(i,s);return null!==l?Array.isArray(l)?l[0]:xp(mt(i[16]),l):xp(i,s.next)}}return null}function M0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Rp(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return xp(l,c)}return s[7]}function R0(i,s,a,l,c,p,v){for(;null!=a;){const E=l[a.index],I=a.type;if(v&&0===s&&(E&&hr(Kt(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)R0(i,s,a.child,l,c,p,!1),Ho(s,i,c,E,p);else if(32&I){const C=ye(a,l);let T;for(;T=C();)Ho(s,i,c,T,p);Ho(s,i,c,E,p)}else 16&I?Ba(i,s,l,a,c,p):Ho(s,i,c,E,p);a=v?a.projectionNext:a.next}}function mh(i,s,a,l,c,p){R0(a,l,i.firstChild,s,c,p,!1)}function Ba(i,s,a,l,c,p){const v=a[16],I=v[6].projection[l.projection];if(Array.isArray(I))for(let C=0;C<I.length;C++)Ho(s,i,c,I[C],p);else R0(i,s,I,v[3],c,p,!0)}function fy(i,s,a){gn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function py(i,s,a){gn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function O0(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===l||i.charCodeAt(c+p)<=32)return c}a=c+1}}const xc="ng-template";function ja(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==O0(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function gy(i){return 4===i.type&&i.value!==xc}function hi(i,s,a){return s===(4!==i.type||a?i.value:xc)}function Ha(i,s,a){let l=4;const c=i.attrs||[],p=function k0(i){for(let s=0;s<i.length;s++)if(Wi(i[s]))return s;return i.length}(c);let v=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!v)if(4&l){if(l=2|1&l,""!==I&&!hi(i,I,a)||""===I&&1===s.length){if(Ls(l))return!1;v=!0}}else{const C=8&l?I:s[++E];if(8&l&&null!==i.attrs){if(!ja(i.attrs,C,a)){if(Ls(l))return!1;v=!0}continue}const O=Np(8&l?"class":I,c,gy(i),a);if(-1===O){if(Ls(l))return!1;v=!0;continue}if(""!==C){let H;H=O>p?"":c[O+1].toLowerCase();const Q=8&l?H:null;if(Q&&-1!==O0(Q,C,0)||2&l&&C!==H){if(Ls(l))return!1;v=!0}}}}else{if(!v&&!Ls(l)&&!Ls(I))return!1;if(v&&Ls(I))continue;v=!1,l=I|1&l}}return Ls(l)||v}function Ls(i){return 0==(1&i)}function Np(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let p=!1;for(;c<s.length;){const v=s[c];if(v===i)return c;if(3===v||6===v)p=!0;else{if(1===v||2===v){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===v)break;if(0===v){c+=4;continue}}c+=p?1:2}return-1}return function F0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function my(i,s,a=!1){for(let l=0;l<s.length;l++)if(Ha(i,s[l],a))return!0;return!1}function yy(i,s){return i?":not("+s.trim()+")":s}function V0(i){let s=i[0],a=1,l=2,c="",p=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&l){const E=i[++a];c+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+v:4&l&&(c+=" "+v);else""!==c&&!Ls(v)&&(s+=yy(p,c),c=""),l=v,p=p||!Ls(l);a++}return""!==c&&(s+=yy(p,c)),s}const Rt={};function vy(i){_y(kt(),Me(),Cr()+i,!1)}function _y(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&Ms(s,p,a)}else{const p=i.preOrderHooks;null!==p&&ca(s,p,0,a)}Qs(a)}function Pp(i,s){return i<<17|s<<2}function vs(i){return i>>17&32767}function kp(i){return 2|i}function Vs(i){return(131068&i)>>2}function Fp(i,s){return-131069&i|s<<2}function Lp(i){return 1|i}function mb(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],p=a[l+1];if(-1!==p){const v=i.data[p];zf(c),v.contentQueries(2,s[p],p)}}}function Rc(i,s,a,l,c,p,v,E,I,C){const T=s.blueprint.slice();return T[0]=c,T[2]=140|l,_t(T),T[3]=T[15]=i,T[8]=a,T[10]=v||i&&i[10],T[11]=E||i&&i[11],T[12]=I||i&&i[12]||null,T[9]=C||i&&i[9]||null,T[6]=p,T[16]=2==s.type?i[16]:T,T}function $a(i,s,a,l,c){let p=i.data[s];if(null===p)p=function Ih(i,s,a,l,c){const p=$l(),v=kd(),I=i.data[s]=function W0(i,s,a,l,c,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==p&&(v?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,s,a,l,c),function Vd(){return it.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=c;const v=function aa(){const i=it.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return Ri(p,!0),p}function bh(i,s,a,l){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function zu(i,s,a){ua(s);try{const l=i.viewQuery;null!==l&&Sh(1,l,a);const c=i.template;null!==c&&Wu(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&mb(i,s),i.staticViewQueries&&Sh(2,i.viewQuery,a);const p=i.components;null!==p&&function yb(i,s){for(let a=0;a<s.length;a++)Tb(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,zi()}}function lo(i,s,a,l){const c=s[2];if(256!=(256&c)){ua(s);try{_t(s),function $f(i){return it.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Wu(i,s,a,2,l);const v=3==(3&c);if(v){const C=i.preOrderCheckHooks;null!==C&&Ms(s,C,null)}else{const C=i.preOrderHooks;null!==C&&ca(s,C,0,null),Kf(s,0)}if(function nE(i){for(let s=di(i);null!==s;s=ka(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],p=c[3];0==(1024&c[2])&&_n(p,1),c[2]|=1024}}}(s),function Db(i){for(let s=di(i);null!==s;s=ka(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];ue(l)&&lo(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&mb(i,s),v){const C=i.contentCheckHooks;null!==C&&Ms(s,C)}else{const C=i.contentHooks;null!==C&&ca(s,C,1),Kf(s,1)}!function G0(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Qs(~c);else{const p=c,v=a[++l],E=a[++l];Ud(v,p),E(2,s[p])}}}finally{Qs(-1)}}(i,s);const E=i.components;null!==E&&function Py(i,s){for(let a=0;a<s.length;a++)Cb(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&Sh(2,I,l),v){const C=i.viewCheckHooks;null!==C&&Ms(s,C)}else{const C=i.viewHooks;null!==C&&ca(s,C,2),Kf(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,_n(s[3],-1))}finally{zi()}}}function jp(i,s,a,l){const c=s[10],v=W(s);try{!v&&c.begin&&c.begin(),v&&zu(i,s,l),lo(i,s,a,l)}finally{!v&&c.end&&c.end()}}function Wu(i,s,a,l,c){const p=Cr(),v=2&l;try{Qs(-1),v&&s.length>20&&_y(i,s,20,!1),a(l,c)}finally{Qs(p)}}function ky(i,s,a){!Do()||(function Eb(i,s,a,l){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Js(a,s),hr(l,s);const v=a.initialInputs;for(let E=c;E<p;E++){const I=i.data[E],C=wi(I);C&&xA(s,a,I);const T=ps(s,i,E,a);hr(T,s),null!==v&&tE(0,E-c,T,I,0,v),C&&(R(a.index,s)[8]=T)}}(i,s,a,Vr(a,s)),128==(128&a.flags)&&function Q0(i,s,a){const l=a.directiveStart,c=a.directiveEnd,v=a.index,E=function Lm(){return it.lFrame.currentDirectiveIndex}();try{Qs(v);for(let I=l;I<c;I++){const C=i.data[I],T=s[I];_u(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&J0(C,T)}}finally{Qs(-1),_u(E)}}(i,s,a))}function Dh(i,s,a=Vr){const l=s.localNames;if(null!==l){let c=s.index+1;for(let p=0;p<l.length;p+=2){const v=l[p+1],E=-1===v?a(s,i):i[v];i[c++]=E}}}function Fy(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Oc(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Oc(i,s,a,l,c,p,v,E,I,C){const T=20+l,O=T+c,H=function q0(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Rt);return a}(T,O),Q="function"==typeof C?C():C;return H[1]={type:i,blueprint:H,template:a,queries:null,viewQuery:E,declTNode:s,data:H.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:Q,incompleteFirstPass:!1}}function Ly(i,s,a,l){const c=qy(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&sE(i).push(l,c.length-1))}function Vy(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function bi(i,s,a,l,c,p,v,E){const I=Vr(s,a);let T,C=s.inputs;!E&&null!=C&&(T=C[l])?(oE(i,a,T,l,c),du(s)&&function Hp(i,s){const a=R(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function Uy(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=v?v(c,s.value||"",l):c,gn(p)?p.setProperty(I,l,c):Wn(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}function Y0(i,s,a,l){let c=!1;if(Do()){const p=function X0(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const v=l[p];my(a,v.selectors,!1)&&(c||(c=[]),ga(Js(a,s),i,v.type),wi(v)?(By(i,a),c.unshift(v)):c.push(v))}return c}(i,s,a),v=null===l?null:{"":-1};if(null!==p){c=!0,qp(a,i.data.length,p.length);for(let T=0;T<p.length;T++){const O=p[T];O.providersResolver&&O.providersResolver(O)}let E=!1,I=!1,C=bh(i,s,p.length,null);for(let T=0;T<p.length;T++){const O=p[T];a.mergedAttrs=Wl(a.mergedAttrs,O.hostAttrs),eE(i,a,s,C,O),wb(C,O,v),null!==O.contentQueries&&(a.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(a.flags|=128);const H=O.type.prototype;!E&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(H.ngOnChanges||H.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),C++}!function Z0(i,s){const l=s.directiveEnd,c=i.data,p=s.attrs,v=[];let E=null,I=null;for(let C=s.directiveStart;C<l;C++){const T=c[C],O=T.inputs,H=null===p||gy(s)?null:Ib(O,p);v.push(H),E=Vy(O,C,E),I=Vy(T.outputs,C,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=v,s.inputs=E,s.outputs=I}(i,a)}v&&function jy(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new ke(-301,!1);l.push(s[c],p)}}}(a,l,v)}return a.mergedAttrs=Wl(a.mergedAttrs,a.attrs),c}function _b(i,s,a,l,c,p){const v=p.hostBindings;if(v){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function MA(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,c,v)}}function J0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function By(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function wb(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;wi(s)&&(a[""]=i)}}function qp(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function eE(i,s,a,l,c){i.data[l]=c;const p=c.factory||(c.factory=Lr(c.type)),v=new da(p,wi(c),null);i.blueprint[l]=v,a[l]=v,_b(i,s,0,l,bh(i,a,c.hostVars,Rt),c)}function xA(i,s,a){const l=Vr(s,i),c=Fy(a),p=i[10],v=Wp(i,Rc(i,c,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=v}function Bs(i,s,a,l,c,p){const v=Vr(i,s);!function Hy(i,s,a,l,c,p,v){if(null==p)gn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==v?he(p):v(p,l||"",c);gn(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],v,p,i.value,a,l,c)}function tE(i,s,a,l,c,p){const v=p[s];if(null!==v){const E=l.setInput;for(let I=0;I<v.length;){const C=v[I++],T=v[I++],O=v[I++];null!==E?l.setInput(a,O,C,T):a[T]=O}}}function Ib(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function zp(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Cb(i,s){const a=R(s,i);if(ue(a)){const l=a[1];80&a[2]?lo(l,a,l.template,a[8]):a[5]>0&&Zu(a)}}function Zu(i){for(let l=di(i);null!==l;l=ka(l))for(let c=10;c<l.length;c++){const p=l[c];if(1024&p[2]){const v=p[1];lo(v,p,v.template,p[8])}else p[5]>0&&Zu(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=R(a[l],i);ue(c)&&c[5]>0&&Zu(c)}}function Tb(i,s){const a=R(s,i),l=a[1];(function $y(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),zu(l,a,a[8])}function Wp(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Ah(i){for(;i;){i[2]|=64;const s=mt(i);if(hu(i)&&!s)return i;i=s}return null}function iE(i){!function Gy(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=oh(a),c=l[1];jp(c,l,c.template,a)}}(i[8])}function Sh(i,s,a){zf(0),s(i,a)}const Sb=(()=>Promise.resolve(null))();function qy(i){return i[7]||(i[7]=[])}function sE(i){return i.cleanup||(i.cleanup=[])}function Zp(i,s){const a=i[9],l=a?a.get(Ac,null):null;l&&l.handleError(s)}function oE(i,s,a,l,c){for(let p=0;p<a.length;){const v=a[p++],E=a[p++],I=s[v],C=i.data[v];null!==C.setInput?C.setInput(I,c,l,E):I[E]=c}}function co(i,s,a){const l=Cs(s,i);!function Sc(i,s,a){gn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function Kp(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let v=0;v<s.length;v++){const E=s[v];"number"==typeof E?p=E:1==p?c=de(c,E):2==p&&(l=de(l,E+": "+s[++v]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Yp=new On("INJECTOR",-1);class uE{get(s,a=ro){if(a===ro){const l=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw l.name="NullInjectorError",l}return a}}const Qp=new On("Set Injector scope."),Mh={},xb={};let Yu;function zy(){return void 0===Yu&&(Yu=new uE),Yu}function lE(i,s=null,a=null,l){const c=Wy(i,s,a,l);return c._resolveInjectorDefTypes(),c}function Wy(i,s=null,a=null,l){return new Rb(i,a,s||zy(),l)}class Rb{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&li(a,E=>this.processProvider(E,s,a)),li([s],E=>this.processInjectorType(E,[],p)),this.records.set(Yp,Qu(void 0,this));const v=this.records.get(Qp);this.scope=null!=v?v.value:null,this.source=c||("object"==typeof s?null:ce(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=ro,l=ft.Default){this.assertNotDestroyed();const c=Ht(this),p=vn(void 0);try{if(!(l&ft.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function fE(i){return"function"==typeof i||"object"==typeof i&&i instanceof On}(s)&&Tt(s);E=I&&this.injectableDefInScope(I)?Qu(Jp(s),Mh):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&ft.Self?zy():this.parent).get(s,a=l&ft.Optional&&a===ro?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[ba]=v[ba]||[]).unshift(ce(s)),c)throw v;return function Da(i,s,a,l){const c=i[ba];throw s[ic]&&c.unshift(s[ic]),i.message=function so(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ce(s);if(Array.isArray(s))c=s.map(ce).join(" -> ");else if("object"==typeof s){let p=[];for(let v in s)if(s.hasOwnProperty(v)){let E=s[v];p.push(v+":"+("string"==typeof E?JSON.stringify(E):ce(E)))}c=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(zd,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[ba]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{vn(p),Ht(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(ce(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processInjectorType(s,a,l){if(!(s=te(s)))return!1;let c=ln(s);const p=null==c&&s.ngModule||void 0,v=void 0===p?s:p,E=-1!==l.indexOf(v);if(void 0!==p&&(c=ln(p)),null==c)return!1;if(null!=c.imports&&!E){let T;l.push(v);try{li(c.imports,O=>{this.processInjectorType(O,a,l)&&(void 0===T&&(T=[]),T.push(O))})}finally{}if(void 0!==T)for(let O=0;O<T.length;O++){const{ngModule:H,providers:Q}=T[O];li(Q,_e=>this.processProvider(_e,H,Q||k))}}this.injectorDefTypes.add(v);const I=Lr(v)||(()=>new v);this.records.set(v,Qu(I,Mh));const C=c.providers;if(null!=C&&!E){const T=s;li(C,O=>this.processProvider(O,T,C))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let c=Ju(s=te(s))?s:te(s&&s.provide);const p=function cE(i,s,a){return Ob(i)?Qu(void 0,i.useValue):Qu(dE(i),Mh)}(s);if(Ju(s)||!0!==s.multi)this.records.get(c);else{let v=this.records.get(c);v||(v=Qu(void 0,Mh,!0),v.factory=()=>oc(v.multi),this.records.set(c,v)),c=s,v.multi.push(s)}this.records.set(c,p)}hydrate(s,a){return a.value===Mh&&(a.value=xb,a.value=a.factory()),"object"==typeof a.value&&a.value&&function kb(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=te(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Jp(i){const s=Tt(i),a=null!==s?s.factory:Lr(i);if(null!==a)return a;if(i instanceof On)throw new ke(204,!1);if(i instanceof Function)return function Nb(i){const s=i.length;if(s>0)throw function Oo(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new ke(204,!1);const a=function vi(i){const s=i&&(i[Xn]||i[ar]);if(s){const a=function Ln(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ke(204,!1)}function dE(i,s,a){let l;if(Ju(i)){const c=te(i);return Lr(c)||Jp(c)}if(Ob(i))l=()=>te(i.useValue);else if(function kA(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...oc(i.deps||[]));else if(function PA(i){return!(!i||!i.useExisting)}(i))l=()=>Ar(te(i.useExisting));else{const c=te(i&&(i.useClass||i.provide));if(!function hE(i){return!!i.deps}(i))return Lr(c)||Jp(c);l=()=>new c(...oc(i.deps))}return l}function Qu(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Ob(i){return null!==i&&"object"==typeof i&&sc in i}function Ju(i){return"function"==typeof i}let Go=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return lE({name:""},l,a,"");{const p=null!==(c=a.name)&&void 0!==c?c:"";return lE({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=ro,i.NULL=new uE,i.\u0275prov=$t({token:i,providedIn:"any",factory:()=>Ar(Yp)}),i.__NG_ELEMENT_ID__=-1,i})();function vE(i,s){Eu(oh(i)[1],Vn())}function EE(i){let s=function _E(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(wi(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new ke(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const v=i;v.inputs=wE(i.inputs),v.declaredInputs=wE(i.declaredInputs),v.outputs=wE(i.outputs);const E=c.hostBindings;E&&jA(i,E);const I=c.viewQuery,C=c.contentQueries;if(I&&UA(i,I),C&&BA(i,C),oe(i.inputs,c.inputs),oe(i.declaredInputs,c.declaredInputs),oe(i.outputs,c.outputs),wi(c)&&c.data.animation){const T=i.data;T.animation=(T.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let v=0;v<p.length;v++){const E=p[v];E&&E.ngInherit&&E(i),E===EE&&(a=!1)}}s=Object.getPrototypeOf(s)}!function VA(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=Wl(c.hostAttrs,a=Wl(a,c.hostAttrs))}}(l)}function wE(i){return i===Tn?{}:i===k?[]:i}function UA(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function BA(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,p)=>{s(l,c,p),a(l,c,p)}:s}function jA(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let tg=null;function Xu(){if(!tg){const i=Ot.Symbol;if(i&&i.iterator)tg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(tg=l)}}}return tg}function el(i){return!!xh(i)&&(Array.isArray(i)||!(i instanceof Map)&&Xu()in i)}function xh(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Di(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function bE(i,s,a,l){const c=Me();return Di(c,Ys(),s)&&(kt(),Bs(zn(),c,i,s,a,l)),bE}function Fc(i,s,a,l){return Di(i,Ys(),a)?s+he(a)+l:Rt}function Oh(i,s,a,l,c,p,v,E){const I=Me(),C=kt(),T=i+20,O=C.firstCreatePass?function Nt(i,s,a,l,c,p,v,E,I){const C=s.consts,T=$a(s,i,4,v||null,ze(C,E));Y0(s,a,T,ze(C,I)),Eu(s,T);const O=T.tViews=Oc(2,T,l,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,T),O.queries=s.queries.embeddedTView(T)),T}(T,C,I,s,a,l,c,p,v):C.data[T];Ri(O,!1);const H=I[11].createComment("");Mc(C,I,H,O),hr(H,I),Wp(I,I[T]=zp(H,I,H,O)),$i(O)&&ky(C,I,O),null!=v&&Dh(I,O,E)}function il(i,s=ft.Default){const a=Me();return null===a?Ar(i,s):Iu(Vn(),a,te(i),s)}function fv(){throw new Error("invalid")}function pv(i,s,a){const l=Me();return Di(l,Ys(),s)&&bi(kt(),zn(),l,i,s,l[11],a,!1),pv}function gv(i,s,a,l,c){const v=c?"class":"style";oE(i,a,s.inputs[v],v,l)}function za(i,s,a,l){const c=Me(),p=kt(),v=20+i,E=c[11],I=c[v]=Sr(E,s,function o0(){return it.lFrame.currentNamespace}()),C=p.firstCreatePass?function fi(i,s,a,l,c,p,v){const E=s.consts,C=$a(s,i,2,c,ze(E,p));return Y0(s,a,C,ze(E,v)),null!==C.attrs&&Kp(C,C.attrs,!1),null!==C.mergedAttrs&&Kp(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(v,p,c,0,s,a,l):p.data[v];Ri(C,!0);const T=C.mergedAttrs;null!==T&&Qr(E,I,T);const O=C.classes;null!==O&&py(E,I,O);const H=C.styles;return null!==H&&fy(E,I,H),64!=(64&C.flags)&&Mc(p,c,I,C),0===function xt(){return it.lFrame.elementDepthCount}()&&hr(I,c),function Ts(){it.lFrame.elementDepthCount++}(),$i(C)&&(ky(p,c,C),function Nc(i,s,a){if(Ds(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const v=i.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}(p,C,c)),null!==l&&Dh(c,C),za}function lg(){let i=Vn();kd()?function Fd(){it.lFrame.isParent=!1}():(i=i.parent,Ri(i,!1));const s=i;!function xi(){it.lFrame.elementDepthCount--}();const a=kt();return a.firstCreatePass&&(Eu(a,i),Ds(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function l0(i){return 0!=(16&i.flags)}(s)&&gv(a,s,Me(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Rn(i){return 0!=(32&i.flags)}(s)&&gv(a,s,Me(),s.stylesWithoutHost,!1),lg}function sl(i,s,a,l){return za(i,s,a,l),lg(),sl}function dg(){return Me()}function Uh(i){return!!i&&"function"==typeof i.then}function hg(i){return!!i&&"function"==typeof i.subscribe}const mv=hg;function fg(i,s,a,l){const c=Me(),p=kt(),v=Vn();return function yv(i,s,a,l,c,p,v,E){const I=$i(l),T=i.firstCreatePass&&sE(i),O=s[8],H=qy(s);let Q=!0;if(3&l.type||E){const Je=Vr(l,s),ut=E?E(Je):Je,Ne=H.length,yt=E?zt=>E(Kt(zt[l.index])):l.index;if(gn(a)){let zt=null;if(!E&&I&&(zt=function PE(i,s,a,l){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const v=c[p];if(v===a&&c[p+1]===l){const E=s[7],I=c[p+2];return E.length>I?E[I]:null}"string"==typeof v&&(p+=2)}return null}(i,s,c,l.index)),null!==zt)(zt.__ngLastListenerFn__||zt).__ngNextListenerFn__=p,zt.__ngLastListenerFn__=p,Q=!1;else{p=gg(l,s,O,p,!1);const tn=a.listen(ut,c,p);H.push(p,tn),T&&T.push(c,yt,Ne,Ne+1)}}else p=gg(l,s,O,p,!0),ut.addEventListener(c,p,v),H.push(p),T&&T.push(c,yt,Ne,v)}else p=gg(l,s,O,p,!1);const _e=l.outputs;let Ge;if(Q&&null!==_e&&(Ge=_e[c])){const Je=Ge.length;if(Je)for(let ut=0;ut<Je;ut+=2){const gi=s[Ge[ut]][Ge[ut+1]].subscribe(p),ta=H.length;H.push(p,gi),T&&T.push(c,l.index,ta,-(ta+1))}}}(p,c,c[11],v,i,s,!!a,l),fg}function pg(i,s,a,l){try{return!1!==a(l)}catch(c){return Zp(i,c),!1}}function gg(i,s,a,l,c){return function p(v){if(v===Function)return l;const E=2&i.flags?R(i.index,s):s;0==(32&s[2])&&Ah(E);let I=pg(s,0,l,v),C=p.__ngNextListenerFn__;for(;C;)I=pg(s,0,C,v)&&I,C=C.__ngNextListenerFn__;return c&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function kE(i=1){return function Um(i){return(it.lFrame.contextLView=function Bm(i,s){for(;i>0;)s=s[15],i--;return s}(i,it.lFrame.contextLView))[8]}(i)}function gr(i,s,a){return xr(i,"",s,"",a),gr}function xr(i,s,a,l,c){const p=Me(),v=Fc(p,s,a,l);return v!==Rt&&bi(kt(),zn(),p,i,v,p[11],c,!1),xr}function bv(i,s,a,l,c){const p=i[a+1],v=null===s;let E=l?vs(p):Vs(p),I=!1;for(;0!==E&&(!1===I||v);){const T=i[E+1];nD(i[E],s)&&(I=!0,i[E+1]=l?Lp(T):kp(T)),E=l?vs(T):Vs(T)}I&&(i[a+1]=l?kp(p):Lp(p))}function nD(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&wa(i,s)>=0}function Eg(i,s){return function An(i,s,a,l){const c=Me(),p=kt(),v=function Ss(i){const s=it.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);p.firstUpdatePass&&function $h(i,s,a,l){const c=i.data;if(null===c[a+1]){const p=c[Cr()],v=function $c(i,s){return s>=i.expandoStartIndex}(i,a);(function Gh(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!v&&(s=!1),s=function zE(i,s,a,l){const c=function qf(i){const s=it.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=ul(a=al(null,i,s,a,l),s.attrs,l),p=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==c)if(a=al(c,i,s,a,l),null===p){let I=function Av(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Vs(l))return i[vs(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=al(null,i,s,I[1],l),I=ul(I,s.attrs,l),function WE(i,s,a,l){i[vs(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else p=function ZE(i,s,a){let l;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)l=ul(l,i[p].hostAttrs,a);return ul(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,l),function tD(i,s,a,l,c,p){let v=p?s.classBindings:s.styleBindings,E=vs(v),I=Vs(v);i[l]=a;let T,C=!1;if(Array.isArray(a)){const O=a;T=O[1],(null===T||wa(O,T)>0)&&(C=!0)}else T=a;if(c)if(0!==I){const H=vs(i[E+1]);i[l+1]=Pp(H,E),0!==H&&(i[H+1]=Fp(i[H+1],l)),i[E+1]=function Iy(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=Pp(E,0),0!==E&&(i[E+1]=Fp(i[E+1],l)),E=l;else i[l+1]=Pp(I,0),0===E?E=l:i[I+1]=Fp(i[I+1],l),I=l;C&&(i[l+1]=kp(i[l+1])),bv(i,T,l,!0),bv(i,T,l,!1),function Iv(i,s,a,l,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&wa(p,s)>=0&&(a[l+1]=Lp(a[l+1]))}(s,T,i,l,p),v=Pp(E,I),p?s.classBindings=v:s.styleBindings=v}(c,p,s,a,v,l)}}(p,i,v,l),s!==Rt&&Di(c,v,s)&&function Gc(i,s,a,l,c,p,v,E){if(!(3&s.type))return;const I=i.data,C=I[E+1];bg(function by(i){return 1==(1&i)}(C)?Mv(I,s,a,c,Vs(C),v):void 0)||(bg(p)||function wy(i){return 2==(2&i)}(C)&&(p=Mv(I,null,a,c,E,v)),function cb(i,s,a,l,c){const p=gn(i);if(s)c?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:S.DashCase;if(null==c)p?i.removeStyle(a,l,v):a.style.removeProperty(l);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),v|=S.Important),p?i.setStyle(a,l,c,v):a.style.setProperty(l,c,E?"important":"")}}}(l,v,Cs(Cr(),a),c,p))}(p,p.data[Cr()],c,c[11],i,c[v+1]=function xv(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ce(Ii(i)))),i}(s,a),l,v)}(i,s,null,!0),Eg}function al(i,s,a,l,c){let p=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(p=s[E],l=ul(l,p.hostAttrs,c),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function ul(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const v=s[p];"number"==typeof v?c=v:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Br(i,v,!!a||s[++p]))}return void 0===i?null:i}function Mv(i,s,a,l,c,p){const v=null===s;let E;for(;c>0;){const I=i[c],C=Array.isArray(I),T=C?I[1]:I,O=null===T;let H=a[c+1];H===Rt&&(H=O?k:void 0);let Q=O?Ea(H,l):T===l?H:void 0;if(C&&!bg(Q)&&(Q=Ea(I,l)),bg(Q)&&(E=Q,v))return E;const _e=i[c+1];c=v?vs(_e):Vs(_e)}if(null!==s){let I=p?s.residualClasses:s.residualStyles;null!=I&&(E=Ea(I,l))}return E}function bg(i){return void 0!==i}function Dg(i,s=""){const a=Me(),l=kt(),c=i+20,p=l.firstCreatePass?$a(l,c,1,s,null):l.data[c],v=a[c]=function qu(i,s){return gn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Mc(l,a,v,p),Ri(p,!1)}function Cg(i){return qh("",i,""),Cg}function qh(i,s,a){const l=Me(),c=Fc(l,i,s,a);return c!==Rt&&co(l,Cr(),c),qh}const Ka=void 0;var uD=["en",[["a","p"],["AM","PM"],Ka],[["AM","PM"],Ka,Ka],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ka,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ka,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ka,"{1} 'at' {0}",Ka],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Yc(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Qc={};function Vv(i){const s=function iw(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Rg(s);if(a)return a;const l=s.split("-")[0];if(a=Rg(l),a)return a;if("en"===l)return uD;throw new Error(`Missing locale data for the locale "${i}".`)}function Uv(i){return Vv(i)[wt.PluralCase]}function Rg(i){return i in Qc||(Qc[i]=Ot.ng&&Ot.ng.common&&Ot.ng.common.locales&&Ot.ng.common.locales[i]),Qc[i]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const Ng="en-US";let jv=Ng;function Qv(i,s,a,l,c){if(i=te(i),Array.isArray(i))for(let p=0;p<i.length;p++)Qv(i[p],s,a,l,c);else{const p=kt(),v=Me();let E=Ju(i)?i:te(i.provide),I=dE(i);const C=Vn(),T=1048575&C.providerIndexes,O=C.directiveStart,H=C.providerIndexes>>20;if(Ju(i)||!i.multi){const Q=new da(I,c,il),_e=Ja(E,s,c?T:T+H,O);-1===_e?(ga(Js(C,v),p,E),Ug(p,i,s.length),s.push(E),C.directiveStart++,C.directiveEnd++,c&&(C.providerIndexes+=1048576),a.push(Q),v.push(Q)):(a[_e]=Q,v[_e]=Q)}else{const Q=Ja(E,s,T+H,O),_e=Ja(E,s,T,T+H),Ge=Q>=0&&a[Q],Je=_e>=0&&a[_e];if(c&&!Je||!c&&!Ge){ga(Js(C,v),p,E);const ut=function Rw(i,s,a,l,c){const p=new da(i,a,il);return p.multi=[],p.index=s,p.componentProviders=0,Ft(p,c,l&&!a),p}(c?sr:xw,a.length,c,l,I);!c&&Je&&(a[_e].providerFactory=ut),Ug(p,i,s.length,0),s.push(E),C.directiveStart++,C.directiveEnd++,c&&(C.providerIndexes+=1048576),a.push(ut),v.push(ut)}else Ug(p,i,Q>-1?Q:_e,Ft(a[c?_e:Q],I,!c&&l));!c&&l&&Je&&a[_e].componentProviders++}}}function Ug(i,s,a,l){const c=Ju(s),p=function Pb(i){return!!i.useClass}(s);if(c||p){const I=(p?te(s.useClass):s).prototype.ngOnDestroy;if(I){const C=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const T=C.indexOf(a);-1===T?C.push(a,[l,I]):C[T+1].push(l,I)}else C.push(a,I)}}}function Ft(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Ja(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function xw(i,s,a,l){return bt(this.multi,[])}function sr(i,s,a,l){const c=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=ps(a,a[1],this.providerFactory.index,l);p=E.slice(0,v),bt(c,p);for(let I=v;I<E.length;I++)p.push(E[I])}else p=[],bt(c,p);return p}function bt(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Xa(i,s=[]){return a=>{a.providersResolver=(l,c)=>function es(i,s,a){const l=kt();if(l.firstCreatePass){const c=wi(i);Qv(a,l.data,l.blueprint,c,!0),Qv(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class rd{}class id{resolveComponentFactory(s){throw function Xt(i){const s=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Bg=(()=>{class i{}return i.NULL=new id,i})();function Nr(){return sd(Vn(),Me())}function sd(i,s){return new Es(Vr(i,s))}let Es=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Nr,i})();function Yn(i){return i instanceof Es?i.nativeElement:i}class jg{}let Pw=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function TD(){const i=Me(),a=R(Vn().index,i);return function Xh(i){return i[11]}(lr(a)?a:i)}(),i})(),Jo=(()=>{class i{}return i.\u0275prov=$t({token:i,providedIn:"root",factory:()=>null}),i})();class ad{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const ud=new ad("13.3.8"),Hg={};function Qe(i,s,a,l,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(Kt(p)),ai(p))for(let E=10;E<p.length;E++){const I=p[E],C=I[1].firstChild;null!==C&&Qe(I[1],I,C,l)}const v=a.type;if(8&v)Qe(i,s,a.child,l);else if(32&v){const E=ye(a,s);let I;for(;I=E();)l.push(I)}else if(16&v){const E=M0(s,a);if(Array.isArray(E))l.push(...E);else{const I=mt(s[16]);Qe(I[1],I,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class ws{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Qe(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ai(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Ap(s,l),Jl(a,l))}this._attachedToViewContainer=!1}w0(this._lView[1],this._lView)}onDestroy(s){Ly(this._lView[1],this._lView,null,s)}markForCheck(){Ah(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Pc(i,s,a){const l=s[10];l.begin&&l.begin();try{lo(i,s,i.template,a)}catch(c){throw Zp(s,c),c}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function gh(i,s){mh(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new ke(902,"");this._appRef=s}}class $g extends ws{constructor(s){super(s),this._view=s}detectChanges(){iE(this._view)}checkNoChanges(){}get context(){return null}}class eu extends Bg{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=on(s);return new Gg(a,this.ngModule)}}function $s(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Gg extends rd{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function U0(i){return i.map(V0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return $s(this.componentDef.inputs)}get outputs(){return $s(this.componentDef.outputs)}create(s,a,l,c){const p=(c=c||this.ngModule)?function tu(i,s){return{get:(a,l,c)=>{const p=i.get(a,Hg,c);return p!==Hg||l===Hg?p:s.get(a,l,c)}}}(s,c.injector):s,v=p.get(jg,Mi),E=p.get(Jo,null),I=v.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",T=l?function Th(i,s,a){if(gn(i))return i.selectRootElement(s,a===Vt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):Sr(v.createRenderer(null,this.componentDef),C,function ef(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(C)),O=this.componentDef.onPush?576:528,H=function ev(i,s){return{components:[],scheduler:i||dh,clean:Sb,playerHandler:s||null,flags:0}}(),Q=Oc(0,null,null,1,0,null,null,null,null,null),_e=Rc(null,Q,H,O,null,null,v,I,E,p);let Ge,Je;ua(_e);try{const ut=function Xy(i,s,a,l,c,p){const v=a[1];a[20]=i;const I=$a(v,20,2,"#host",null),C=I.mergedAttrs=s.hostAttrs;null!==C&&(Kp(I,C,!0),null!==i&&(Qr(c,i,C),null!==I.classes&&py(c,i,I.classes),null!==I.styles&&fy(c,i,I.styles)));const T=l.createRenderer(i,s),O=Rc(a,Fy(s),null,s.onPush?64:16,a[20],I,l,T,p||null,null);return v.firstCreatePass&&(ga(Js(I,a),v,s.type),By(v,I),qp(I,a.length,1)),Wp(a,O),a[20]=O}(T,this.componentDef,_e,v,I);if(T)if(l)Qr(I,T,["ng-version",ud.full]);else{const{attrs:Ne,classes:yt}=function Op(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++l]):8===c&&a.push(p);else{if(!Ls(c))break;c=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ne&&Qr(I,T,Ne),yt&&yt.length>0&&py(I,T,yt.join(" "))}if(Je=bo(Q,20),void 0!==a){const Ne=Je.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const zt=a[yt];Ne.push(null!=zt?Array.from(zt):null)}}Ge=function eg(i,s,a,l,c){const p=a[1],v=function SA(i,s,a){const l=Vn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),eE(i,l,s,bh(i,s,1,null),a));const c=ps(s,i,l.directiveStart,l);hr(c,s);const p=Vr(l,s);return p&&hr(p,s),c}(p,a,s);if(l.components.push(v),i[8]=v,c&&c.forEach(I=>I(v,s)),s.contentQueries){const I=Vn();s.contentQueries(1,v,I.directiveStart)}const E=Vn();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Qs(E.index),_b(a[1],E,0,E.directiveStart,E.directiveEnd,s),J0(s,v)),v}(ut,this.componentDef,_e,H,[vE]),zu(Q,_e,null)}finally{zi()}return new gl(this.componentType,Ge,sd(Je,_e),_e,Je)}}class gl extends class Nw{}{constructor(s,a,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new $g(c),this.componentType=s}get injector(){return new ya(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class mo{}class Xv{}const ml=new Map;class t_ extends mo{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new eu(this);const l=bn(s);this._bootstrapComponents=y(l.bootstrap),this._r3Injector=Wy(s,a,[{provide:mo,useValue:this},{provide:Bg,useValue:this.componentFactoryResolver}],ce(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Go.THROW_IF_NOT_FOUND,l=ft.Default){return s===Go||s===mo||s===Yp?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class qr extends Xv{constructor(s){super(),this.moduleType=s,null!==bn(s)&&function Fw(i){const s=new Set;!function a(l){const c=bn(l,!0),p=c.id;null!==p&&(function cd(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ce(s)} vs ${ce(s.name)}`)}(p,ml.get(p),l),ml.set(p,l));const v=y(c.imports);for(const E of v)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new t_(this.moduleType,s)}}function Zg(i){return s=>{setTimeout(i,void 0,s)}}const Dn=class jw extends h.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,p,v;let E=s,I=a||(()=>null),C=l;if(s&&"object"==typeof s){const O=s;E=null===(c=O.next)||void 0===c?void 0:c.bind(O),I=null===(p=O.error)||void 0===p?void 0:p.bind(O),C=null===(v=O.complete)||void 0===v?void 0:v.bind(O)}this.__isAsync&&(I=Zg(I),E&&(E=Zg(E)),C&&(C=Zg(C)));const T=super.subscribe({next:E,error:I,complete:C});return s instanceof Y.w0&&s.add(T),T}};function RD(){return this._results[Xu()]()}class i_{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Xu(),l=i_.prototype;l[a]||(l[a]=RD)}get changes(){return this._changes||(this._changes=new Dn)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=ui(s);(this._changesDetected=!function $m(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],p=s[l];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let sf=(()=>{class i{}return i.__NG_ELEMENT_ID__=OD,i})();const Hw=sf,ND=class extends Hw{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Rc(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),zu(a,l,s),new ws(l)}};function OD(){return Kg(Vn(),Me())}function Kg(i,s){return 4&i.type?new ND(s,i,sd(i,s)):null}let Yg=(()=>{class i{}return i.__NG_ELEMENT_ID__=ru,i})();function ru(){return yo(Vn(),Me())}const fd=Yg,$w=class extends fd{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return sd(this._hostTNode,this._hostLView)}get injector(){return new ya(this._hostTNode,this._hostLView)}get parentInjector(){const s=Xs(this._hostTNode,this._hostLView);if(ha(s)){const a=pa(s,this._hostLView),l=fa(s);return new ya(a[1].data[l+8],a)}return new ya(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=s_(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,p){const v=s&&!function Au(i){return"function"==typeof i}(s);let E;if(v)E=a;else{const O=a||{};E=O.index,l=O.injector,c=O.projectableNodes,p=O.ngModuleRef}const I=v?s:new Gg(on(s)),C=l||this.parentInjector;if(!p&&null==I.ngModule){const H=(v?C:this.parentInjector).get(mo,null);H&&(p=H)}const T=I.create(C,c,void 0,p);return this.insert(T.hostView,E),T}insert(s,a){const l=s._lView,c=l[1];if(function je(i){return ai(i[3])}(l)){const T=this.indexOf(s);if(-1!==T)this.detach(T);else{const O=l[3],H=new $w(O,O[6],O[3]);H.detach(H.indexOf(s))}}const p=this._adjustIndex(a),v=this._lContainer;!function La(i,s,a,l){const c=10+l,p=a.length;l>0&&(a[c-1][4]=s),l<p-10?(s[4]=a[c],Su(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const v=s[17];null!==v&&a!==v&&function ab(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(v,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,l,v,p);const E=Rp(p,v),I=l[11],C=Mp(I,v[7]);return null!==C&&function ph(i,s,a,l,c,p){l[0]=c,l[6]=s,mh(i,l,a,1,c,p)}(c,v[6],I,l,C,E),s.attachToViewContainerRef(),Su(Qg(v),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=s_(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Ap(this._lContainer,a);l&&(Jl(Qg(this._lContainer),a),w0(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Ap(this._lContainer,a);return l&&null!=Jl(Qg(this._lContainer),a)?new ws(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function s_(i){return i[8]}function Qg(i){return i[8]||(i[8]=[])}function yo(i,s){let a;const l=s[i.index];if(ai(l))a=l;else{let c;if(8&i.type)c=Kt(l);else{const p=s[11];c=p.createComment("");const v=Vr(i,s);Ua(p,Mp(p,v),c,function lb(i,s){return gn(i)?i.nextSibling(s):s.nextSibling}(p,v),!1)}s[i.index]=a=zp(l,s,c,i),Wp(s,a)}return new $w(a,i,s)}class of{constructor(s){this.queryList=s,this.matches=null}clone(){return new of(this.queryList)}setDirty(){this.queryList.setDirty()}}class af{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<l;p++){const v=a.getByIndex(p);c.push(this.queries[v.indexInDeclarationView].clone())}return new af(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==c_(s,a).matches&&this.queries[a].setDirty()}}class Jg{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class iu{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,c);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new iu(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Li{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Li(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(s,a,qw(a,p)),this.matchTNodeWithReadOption(s,a,Du(a,s,p,!1,!1))}else l===sf?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Du(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Es||c===Yg||c===sf&&4&a.type)this.addMatch(a.index,-2);else{const p=Du(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function qw(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function zw(i,s,a,l){return-1===a?function uf(i,s){return 11&i.type?sd(i,s):4&i.type?Kg(i,s):null}(s,i):-2===a?function o_(i,s,a){return a===Es?sd(s,i):a===sf?Kg(s,i):a===Yg?yo(s,i):void 0}(i,s,l):ps(i,i[1],a,s)}function Xg(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const p=i.data,v=a.matches,E=[];for(let I=0;I<v.length;I+=2){const C=v[I];E.push(C<0?null:zw(s,p[C],v[I+1],a.metadata.read))}c.matches=E}return c.matches}function em(i,s,a,l){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const v=Xg(i,s,c,a);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)l.push(v[E/2]);else{const C=p[E+1],T=s[-I];for(let O=10;O<T.length;O++){const H=T[O];H[17]===H[3]&&em(H[1],H,C,l)}if(null!==T[9]){const O=T[9];for(let H=0;H<O.length;H++){const Q=O[H];em(Q[1],Q,C,l)}}}}}return l}function a_(i){const s=Me(),a=kt(),l=Gl();zf(l+1);const c=c_(a,l);if(i.dirty&&W(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?em(a,s,l,[]):Xg(a,s,c,l);i.reset(p,Yn),i.notifyOnChanges()}return!0}return!1}function u_(i,s,a,l){const c=kt();if(c.firstCreatePass){const p=Vn();(function Zw(i,s,a){null===i.queries&&(i.queries=new iu),i.queries.track(new Li(s,a))})(c,new Jg(s,a,l),p.index),function kD(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function lf(i,s,a){const l=new i_(4==(4&a));Ly(i,s,l,l.destroy),null===s[19]&&(s[19]=new af),s[19].queries.push(new of(l))}(c,Me(),a)}function l_(){return function Ww(i,s){return i[19].queries[s].queryList}(Me(),Gl())}function c_(i,s){return i.queries.getByIndex(s)}function yf(...i){}const Pr=new On("Application Initializer");let vf=(()=>{class i{constructor(a){this.appInits=a,this.resolve=yf,this.reject=yf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(Uh(p))a.push(p);else if(mv(p)){const v=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ar(Pr,8))},i.\u0275prov=$t({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const y_=new On("AppId",{providedIn:"root",factory:function Ed(){return`${_f()}${_f()}${_f()}`}});function _f(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const v_=new On("Platform Initializer"),Ef=new On("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),__=new On("appBootstrapListener");let rI=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=$t({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const E_=new On("LocaleId",{providedIn:"root",factory:()=>Gm(E_,ft.Optional|ft.SkipSelf)||function qD(){return"undefined"!=typeof $localize&&$localize.locale||Ng}()}),wf=new On("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class sI{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let oI=(()=>{class i{compileModuleSync(a){return new qr(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=y(bn(a).declarations).reduce((v,E)=>{const I=on(E);return I&&v.push(new Gg(I)),v},[]);return new sI(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=$t({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const KD=(()=>Promise.resolve(0))();function w_(i){"undefined"==typeof Zone?KD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class pi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dn(!1),this.onMicrotaskEmpty=new Dn(!1),this.onStable=new Dn(!1),this.onError=new Dn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function wd(){let i=Ot.requestAnimationFrame,s=Ot.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function aI(i){const s=()=>{!function QD(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ot,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,ri(i),i.isCheckStableRunning=!0,I_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),ri(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,p,v,E)=>{try{return uI(i),a.invokeTask(c,p,v,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),b_(i)}},onInvoke:(a,l,c,p,v,E,I)=>{try{return uI(i),a.invoke(c,p,v,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),b_(i)}},onHasTask:(a,l,c,p)=>{a.hasTask(c,p),l===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,ri(i),I_(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(pi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+c,s,YD,yf,yf);try{return p.runTask(v,a,l)}finally{p.cancelTask(v)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const YD={};function I_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function ri(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function uI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function b_(i){i._nesting--,I_(i)}class vo{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Dn,this.onMicrotaskEmpty=new Dn,this.onStable=new Dn,this.onError=new Dn}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let D_=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pi.assertNotInAngularZone(),w_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())w_(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ar(pi))},i.\u0275prov=$t({token:i,factory:i.\u0275fac}),i})(),am=(()=>{class i{constructor(){this._applications=new Map,C_.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return C_.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=$t({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class lI{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function JD(i){C_=i}let C_=new lI,bl=null;const cI=new On("AllowMultipleToken"),dI=new On("PlatformOnDestroy");class tC{constructor(s,a){this.name=s,this.token=a}}function hI(i,s,a=[]){const l=`Platform: ${s}`,c=new On(l);return(p=[])=>{let v=T_();if(!v||v.injector.get(cI,!1)){const E=[...a,...p,{provide:c,useValue:!0}];i?i(E):function nC(i){if(bl&&!bl.get(cI,!1))throw new ke(400,"");bl=i;const s=i.get(A_),a=i.get(v_,null);a&&a.forEach(l=>l())}(function iC(i=[],s){return Go.create({name:s,providers:[{provide:Qp,useValue:"platform"},{provide:dI,useValue:()=>bl=null},...i]})}(E,l))}return function rC(i){const s=T_();if(!s)throw new ke(401,"");return s}()}}function T_(){var i;return null!==(i=null==bl?void 0:bl.get(A_))&&void 0!==i?i:null}let A_=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function sC(i,s){let a;return a="noop"===i?new vo:("zone.js"===i?void 0:i)||new pi({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:pi,useValue:E}];return E.run(()=>{const C=Go.create({providers:I,parent:this.injector,name:a.moduleType.name}),T=a.create(C),O=T.injector.get(Ac,null);if(!O)throw new ke(402,"");return E.runOutsideAngular(()=>{const H=E.onError.subscribe({next:Q=>{O.handleError(Q)}});T.onDestroy(()=>{lm(this._modules,T),H.unsubscribe()})}),function fI(i,s,a){try{const l=a();return Uh(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(O,E,()=>{const H=T.injector.get(vf);return H.runInitializers(),H.donePromise.then(()=>(function Zh(i){At(i,"Expected localeId to be defined"),"string"==typeof i&&(jv=i.toLowerCase().replace(/_/g,"-"))}(T.injector.get(E_,Ng)||Ng),this._moduleDoBootstrap(T),T))})})}bootstrapModule(a,l=[]){const c=pI({},l);return function XD(i,s,a){const l=new qr(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const l=a.injector.get(um);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new ke(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(dI,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ar(Go))},i.\u0275prov=$t({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function pI(i,s){return Array.isArray(s)?s.reduce(pI,i):Object.assign(Object.assign({},i),s)}let um=(()=>{class i{constructor(a,l,c,p){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new P.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new P.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{pi.assertNotInAngularZone(),w_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{pi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),T.unsubscribe()}});this.isStable=(0,se.T)(v,E.pipe((0,le.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new ke(405,"");let c;c=a instanceof rd?a:this._injector.get(Bg).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const p=function eC(i){return i.isBoundToModule}(c)?void 0:this._injector.get(mo),E=c.create(Go.NULL,[],l||c.selector,p),I=E.location.nativeElement,C=E.injector.get(D_,null),T=C&&E.injector.get(am);return C&&T&&T.registerApplication(I,C),E.onDestroy(()=>{this.detachView(E.hostView),lm(this.components,E),T&&T.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new ke(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;lm(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(__,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Ar(pi),Ar(Go),Ar(Ac),Ar(vf))},i.\u0275prov=$t({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function lm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Is=!0,gI=!1;function If(){return gI=!0,Is}function Dl(){if(gI)throw new Error("Cannot enable prod mode after platform setup.");Is=!1}let M_=(()=>{class i{}return i.__NG_ELEMENT_ID__=mI,i})();function mI(i){return function Wr(i,s,a){if(du(i)&&!a){const l=R(i.index,s);return new ws(l,l)}return 47&i.type?new ws(s[16],s):null}(Vn(),Me(),16==(16&i))}class wI{constructor(){}supports(s){return el(s)}create(s){return new lC(s)}}const II=(i,s)=>s;class lC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||II}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,p=null;for(;a||l;){const v=!l||a&&a.currentIndex<ou(l,c,p)?a:l,E=ou(v,c,p),I=v.currentIndex;if(v===l)c--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)c++;else{p||(p=[]);const C=E-c,T=I-c;if(C!=T){for(let H=0;H<C;H++){const Q=H<p.length?p[H]:p[H]=0,_e=Q+H;T<=_e&&_e<C&&(p[H]=Q+1)}p[v.previousIndex]=T-C}}E!==I&&s(v,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!el(s))throw new ke(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,v,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)p=s[E],v=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,p,v,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,E),l=!0),a=a._next}else c=0,function qb(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Xu()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{v=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,E,v,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new cC(a,l),p,c),s}_verifyReinsertion(s,a,l,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Cd),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Cd),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class cC{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Cd{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new dC,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ou(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class au{constructor(){}supports(s){return s instanceof Map||xh(s)}create(){return new bI}}class bI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||xh(s)))throw new ke(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,v=c._next;return p&&(p._next=v),v&&(v._prev=p),c._next=null,c._prev=null,c}const l=new hC(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class hC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function DI(){return new Tf([new wI])}let Tf=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||DI()),deps:[[i,new Fo,new Ns]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new ke(901,"")}}return i.\u0275prov=$t({token:i,providedIn:"root",factory:DI}),i})();function CI(){return new gm([new au])}let gm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||CI()),deps:[[i,new Fo,new Ns]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new ke(901,"")}}return i.\u0275prov=$t({token:i,providedIn:"root",factory:CI}),i})();const Vi=hI(null,"core",[]);let TI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ar(um))},i.\u0275mod=It({type:i}),i.\u0275inj=Ct({}),i})()},579:(nt,Ee,x)=>{x.d(Ee,{EI:()=>q,Gb:()=>Ot,Iv:()=>Tn,Kz:()=>z,Xd:()=>ft,lT:()=>xn,xP:()=>k});var h=x(5861),Y=x(9681),P=x(1877),se=x(2090),le=x(4859);x(2833);const oe="analytics",ce="firebase_id",j="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",te="https://www.googletagmanager.com/gtag/js",Ue=new P.Yd("@firebase/analytics");function we(U){return Promise.all(U.map(X=>X.catch(me=>me)))}function ke(U,X){const me=document.createElement("script");me.src=`${te}?l=${U}&id=${X}`,me.async=!0,document.head.appendChild(me)}function he(U,X,me,xe,He,Ve){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,h.Z)(function*(U,X,me,xe,He,Ve){const lt=xe[He];try{if(lt)yield X[lt];else{const rn=(yield we(me)).find(Zt=>Zt.measurementId===He);rn&&(yield X[rn.appId])}}catch(It){Ue.error(It)}U("config",He,Ve)})).apply(this,arguments)}function et(U,X,me,xe,He){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,h.Z)(function*(U,X,me,xe,He){try{let Ve=[];if(He&&He.send_to){let lt=He.send_to;Array.isArray(lt)||(lt=[lt]);const It=yield we(me);for(const rn of lt){const Zt=It.find(si=>si.measurementId===rn),wr=Zt&&X[Zt.appId];if(!wr){Ve=[];break}Ve.push(wr)}}0===Ve.length&&(Ve=Object.values(X)),yield Promise.all(Ve),U("event",xe,He||{})}catch(Ve){Ue.error(Ve)}})).apply(this,arguments)}function De(){const U=window.document.getElementsByTagName("script");for(const X of Object.values(U))if(X.src&&X.src.includes(te))return X;return null}const Fe=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),re=new class K{constructor(X={},me=1e3){this.throttleMetadata=X,this.intervalMillis=me}getThrottleMetadata(X){return this.throttleMetadata[X]}setThrottleMetadata(X,me){this.throttleMetadata[X]=me}deleteThrottleMetadata(X){delete this.throttleMetadata[X]}};function ne(U){return new Headers({Accept:"application/json","x-goog-api-key":U})}function pe(U){return ae.apply(this,arguments)}function ae(){return(ae=(0,h.Z)(function*(U){var X;const{appId:me,apiKey:xe}=U,He={method:"GET",headers:ne(xe)},Ve=j.replace("{app-id}",me),lt=yield fetch(Ve,He);if(200!==lt.status&&304!==lt.status){let It="";try{const rn=yield lt.json();(null===(X=rn.error)||void 0===X?void 0:X.message)&&(It=rn.error.message)}catch(rn){}throw Fe.create("config-fetch-failed",{httpStatus:lt.status,responseMessage:It})}return lt.json()})).apply(this,arguments)}function Le(U){return dt.apply(this,arguments)}function dt(){return(dt=(0,h.Z)(function*(U,X=re,me){const{appId:xe,apiKey:He,measurementId:Ve}=U.options;if(!xe)throw Fe.create("no-app-id");if(!He){if(Ve)return{measurementId:Ve,appId:xe};throw Fe.create("no-api-key")}const lt=X.getThrottleMetadata(xe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},It=new Fn;return setTimeout((0,h.Z)(function*(){It.abort()}),void 0!==me?me:6e4),Ut({appId:xe,apiKey:He,measurementId:Ve},lt,It,X)})).apply(this,arguments)}function Ut(U,X,me){return At.apply(this,arguments)}function At(){return(At=(0,h.Z)(function*(U,{throttleEndTimeMillis:X,backoffCount:me},xe,He=re){const{appId:Ve,measurementId:lt}=U;try{yield Ke(xe,X)}catch(It){if(lt)return Ue.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${It.message}]`),{appId:Ve,measurementId:lt};throw It}try{const It=yield pe(U);return He.deleteThrottleMetadata(Ve),It}catch(It){if(!Wt(It)){if(He.deleteThrottleMetadata(Ve),lt)return Ue.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${It.message}]`),{appId:Ve,measurementId:lt};throw It}const rn=503===Number(It.customData.httpStatus)?(0,se.$s)(me,He.intervalMillis,30):(0,se.$s)(me,He.intervalMillis),Zt={throttleEndTimeMillis:Date.now()+rn,backoffCount:me+1};return He.setThrottleMetadata(Ve,Zt),Ue.debug(`Calling attemptFetch again in ${rn} millis`),Ut(U,Zt,xe,He)}})).apply(this,arguments)}function Ke(U,X){return new Promise((me,xe)=>{const He=Math.max(X-Date.now(),0),Ve=setTimeout(me,He);U.addEventListener(()=>{clearTimeout(Ve),xe(Fe.create("fetch-throttle",{throttleEndTimeMillis:X}))})})}function Wt(U){if(!(U instanceof se.ZR&&U.customData))return!1;const X=Number(U.customData.httpStatus);return 429===X||500===X||503===X||504===X}class Fn{constructor(){this.listeners=[]}addEventListener(X){this.listeners.push(X)}abort(){this.listeners.forEach(X=>X())}}function fn(){return $t.apply(this,arguments)}function $t(){return($t=(0,h.Z)(function*(){if(!(0,se.hl)())return Ue.warn(Fe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(U){return Ue.warn(Fe.create("indexeddb-unavailable",{errorInfo:U}).message),!1}return!0})).apply(this,arguments)}function Ct(){return(Ct=(0,h.Z)(function*(U,X,me,xe,He,Ve,lt){var It;const rn=Le(U);rn.then(pn=>{me[pn.measurementId]=pn.appId,U.options.measurementId&&pn.measurementId!==U.options.measurementId&&Ue.warn(`The measurement ID in the local Firebase config (${U.options.measurementId}) does not match the measurement ID fetched from the server (${pn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pn=>Ue.error(pn)),X.push(rn);const Zt=fn().then(pn=>{if(pn)return xe.getId()}),[wr,si]=yield Promise.all([rn,Zt]);De()||ke(Ve,wr.measurementId),He("js",new Date);const on=null!==(It=null==lt?void 0:lt.config)&&void 0!==It?It:{};return on.origin="firebase",on.update=!0,null!=si&&(on[ce]=si),He("config",wr.measurementId,on),wr.measurementId})).apply(this,arguments)}class Tt{constructor(X){this.app=X}_delete(){return delete wn[this.app.options.appId],Promise.resolve()}}let wn={},vi=[];const Ln={};let vr,ar,ln="dataLayer",Xn="gtag",Hn=!1;function ft(U){if(Hn)throw Fe.create("already-initialized");U.dataLayerName&&(ln=U.dataLayerName),U.gtagName&&(Xn=U.gtagName)}function Jt(U,X,me){!function er(){const U=[];if((0,se.ru)()&&U.push("This is a browser extension environment."),(0,se.zI)()||U.push("Cookies are not available."),U.length>0){const X=U.map((xe,He)=>`(${He+1}) ${xe}`).join(" "),me=Fe.create("invalid-analytics-context",{errorInfo:X});Ue.warn(me.message)}}();const xe=U.options.appId;if(!xe)throw Fe.create("no-app-id");if(!U.options.apiKey){if(!U.options.measurementId)throw Fe.create("no-api-key");Ue.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${U.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=wn[xe])throw Fe.create("already-exists",{id:xe});if(!Hn){!function Be(U){let X=[];Array.isArray(window[U])?X=window[U]:window[U]=X}(ln);const{wrappedGtag:Ve,gtagCore:lt}=function be(U,X,me,xe,He){let Ve=function(...lt){window[xe].push(arguments)};return window[He]&&"function"==typeof window[He]&&(Ve=window[He]),window[He]=function Se(U,X,me,xe){function Ve(){return(Ve=(0,h.Z)(function*(lt,It,rn){try{"event"===lt?yield et(U,X,me,It,rn):"config"===lt?yield he(U,X,me,xe,It,rn):U("set",It)}catch(Zt){Ue.error(Zt)}})).apply(this,arguments)}return function He(lt,It,rn){return Ve.apply(this,arguments)}}(Ve,U,X,me),{gtagCore:Ve,wrappedGtag:window[He]}}(wn,vi,Ln,ln,Xn);ar=Ve,vr=lt,Hn=!0}return wn[xe]=function jn(U,X,me,xe,He,Ve,lt){return Ct.apply(this,arguments)}(U,vi,Ln,X,vr,ln,me),new Tt(U)}function Kr(){return(Kr=(0,h.Z)(function*(U,X,me,xe,He){if(He&&He.global)U("event",me,xe);else{const Ve=yield X;U("event",me,Object.assign(Object.assign({},xe),{send_to:Ve}))}})).apply(this,arguments)}function Cn(){return(Cn=(0,h.Z)(function*(U,X,me,xe){if(xe&&xe.global)return U("set",{screen_name:me}),Promise.resolve();U("config",yield X,{update:!0,screen_name:me})})).apply(this,arguments)}function Er(){return(Er=(0,h.Z)(function*(U,X,me,xe){if(xe&&xe.global)return U("set",{user_id:me}),Promise.resolve();U("config",yield X,{update:!0,user_id:me})})).apply(this,arguments)}function Vt(){return(Vt=(0,h.Z)(function*(U,X,me,xe){if(xe&&xe.global){const He={};for(const Ve of Object.keys(me))He[`user_properties.${Ve}`]=me[Ve];return U("set",He),Promise.resolve()}U("config",yield X,{update:!0,user_properties:me})})).apply(this,arguments)}function ht(){return(ht=(0,h.Z)(function*(U,X){const me=yield U;window[`ga-disable-${me}`]=!X})).apply(this,arguments)}function Ot(){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,h.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(U){return!1}})).apply(this,arguments)}function xn(U,X,me){U=(0,se.m9)(U),function _r(U,X,me,xe){return Cn.apply(this,arguments)}(ar,wn[U.app.options.appId],X,me).catch(xe=>Ue.error(xe))}function Tn(U,X,me){U=(0,se.m9)(U),function In(U,X,me,xe){return Er.apply(this,arguments)}(ar,wn[U.app.options.appId],X,me).catch(xe=>Ue.error(xe))}function k(U,X,me){U=(0,se.m9)(U),function ii(U,X,me,xe){return Vt.apply(this,arguments)}(ar,wn[U.app.options.appId],X,me).catch(xe=>Ue.error(xe))}function q(U,X){U=(0,se.m9)(U),function st(U,X){return ht.apply(this,arguments)}(wn[U.app.options.appId],X).catch(me=>Ue.error(me))}function z(U,X,me,xe){U=(0,se.m9)(U),function vn(U,X,me,xe,He){return Kr.apply(this,arguments)}(ar,wn[U.app.options.appId],X,me,xe).catch(He=>Ue.error(He))}const Te="@firebase/analytics",V="0.7.9";!function J(){(0,Y._registerComponent)(new le.wA(oe,(X,{options:me})=>Jt(X.getProvider("app").getImmediate(),X.getProvider("installations-internal").getImmediate(),me),"PUBLIC")),(0,Y._registerComponent)(new le.wA("analytics-internal",function U(X){try{const me=X.getProvider(oe).getImmediate();return{logEvent:(xe,He,Ve)=>z(me,xe,He,Ve)}}catch(me){throw Fe.create("interop-component-reg-failed",{reason:me})}},"PRIVATE")),(0,Y.registerVersion)(Te,V),(0,Y.registerVersion)(Te,V,"esm2017")}()},3942:(nt,Ee,x)=>{x.d(Ee,{Z:()=>ke});var h=x(2090),Y=x(4859),P=x(9681),se=x(1877);class le{constructor(he,Ie){this._delegate=he,this.firebase=Ie,(0,P._addComponent)(he,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(he,Ie=P._DEFAULT_ENTRY_NAME){var et;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(he);return!Ye.isInitialized()&&"EXPLICIT"===(null===(et=Ye.getComponent())||void 0===et?void 0:et.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:Ie})}_removeServiceInstance(he,Ie=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Ie)}_addComponent(he){(0,P._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,P._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function de(){const Be=function ce(Be){const he={},Ie={__esModule:!0,initializeApp:function Se(Fe,B={}){const Ce=P.initializeApp(Fe,B);if((0,h.r3)(he,Ce.name))return he[Ce.name];const K=new Be(Ce,Ie);return he[Ce.name]=K,K},app:Ye,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function De(Fe){const B=Fe.name,Ce=B.replace("-compat","");if(P._registerComponent(Fe)&&"PUBLIC"===Fe.type){const K=(re=Ye())=>{if("function"!=typeof re[Ce])throw oe.create("invalid-app-argument",{appName:B});return re[Ce]()};void 0!==Fe.serviceProps&&(0,h.ZB)(K,Fe.serviceProps),Ie[Ce]=K,Be.prototype[Ce]=function(...re){return this._getService.bind(this,B).apply(this,Fe.multipleInstances?re:[])}}return"PUBLIC"===Fe.type?Ie[Ce]:null},removeApp:function et(Fe){delete he[Fe]},useAsService:function We(Fe,B){return"serverAuth"===B?null:B},modularAPIs:P}};function Ye(Fe){if(!(0,h.r3)(he,Fe=Fe||P._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:Fe});return he[Fe]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function be(){return Object.keys(he).map(Fe=>he[Fe])}}),Ye.App=Be,Ie}(le);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function he(Ie){(0,h.ZB)(Be,Ie)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Be}(),j=new se.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=$;!function we(Be){(0,P.registerVersion)("@firebase/app-compat","0.1.25",Be)}()},9681:(nt,Ee,x)=>{x.r(Ee),x.d(Ee,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Xn,_DEFAULT_ENTRY_NAME:()=>At,_addComponent:()=>fn,_addOrOverwriteComponent:()=>$t,_apps:()=>Wt,_clearComponents:()=>wn,_components:()=>Fn,_getProvider:()=>Ct,_registerComponent:()=>jn,_removeServiceInstance:()=>Tt,deleteApp:()=>ft,getApp:()=>ar,getApps:()=>Hn,initializeApp:()=>vr,onLog:()=>vn,registerVersion:()=>Jt,setLogLevel:()=>Kr});var h=x(5861),Y=x(4859),P=x(1877),se=x(2090),le=x(8766);class ve{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(U=>{if(function oe(V){const J=V.getComponent();return"VERSION"===(null==J?void 0:J.type)}(U)){const X=U.getImmediate();return`${X.library}/${X.version}`}return null}).filter(U=>U).join(" ")}}const ce="@firebase/app",$=new P.Yd("@firebase/app"),At="[DEFAULT]",Ke={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Wt=new Map,Fn=new Map;function fn(V,J){try{V.container.addComponent(J)}catch(U){$.debug(`Component ${J.name} failed to register with FirebaseApp ${V.name}`,U)}}function $t(V,J){V.container.addOrOverwriteComponent(J)}function jn(V){const J=V.name;if(Fn.has(J))return $.debug(`There were multiple attempts to register component ${J}.`),!1;Fn.set(J,V);for(const U of Wt.values())fn(U,V);return!0}function Ct(V,J){const U=V.container.getProvider("heartbeat").getImmediate({optional:!0});return U&&U.triggerHeartbeat(),V.container.getProvider(J)}function Tt(V,J,U=At){Ct(V,J).clearInstance(U)}function wn(){Fn.clear()}const Ln=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ln{constructor(J,U,X){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},U),this._name=U.name,this._automaticDataCollectionEnabled=U.automaticDataCollectionEnabled,this._container=X,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}const Xn="9.8.1";function vr(V,J={}){"object"!=typeof J&&(J={name:J});const U=Object.assign({name:At,automaticDataCollectionEnabled:!1},J),X=U.name;if("string"!=typeof X||!X)throw Ln.create("bad-app-name",{appName:String(X)});const me=Wt.get(X);if(me){if((0,se.vZ)(V,me.options)&&(0,se.vZ)(U,me.config))return me;throw Ln.create("duplicate-app",{appName:X})}const xe=new Y.H0(X);for(const Ve of Fn.values())xe.addComponent(Ve);const He=new ln(V,U,xe);return Wt.set(X,He),He}function ar(V=At){const J=Wt.get(V);if(!J)throw Ln.create("no-app",{appName:V});return J}function Hn(){return Array.from(Wt.values())}function ft(V){return er.apply(this,arguments)}function er(){return(er=(0,h.Z)(function*(V){const J=V.name;Wt.has(J)&&(Wt.delete(J),yield Promise.all(V.container.getProviders().map(U=>U.delete())),V.isDeleted=!0)})).apply(this,arguments)}function Jt(V,J,U){var X;let me=null!==(X=Ke[V])&&void 0!==X?X:V;U&&(me+=`-${U}`);const xe=me.match(/\s|\//),He=J.match(/\s|\//);if(xe||He){const Ve=[`Unable to register library "${me}" with version "${J}":`];return xe&&Ve.push(`library name "${me}" contains illegal characters (whitespace or "/")`),xe&&He&&Ve.push("and"),He&&Ve.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void $.warn(Ve.join(" "))}jn(new Y.wA(`${me}-version`,()=>({library:me,version:J}),"VERSION"))}function vn(V,J){if(null!==V&&"function"!=typeof V)throw Ln.create("invalid-log-argument");(0,P.Am)(V,J)}function Kr(V){(0,P.Ub)(V)}const In="firebase-heartbeat-store";let Er=null;function ii(){return Er||(Er=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(V,J)=>{0===J&&V.createObjectStore(In)}}).catch(V=>{throw Ln.create("storage-open",{originalErrorMessage:V.message})})),Er}function st(){return(st=(0,h.Z)(function*(V){try{return(yield ii()).transaction(In).objectStore(In).get(kr(V))}catch(J){throw Ln.create("storage-get",{originalErrorMessage:J.message})}})).apply(this,arguments)}function ht(V,J){return sn.apply(this,arguments)}function sn(){return(sn=(0,h.Z)(function*(V,J){try{const X=(yield ii()).transaction(In,"readwrite");return yield X.objectStore(In).put(J,kr(V)),X.done}catch(U){throw Ln.create("storage-set",{originalErrorMessage:U.message})}})).apply(this,arguments)}function kr(V){return`${V.name}!${V.options.appId}`}class xn{constructor(J){this.container=J,this._heartbeatsCache=null;const U=this.container.getProvider("app").getImmediate();this._storage=new q(U),this._heartbeatsCachePromise=this._storage.read().then(X=>(this._heartbeatsCache=X,X))}triggerHeartbeat(){var J=this;return(0,h.Z)(function*(){const X=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),me=Tn();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==me&&!J._heartbeatsCache.heartbeats.some(xe=>xe.date===me))return J._heartbeatsCache.heartbeats.push({date:me,agent:X}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(xe=>{const He=new Date(xe.date).valueOf();return Date.now()-He<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,h.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const U=Tn(),{heartbeatsToSend:X,unsentEntries:me}=function k(V,J=1024){const U=[];let X=V.slice();for(const me of V){const xe=U.find(He=>He.agent===me.agent);if(xe){if(xe.dates.push(me.date),z(U)>J){xe.dates.pop();break}}else if(U.push({agent:me.agent,dates:[me.date]}),z(U)>J){U.pop();break}X=X.slice(1)}return{heartbeatsToSend:U,unsentEntries:X}}(J._heartbeatsCache.heartbeats),xe=(0,se.L)(JSON.stringify({version:2,heartbeats:X}));return J._heartbeatsCache.lastSentHeartbeatDate=U,me.length>0?(J._heartbeatsCache.heartbeats=me,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),xe})()}}function Tn(){return(new Date).toISOString().substring(0,10)}class q{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,h.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function Vt(V){return st.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var U=this;return(0,h.Z)(function*(){var X;if(yield U._canUseIndexedDBPromise){const xe=yield U.read();return ht(U.app,{lastSentHeartbeatDate:null!==(X=J.lastSentHeartbeatDate)&&void 0!==X?X:xe.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var U=this;return(0,h.Z)(function*(){var X;if(yield U._canUseIndexedDBPromise){const xe=yield U.read();return ht(U.app,{lastSentHeartbeatDate:null!==(X=J.lastSentHeartbeatDate)&&void 0!==X?X:xe.lastSentHeartbeatDate,heartbeats:[...xe.heartbeats,...J.heartbeats]})}})()}}function z(V){return(0,se.L)(JSON.stringify({version:2,heartbeats:V})).length}!function Te(V){jn(new Y.wA("platform-logger",J=>new ve(J),"PRIVATE")),jn(new Y.wA("heartbeat",J=>new xn(J),"PRIVATE")),Jt(ce,"0.7.24",V),Jt(ce,"0.7.24","esm2017"),Jt("fire-js","")}("")},4859:(nt,Ee,x)=>{x.d(Ee,{H0:()=>ce,wA:()=>P});var h=x(5861),Y=x(2090);class P{constructor($,j,te){this.name=$,this.instanceFactory=j,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const se="[DEFAULT]";class le{constructor($,j){this.name=$,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const j=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(j)){const te=new Y.BH;if(this.instancesDeferred.set(j,te),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:j});Ue&&te.resolve(Ue)}catch(Ue){}}return this.instancesDeferred.get(j).promise}getImmediate($){var j;const te=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),Ue=null!==(j=null==$?void 0:$.optional)&&void 0!==j&&j;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(we){if(Ue)return null;throw we}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function oe(de){return"EAGER"===de.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:se})}catch(j){}for(const[j,te]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(j);try{const we=this.getOrInitializeService({instanceIdentifier:Ue});te.resolve(we)}catch(we){}}}}clearInstance($=se){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,h.Z)(function*(){const j=Array.from($.instances.values());yield Promise.all([...j.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...j.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=se){return this.instances.has($)}getOptions($=se){return this.instancesOptions.get($)||{}}initialize($={}){const{options:j={}}=$,te=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:te,options:j});for(const[we,ke]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(we)&&ke.resolve(Ue);return Ue}onInit($,j){var te;const Ue=this.normalizeInstanceIdentifier(j),we=null!==(te=this.onInitCallbacks.get(Ue))&&void 0!==te?te:new Set;we.add($),this.onInitCallbacks.set(Ue,we);const ke=this.instances.get(Ue);return ke&&$(ke,Ue),()=>{we.delete($)}}invokeOnInitCallbacks($,j){const te=this.onInitCallbacks.get(j);if(te)for(const Ue of te)try{Ue($,j)}catch(we){}}getOrInitializeService({instanceIdentifier:$,options:j={}}){let te=this.instances.get($);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(de=$,de===se?void 0:de),options:j}),this.instances.set($,te),this.instancesOptions.set($,j),this.invokeOnInitCallbacks(te,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,te)}catch(Ue){}var de;return te||null}normalizeInstanceIdentifier($=se){return this.component?this.component.multipleInstances?$:se:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor($){this.name=$,this.providers=new Map}addComponent($){const j=this.getProvider($.name);if(j.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);j.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const j=new le($,this);return this.providers.set($,j),j}getProviders(){return Array.from(this.providers.values())}}},2833:(nt,Ee,x)=>{var h=x(5861),Y=x(9681),P=x(4859),se=x(2090),le=x(8766);const ve="@firebase/installations",de="w:0.5.9",$="FIS_v2",Be=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function he(F){return F instanceof se.ZR&&F.code.includes("request-failed")}function Ie({projectId:F}){return`https://firebaseinstallations.googleapis.com/v1/projects/${F}/installations`}function et(F){return{token:F.token,requestStatus:2,expiresIn:B(F.expiresIn),creationTime:Date.now()}}function Ye(F,ie){return Se.apply(this,arguments)}function Se(){return(Se=(0,h.Z)(function*(F,ie){const ot=(yield ie.json()).error;return Be.create("request-failed",{requestName:F,serverCode:ot.code,serverMessage:ot.message,serverStatus:ot.status})})).apply(this,arguments)}function be({apiKey:F}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F})}function De(F,{refreshToken:ie}){const Oe=be(F);return Oe.append("Authorization",function Ce(F){return`${$} ${F}`}(ie)),Oe}function We(F){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,h.Z)(function*(F){const ie=yield F();return ie.status>=500&&ie.status<600?F():ie})).apply(this,arguments)}function B(F){return Number(F.replace("s","000"))}function K(F,ie){return re.apply(this,arguments)}function re(){return(re=(0,h.Z)(function*({appConfig:F,heartbeatServiceProvider:ie},{fid:Oe}){const ot=Ie(F),Pt=be(F),Bt=ie.getImmediate({optional:!0});if(Bt){const pt=yield Bt.getHeartbeatsHeader();pt&&Pt.append("x-firebase-client",pt)}const cn={method:"POST",headers:Pt,body:JSON.stringify({fid:Oe,authVersion:$,appId:F.appId,sdkVersion:de})},br=yield We(()=>fetch(ot,cn));if(br.ok){const pt=yield br.json();return{fid:pt.fid||Oe,registrationStatus:2,refreshToken:pt.refreshToken,authToken:et(pt.authToken)}}throw yield Ye("Create Installation",br)})).apply(this,arguments)}function ne(F){return new Promise(ie=>{setTimeout(ie,F)})}const ae=/^[cdef][\w-]{21}$/;function dt(){try{const F=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(F),F[0]=112+F[0]%16;const Oe=function Ut(F){return function pe(F){return btoa(String.fromCharCode(...F)).replace(/\+/g,"-").replace(/\//g,"_")}(F).substr(0,22)}(F);return ae.test(Oe)?Oe:""}catch(F){return""}}function At(F){return`${F.appName}!${F.appId}`}const Ke=new Map;function Wt(F,ie){const Oe=At(F);$t(Oe,ie),function jn(F,ie){const Oe=function Tt(){return!Ct&&"BroadcastChannel"in self&&(Ct=new BroadcastChannel("[Firebase] FID Change"),Ct.onmessage=F=>{$t(F.data.key,F.data.fid)}),Ct}();Oe&&Oe.postMessage({key:F,fid:ie}),function wn(){0===Ke.size&&Ct&&(Ct.close(),Ct=null)}()}(Oe,ie)}function $t(F,ie){const Oe=Ke.get(F);if(Oe)for(const ot of Oe)ot(ie)}let Ct=null;const ln="firebase-installations-store";let Xn=null;function vr(){return Xn||(Xn=(0,le.X3)("firebase-installations-database",1,{upgrade:(F,ie)=>{0===ie&&F.createObjectStore(ln)}})),Xn}function ar(F,ie){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,h.Z)(function*(F,ie){const Oe=At(F),Pt=(yield vr()).transaction(ln,"readwrite"),Bt=Pt.objectStore(ln),jt=yield Bt.get(Oe);return yield Bt.put(ie,Oe),yield Pt.done,(!jt||jt.fid!==ie.fid)&&Wt(F,ie.fid),ie})).apply(this,arguments)}function ft(F){return er.apply(this,arguments)}function er(){return(er=(0,h.Z)(function*(F){const ie=At(F),ot=(yield vr()).transaction(ln,"readwrite");yield ot.objectStore(ln).delete(ie),yield ot.done})).apply(this,arguments)}function Jt(F,ie){return vn.apply(this,arguments)}function vn(){return(vn=(0,h.Z)(function*(F,ie){const Oe=At(F),Pt=(yield vr()).transaction(ln,"readwrite"),Bt=Pt.objectStore(ln),jt=yield Bt.get(Oe),cn=ie(jt);return void 0===cn?yield Bt.delete(Oe):yield Bt.put(cn,Oe),yield Pt.done,cn&&(!jt||jt.fid!==cn.fid)&&Wt(F,cn.fid),cn})).apply(this,arguments)}function Kr(F){return _r.apply(this,arguments)}function _r(){return(_r=(0,h.Z)(function*(F){let ie;const Oe=yield Jt(F.appConfig,ot=>{const Pt=Cn(ot),Bt=In(F,Pt);return ie=Bt.registrationPromise,Bt.installationEntry});return""===Oe.fid?{installationEntry:yield ie}:{installationEntry:Oe,registrationPromise:ie}})).apply(this,arguments)}function Cn(F){return sn(F||{fid:dt(),registrationStatus:0})}function In(F,ie){if(0===ie.registrationStatus){if(!navigator.onLine)return{installationEntry:ie,registrationPromise:Promise.reject(Be.create("app-offline"))};const Oe={fid:ie.fid,registrationStatus:1,registrationTime:Date.now()},ot=function Er(F,ie){return ii.apply(this,arguments)}(F,Oe);return{installationEntry:Oe,registrationPromise:ot}}return 1===ie.registrationStatus?{installationEntry:ie,registrationPromise:Vt(F)}:{installationEntry:ie}}function ii(){return(ii=(0,h.Z)(function*(F,ie){try{const Oe=yield K(F,ie);return ar(F.appConfig,Oe)}catch(Oe){throw he(Oe)&&409===Oe.customData.serverCode?yield ft(F.appConfig):yield ar(F.appConfig,{fid:ie.fid,registrationStatus:0}),Oe}})).apply(this,arguments)}function Vt(F){return st.apply(this,arguments)}function st(){return(st=(0,h.Z)(function*(F){let ie=yield ht(F.appConfig);for(;1===ie.registrationStatus;)yield ne(100),ie=yield ht(F.appConfig);if(0===ie.registrationStatus){const{installationEntry:Oe,registrationPromise:ot}=yield Kr(F);return ot||Oe}return ie})).apply(this,arguments)}function ht(F){return Jt(F,ie=>{if(!ie)throw Be.create("installation-not-found");return sn(ie)})}function sn(F){return function kr(F){return 1===F.registrationStatus&&F.registrationTime+1e4<Date.now()}(F)?{fid:F.fid,registrationStatus:0}:F}function Ot(F,ie){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,h.Z)(function*({appConfig:F,heartbeatServiceProvider:ie},Oe){const ot=xn(F,Oe),Pt=De(F,Oe),Bt=ie.getImmediate({optional:!0});if(Bt){const pt=yield Bt.getHeartbeatsHeader();pt&&Pt.append("x-firebase-client",pt)}const cn={method:"POST",headers:Pt,body:JSON.stringify({installation:{sdkVersion:de,appId:F.appId}})},br=yield We(()=>fetch(ot,cn));if(br.ok)return et(yield br.json());throw yield Ye("Generate Auth Token",br)})).apply(this,arguments)}function xn(F,{fid:ie}){return`${Ie(F)}/${ie}/authTokens:generate`}function Tn(F){return k.apply(this,arguments)}function k(){return(k=(0,h.Z)(function*(F,ie=!1){let Oe;const ot=yield Jt(F.appConfig,Bt=>{if(!U(Bt))throw Be.create("not-registered");const jt=Bt.authToken;if(!ie&&X(jt))return Bt;if(1===jt.requestStatus)return Oe=q(F,ie),Bt;{if(!navigator.onLine)throw Be.create("app-offline");const cn=xe(Bt);return Oe=V(F,cn),cn}});return Oe?yield Oe:ot.authToken})).apply(this,arguments)}function q(F,ie){return z.apply(this,arguments)}function z(){return(z=(0,h.Z)(function*(F,ie){let Oe=yield Te(F.appConfig);for(;1===Oe.authToken.requestStatus;)yield ne(100),Oe=yield Te(F.appConfig);const ot=Oe.authToken;return 0===ot.requestStatus?Tn(F,ie):ot})).apply(this,arguments)}function Te(F){return Jt(F,ie=>{if(!U(ie))throw Be.create("not-registered");return function He(F){return 1===F.requestStatus&&F.requestTime+1e4<Date.now()}(ie.authToken)?Object.assign(Object.assign({},ie),{authToken:{requestStatus:0}}):ie})}function V(F,ie){return J.apply(this,arguments)}function J(){return(J=(0,h.Z)(function*(F,ie){try{const Oe=yield Ot(F,ie),ot=Object.assign(Object.assign({},ie),{authToken:Oe});return yield ar(F.appConfig,ot),Oe}catch(Oe){if(!he(Oe)||401!==Oe.customData.serverCode&&404!==Oe.customData.serverCode){const ot=Object.assign(Object.assign({},ie),{authToken:{requestStatus:0}});yield ar(F.appConfig,ot)}else yield ft(F.appConfig);throw Oe}})).apply(this,arguments)}function U(F){return void 0!==F&&2===F.registrationStatus}function X(F){return 2===F.requestStatus&&!function me(F){const ie=Date.now();return ie<F.creationTime||F.creationTime+F.expiresIn<ie+36e5}(F)}function xe(F){const ie={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},F),{authToken:ie})}function lt(){return(lt=(0,h.Z)(function*(F){const ie=F,{installationEntry:Oe,registrationPromise:ot}=yield Kr(ie);return ot?ot.catch(console.error):Tn(ie).catch(console.error),Oe.fid})).apply(this,arguments)}function rn(){return(rn=(0,h.Z)(function*(F,ie=!1){const Oe=F;return yield Zt(Oe),(yield Tn(Oe,ie)).token})).apply(this,arguments)}function Zt(F){return wr.apply(this,arguments)}function wr(){return(wr=(0,h.Z)(function*(F){const{registrationPromise:ie}=yield Kr(F);ie&&(yield ie)})).apply(this,arguments)}function Ei(F){return Be.create("missing-app-config-values",{valueName:F})}const oi="installations",ss=F=>{const ie=F.getProvider("app").getImmediate(),Oe=function ji(F){if(!F||!F.options)throw Ei("App Configuration");if(!F.name)throw Ei("App Name");const ie=["projectId","apiKey","appId"];for(const Oe of ie)if(!F.options[Oe])throw Ei(Oe);return{appName:F.name,projectId:F.options.projectId,apiKey:F.options.apiKey,appId:F.options.appId}}(ie);return{app:ie,appConfig:Oe,heartbeatServiceProvider:(0,Y._getProvider)(ie,"heartbeat"),_delete:()=>Promise.resolve()}},Ir=F=>{const ie=F.getProvider("app").getImmediate(),Oe=(0,Y._getProvider)(ie,oi).getImmediate();return{getId:()=>function Ve(F){return lt.apply(this,arguments)}(Oe),getToken:Pt=>function It(F){return rn.apply(this,arguments)}(Oe,Pt)}};(function Xe(){(0,Y._registerComponent)(new P.wA(oi,ss,"PUBLIC")),(0,Y._registerComponent)(new P.wA("installations-internal",Ir,"PRIVATE"))})(),(0,Y.registerVersion)(ve,"0.5.9"),(0,Y.registerVersion)(ve,"0.5.9","esm2017")},1877:(nt,Ee,x)=>{x.d(Ee,{Am:()=>de,Ub:()=>ce,Yd:()=>oe,in:()=>Y});const h=[];var Y=(()=>{return($=Y||(Y={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Y;var $})();const P={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},se=Y.INFO,le={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ve=($,j,...te)=>{if(j<$.logLevel)return;const Ue=(new Date).toISOString(),we=le[j];if(!we)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[we](`[${Ue}]  ${$.name}:`,...te)};class oe{constructor(j){this.name=j,this._logLevel=se,this._logHandler=ve,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in Y))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?P[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...j),this._logHandler(this,Y.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...j),this._logHandler(this,Y.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...j),this._logHandler(this,Y.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...j),this._logHandler(this,Y.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...j),this._logHandler(this,Y.ERROR,...j)}}function ce($){h.forEach(j=>{j.setLogLevel($)})}function de($,j){for(const te of h){let Ue=null;j&&j.level&&(Ue=P[j.level]),te.userLogHandler=null===$?null:(we,ke,...Be)=>{const he=Be.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch(et){return null}}).filter(Ie=>Ie).join(" ");ke>=(null!=Ue?Ue:we.logLevel)&&$({level:Y[ke].toLowerCase(),message:he,args:Be,type:we.name})}}}},8766:(nt,Ee,x)=>{x.d(Ee,{Lj:()=>Se,X3:()=>Ye});var h=x(5861);let P,se;const oe=new WeakMap,ce=new WeakMap,de=new WeakMap,$=new WeakMap,j=new WeakMap;let we={get(B,Ce,K){if(B instanceof IDBTransaction){if("done"===Ce)return ce.get(B);if("objectStoreNames"===Ce)return B.objectStoreNames||de.get(B);if("store"===Ce)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return Ie(B[Ce])},set:(B,Ce,K)=>(B[Ce]=K,!0),has:(B,Ce)=>B instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in B};function he(B){return"function"==typeof B?function Be(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(...Ce){return B.apply(et(this),Ce),Ie(oe.get(this))}:function(...Ce){return Ie(B.apply(et(this),Ce))}:function(Ce,...K){const re=B.call(et(this),Ce,...K);return de.set(re,Ce.sort?Ce.sort():[Ce]),Ie(re)}}(B):(B instanceof IDBTransaction&&function Ue(B){if(ce.has(B))return;const Ce=new Promise((K,re)=>{const ne=()=>{B.removeEventListener("complete",pe),B.removeEventListener("error",ae),B.removeEventListener("abort",ae)},pe=()=>{K(),ne()},ae=()=>{re(B.error||new DOMException("AbortError","AbortError")),ne()};B.addEventListener("complete",pe),B.addEventListener("error",ae),B.addEventListener("abort",ae)});ce.set(B,Ce)}(B),((B,Ce)=>Ce.some(K=>B instanceof K))(B,function le(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,we):B)}function Ie(B){if(B instanceof IDBRequest)return function te(B){const Ce=new Promise((K,re)=>{const ne=()=>{B.removeEventListener("success",pe),B.removeEventListener("error",ae)},pe=()=>{K(Ie(B.result)),ne()},ae=()=>{re(B.error),ne()};B.addEventListener("success",pe),B.addEventListener("error",ae)});return Ce.then(K=>{K instanceof IDBCursor&&oe.set(K,B)}).catch(()=>{}),j.set(Ce,B),Ce}(B);if($.has(B))return $.get(B);const Ce=he(B);return Ce!==B&&($.set(B,Ce),j.set(Ce,B)),Ce}const et=B=>j.get(B);function Ye(B,Ce,{blocked:K,upgrade:re,blocking:ne,terminated:pe}={}){const ae=indexedDB.open(B,Ce),Le=Ie(ae);return re&&ae.addEventListener("upgradeneeded",dt=>{re(Ie(ae.result),dt.oldVersion,dt.newVersion,Ie(ae.transaction))}),K&&ae.addEventListener("blocked",()=>K()),Le.then(dt=>{pe&&dt.addEventListener("close",()=>pe()),ne&&dt.addEventListener("versionchange",()=>ne())}).catch(()=>{}),Le}function Se(B,{blocked:Ce}={}){const K=indexedDB.deleteDatabase(B);return Ce&&K.addEventListener("blocked",()=>Ce()),Ie(K).then(()=>{})}const be=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],We=new Map;function Fe(B,Ce){if(!(B instanceof IDBDatabase)||Ce in B||"string"!=typeof Ce)return;if(We.get(Ce))return We.get(Ce);const K=Ce.replace(/FromIndex$/,""),re=Ce!==K,ne=De.includes(K);if(!(K in(re?IDBIndex:IDBObjectStore).prototype)||!ne&&!be.includes(K))return;const pe=function(){var ae=(0,h.Z)(function*(Le,...dt){const Ut=this.transaction(Le,ne?"readwrite":"readonly");let At=Ut.store;return re&&(At=At.index(dt.shift())),(yield Promise.all([At[K](...dt),ne&&Ut.done]))[0]});return function(dt){return ae.apply(this,arguments)}}();return We.set(Ce,pe),pe}!function ke(B){we=B(we)}(B=>Tx(Cx({},B),{get:(Ce,K,re)=>Fe(Ce,K)||B.get(Ce,K,re),has:(Ce,K)=>!!Fe(Ce,K)||B.has(Ce,K)}))},5861:(nt,Ee,x)=>{function h(P,se,le,ve,oe,ce,de){try{var $=P[ce](de),j=$.value}catch(te){return void le(te)}$.done?se(j):Promise.resolve(j).then(ve,oe)}function Y(P){return function(){var se=this,le=arguments;return new Promise(function(ve,oe){var ce=P.apply(se,le);function de(j){h(ce,ve,oe,de,$,"next",j)}function $(j){h(ce,ve,oe,de,$,"throw",j)}de(void 0)})}}x.d(Ee,{Z:()=>Y})}},nt=>{nt(nt.s=2585)}]);